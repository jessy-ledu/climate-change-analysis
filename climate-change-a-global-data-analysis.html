<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Climate Change, Emissions &amp; Demography: A Global Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="climate-change-a-global-data-analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="climate-change-a-global-data-analysis_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="climate-change-a-global-data-analysis_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="climate-change-a-global-data-analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="climate-change-a-global-data-analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="climate-change-a-global-data-analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="climate-change-a-global-data-analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="climate-change-a-global-data-analysis_files/libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="climate-change-a-global-data-analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="climate-change-a-global-data-analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="climate-change-a-global-data-analysis_files/libs/bootstrap/bootstrap-bb462d781dde1847d9e3ccf7736099dd.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>
<script type="text/javascript">
window.PlotlyConfig = {MathJaxConfig: 'local'};
if (window.MathJax && window.MathJax.Hub && window.MathJax.Hub.Config) {window.MathJax.Hub.Config({SVG: {font: "STIX-Web"}});}
if (typeof require !== 'undefined') {
require.undef("plotly");
requirejs.config({
    paths: {
        'plotly': ['https://cdn.plot.ly/plotly-2.35.2.min']
    }
});
require(['plotly'], function(Plotly) {
    window._Plotly = Plotly;
});
}
</script>



</head>

<body class="fullcontent quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Climate Change, Emissions &amp; Demography: A Global Data Analysis</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="project-context" class="level3">
<h3 class="anchored" data-anchor-id="project-context">Project Context</h3>
<p>This project is part of a <strong>data science career-building portfolio</strong>, designed to showcase the use of <strong>Python for data analysis and visualization</strong> in the context of real-world, global-scale issues.</p>
<p>The goal is to publish a well-documented, insightful notebook on Kaggle that demonstrates: - Data cleaning and wrangling - Exploratory data analysis (EDA) - Regression and dimensionality reduction (PCA) - Geographic visualization - Interpretation and communication of findings</p>
</section>
<section id="data-sources" class="level3">
<h3 class="anchored" data-anchor-id="data-sources">Data Sources</h3>
<p>This analysis uses <strong>freely available, reputable datasets</strong> from: - <a href="https://climatedata.imf.org/pages/climatechange-data">IMF Climate Change Indicators Dashboard</a> - <a href="https://data.worldbank.org/">World Bank Open Data</a></p>
</section>
<section id="objective" class="level3">
<h3 class="anchored" data-anchor-id="objective">Objective</h3>
<p>We explore how countries vary in: - Climate change trends (Â°C/decade) - Greenhouse gas (GHG) emissions - Population growth</p>
<p>Through this, we aim to uncover global patterns and inequalities in <strong>climate impact</strong>, <strong>contribution</strong>, and <strong>demographic change</strong>, using accessible modeling techniques such as <strong>linear regression</strong> and <strong>PCA</strong>.</p>
<hr>
<p>This notebook not only addresses a critical global issue, but also serves as a practical demonstration of <strong>end-to-end data analysis in Python</strong> for potential collaborators or employers.</p>
<blockquote class="blockquote">
<p><strong>Disclaimer</strong>: This notebook is intended as a <strong>data science portfolio project</strong>, not a scientific publication.<br>
It uses publicly available data and simplified models to explore global patterns in climate, emissions, and population.<br>
While care was taken to ensure accuracy, the analysis is exploratory in nature and meant primarily to demonstrate <strong>technical and analytical skills</strong> in Python.</p>
</blockquote>
<div id="dc7ead14" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os <span class="co"># To differentiate between edit mode and save mode of kaggle</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Suppress warnings</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Data Handling ---</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd                   <span class="co"># DataFrames and data manipulation</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np                    <span class="co"># Numerical computations and arrays</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Display Utilities ---</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> IPython.display <span class="im">import</span> display, IFrame, Image   <span class="co"># Pretty-printing DataFrames in notebooks, plot interactive plot saved to HTML</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Plotting Libraries ---</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt       <span class="co"># Base plotting</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.cm <span class="im">as</span> cm            <span class="co"># Colormaps</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.colors <span class="im">as</span> mcolors   <span class="co"># Color normalization</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> matplotlib.colors <span class="im">import</span> LinearSegmentedColormap, TwoSlopeNorm  <span class="co"># Custom color scales</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.patches <span class="im">as</span> mpatches <span class="co"># Custom legend elements</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns                 <span class="co"># Statistical plotting</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> plotly.graph_objects <span class="im">as</span> go     <span class="co"># Interactive plotting</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Geospatial Plotting ---</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd               <span class="co"># Geospatial data and shapefiles</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Interactive Widgets ---</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> ipywidgets <span class="im">import</span> interact, Dropdown, IntSlider, widgets <span class="co"># UI controls for notebooks</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Statistical Analysis ---</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> pearsonr                      <span class="co"># Pearson correlation</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Machine Learning &amp; Modeling ---</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression      <span class="co"># Linear models</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> PolynomialFeatures, StandardScaler  <span class="co"># Feature engineering</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> r2_score                   <span class="co"># Regression evaluation</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> make_pipeline             <span class="co"># Pipelines</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.decomposition <span class="im">import</span> PCA                  <span class="co"># Principal Component Analysis</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler       <span class="co"># for PCA's scalers</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Smoothing ---</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.nonparametric.smoothers_lowess <span class="im">import</span> lowess  <span class="co"># LOESS smoothing</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Utilities ---</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> collections <span class="im">import</span> OrderedDict  <span class="co"># Ordered mappings</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="40454bd5" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Suppress specific RuntimeWarnings from numpy (invalid value encountered)</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>warnings.filterwarnings(<span class="st">"ignore"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="3c275770" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the data frame containing the climate indicator for each coutry</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>df_ALLC_STC <span class="op">=</span> pd.read_csv(<span class="vs">r"data/Indicator_3_1_Climate_Indicators_Annual_Mean_Global_Surface_Temperature_8202930366966918798</span><span class="dv">.</span><span class="vs">csv"</span>, encoding<span class="op">=</span><span class="st">'latin1'</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>display(df_ALLC_STC.head(<span class="dv">1</span>))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_STC[<span class="st">'ISO3'</span>])))</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">set</span>(df_ALLC_STC[<span class="st">'Indicator'</span>]))</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">set</span>(df_ALLC_STC[<span class="st">'CTS Name'</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ObjectId</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">ISO2</th>
<th data-quarto-table-cell-role="th">ISO3</th>
<th data-quarto-table-cell-role="th">Indicator</th>
<th data-quarto-table-cell-role="th">Unit</th>
<th data-quarto-table-cell-role="th">Source</th>
<th data-quarto-table-cell-role="th">CTS Code</th>
<th data-quarto-table-cell-role="th">CTS Name</th>
<th data-quarto-table-cell-role="th">CTS Full Descriptor</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2015</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">2017</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
<th data-quarto-table-cell-role="th">2024</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>Afghanistan, Islamic Rep. of</td>
<td>AF</td>
<td>AFG</td>
<td>Temperature change with respect to a baseline ...</td>
<td>Degree Celsius</td>
<td>Food and Agriculture Organization of the Unite...</td>
<td>ECCS</td>
<td>Surface Temperature Change</td>
<td>Environment, Climate Change, Climate and Weath...</td>
<td>...</td>
<td>1.139</td>
<td>1.588</td>
<td>1.63</td>
<td>1.597</td>
<td>0.951</td>
<td>0.552</td>
<td>1.418</td>
<td>1.967</td>
<td>1.748</td>
<td>2.188</td>
</tr>
</tbody>
</table>

<p>1 rows Ã 74 columns</p>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of ISO3 codes: 231
{'Temperature change with respect to a baseline climatology, corresponding to the period 1951-1980'}
{'Surface Temperature Change'}</code></pre>
</div>
</div>
<div id="6061c5a1" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Filter ISO3 codes corrsponding to real countries (not continents, world, etc) using data from https://public.opendatasoft.com/explore/dataset/countries-codes/export/</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>df_Ccode <span class="op">=</span> pd.read_csv(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data/countries-codes.csv"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    encoding<span class="op">=</span><span class="st">"latin1"</span>)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>display(df_Ccode.head(<span class="dv">1</span>))</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_Ccode[<span class="st">'ISO3 CODE'</span>])))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ISO2 CODE</th>
<th data-quarto-table-cell-role="th">ISO3 CODE</th>
<th data-quarto-table-cell-role="th">ONU CODE</th>
<th data-quarto-table-cell-role="th">LABEL EN</th>
<th data-quarto-table-cell-role="th">LABEL FR</th>
<th data-quarto-table-cell-role="th">LABEL SP</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>ES</td>
<td>ESP</td>
<td>724</td>
<td>Spain</td>
<td>Espagne</td>
<td>EspaÃ±a</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of ISO3 codes: 247</code></pre>
</div>
</div>
<div id="524d6d63" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ordered unique list of ISO3 codes from df_ALLC_STC</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>iso3_allc <span class="op">=</span> <span class="bu">list</span>(OrderedDict.fromkeys(df_ALLC_STC[<span class="st">'ISO3'</span>]))</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Reference set from df_Ccode (all valid ISO3 country codes)</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>valid_iso3 <span class="op">=</span> <span class="bu">set</span>(df_Ccode[<span class="st">'ISO3 CODE'</span>])</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Find invalid codes (those in df_ALLC_STC but not in df_Ccode)</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>invalid_iso3 <span class="op">=</span> [code <span class="cf">for</span> code <span class="kw">in</span> iso3_allc <span class="cf">if</span> code <span class="kw">not</span> <span class="kw">in</span> valid_iso3]</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Invalid ISO3 codes:"</span>, invalid_iso3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Invalid ISO3 codes: ['AFRTMP', 'AMETMP', 'ASIATMP', 'EURTMP', 'VAT', 'MYT', 'FSM', 'OCETMP', 'PCN', 'SJM', 'WLD']</code></pre>
</div>
</div>
<div id="7db86c66" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows where ISO3 is in invalid_iso3</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>df_ALLC_STC_cleaned <span class="op">=</span> df_ALLC_STC[<span class="op">~</span>df_ALLC_STC[<span class="st">'ISO3'</span>].isin(invalid_iso3)].copy()</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># reset index</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>df_ALLC_STC_cleaned.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes before:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_STC[<span class="st">'ISO3'</span>])))</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes after:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_STC_cleaned[<span class="st">'ISO3'</span>])))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of ISO3 codes before: 231
Number of ISO3 codes after: 220</code></pre>
</div>
</div>
<div id="2af74656" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>df_display <span class="op">=</span> df_Ccode[[<span class="st">'LABEL EN'</span>, <span class="st">'ISO3 CODE'</span>]].dropna().sort_values(<span class="st">'LABEL EN'</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>df_display.columns <span class="op">=</span> [<span class="st">'Country'</span>, <span class="st">'ISO3'</span>]</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure(data<span class="op">=</span>[go.Table(</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    header<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>[<span class="st">"Country"</span>, <span class="st">"ISO3"</span>]),</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    cells<span class="op">=</span><span class="bu">dict</span>(values<span class="op">=</span>[df_display[<span class="st">'Country'</span>], df_display[<span class="st">'ISO3'</span>]])</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>)])</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>fig.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="e8920052-a4c1-4a20-af58-7da0cebd13c3" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("e8920052-a4c1-4a20-af58-7da0cebd13c3")) {                    Plotly.newPlot(                        "e8920052-a4c1-4a20-af58-7da0cebd13c3",                        [{"cells":{"values":[["Afghanistan","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bosnia and Herzegovina","Botswana","Brazil","British Virgin Islands","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Channel Islands","Chile","China","Colombia","Comoros","Congo","Congo, Democratic Republic of the","Cook Islands","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Czechoslovakia","C\u00f4te d'Ivoire","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Ethiopia (including Eritrea)","Faeroe Islands","Falkland Islands (Malvinas)","Fiji","Finland","France","French Guiana","French Polynesia","Gabon","Gambia","Georgia","Germany","Germany, 5 new L\u00e4nder and Berlin (East)","Germany, Fed. Rep. of before 3.10.1990","Germany, The former German Dem. Rep.","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hong Kong, China","Hungary","Iceland","India","Indonesia","Iran, Islamic Rep. of","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Dem. People's Rep. of","Korea, Republic of","Kosovo","Kuwait","Kyrgyzstan","Lao People's Dem. Rep.","Latvia","Lebanon","Lesotho","Liberia","Libyan Arab Jamahiriya","Liechtenstein","Lithuania","Luxembourg","Macau, China","Macedonia, The former Yugoslav Rep. of","Madagascar","Malawi","Malaysia","Malaysia: Peninsular Malaysia","Malaysia: Sabah","Malaysia: Sarawak","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mexico","Moldova, Republic of","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","Netherlands Antilles","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Puerto Rico","Qatar","Romania","Russian Federation","Rwanda","R\u00e9union","Saint Helena","Saint Kitts and Nevis","Saint Lucia","Saint Pierre and Miquelon","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Serbia and Montenegro","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan, The Republic of","Spain","Sri Lanka","Sudan, The Republic of","Suriname","Swaziland","Sweden","Switzerland","Syrian Arab Republic","Taiwan, China","Tajikistan","Tanzania (Tanganyika)","Tanzania (Zanzibar)","Tanzania, United Republic of","Thailand","Timor-Leste","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","USSR","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","Uruguay","Uzbekistan","Vanuatu","Venezuela, Bolivarian Rep. of","Viet Nam","Virgin Islands (US)","Wallis and Futuna Islands","West Bank and Gaza Strip","Western Sahara","Yemen","Yemen, The former Arab Rep. of","Yemen, The former Democratic","Yugoslavia, The former Socialist Fed. Rep. of","Zambia","Zimbabwe"],["AFG","ALB","DZA","ASM","AND","AGO","AIA","ATG","ARG","ARM","ABW","AUS","AUT","AZE","BHS","BHR","BGD","BRB","BLR","BEL","BLZ","BEN","BMU","BTN","BOL","BIH","BWA","BRA","VGB","BRN","BGR","BFA","BDI","KHM","CMR","CAN","CPV","CYM","CAF","TCD","CHA","CHL","CHN","COL","COM","COG","COD","COK","CRI","HRV","CUB","CYP","CZE","CS1","CIV","DNK","DJI","DMA","DOM","ECU","EGY","SLV","GNQ","ERI","EST","ETH","ET1","FRO","FLK","FJI","FIN","FRA","GUF","PYF","GAB","GMB","GEO","DEU","DE3","DE2","DE1","GHA","GIB","GRC","GRL","GRD","GLP","GUM","GTM","GGY","GIN","GNB","GUY","HTI","HND","HKG","HUN","ISL","IND","IDN","IRN","IRQ","IRL","IMN","ISR","ITA","JAM","JPN","JEY","JOR","KAZ","KEN","KIR","PRK","KOR","KOS","KWT","KGZ","LAO","LVA","LBN","LSO","LBR","LBY","LIE","LTU","LUX","MAC","MKD","MDG","MWI","MYS","MY1","MY2","MY3","MDV","MLI","MLT","MHL","MTQ","MRT","MUS","MEX","MDA","MCO","MNG","MNE","MSR","MAR","MOZ","MMR","NAM","NRU","NPL","NLD","ANT","NCL","NZL","NIC","NER","NGA","NIU","NFK","MNP","NOR","OMN","PAK","PLW","PAN","PNG","PRY","PER","PHL","POL","PRT","PRI","QAT","ROU","RUS","RWA","REU","SHN","KNA","LCA","SPM","VCT","WSM","SMR","STP","SAU","SEN","SRB","SCG","SYC","SLE","SGP","SVK","SVN","SLB","SOM","ZAF","SSD","ESP","LKA","SDN","SUR","SWZ","SWE","CHE","SYR","TWN","TJK","TZ1","TZ2","TZA","THA","TLS","TGO","TKL","TON","TTO","TUN","TUR","TKM","TCA","TUV","URS","UGA","UKR","ARE","GBR","USA","URY","UZB","VUT","VEN","VNM","VIR","WLF","PSE","ESH","YEM","YE1","YE2","YU1","ZMB","ZWE"]]},"header":{"values":["Country","ISO3"]},"type":"table"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}}},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('e8920052-a4c1-4a20-af58-7da0cebd13c3');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div id="42c0a347" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#save the name of the climate indicator to plot in legend and axes</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>indicator_name <span class="op">=</span> <span class="bu">str</span>(df_ALLC_STC_cleaned[<span class="st">'Indicator'</span>][<span class="dv">0</span>])[<span class="dv">0</span>:<span class="dv">18</span>]</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Melt only columns that are years from 1961 to 2024</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>df_long <span class="op">=</span> df_ALLC_STC_cleaned.melt(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    id_vars<span class="op">=</span>[<span class="st">'ISO3'</span>],</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    value_vars<span class="op">=</span>[col <span class="cf">for</span> col <span class="kw">in</span> df_ALLC_STC_cleaned.columns <span class="cf">if</span> col.isdigit() <span class="kw">and</span> <span class="dv">1961</span> <span class="op">&lt;=</span> <span class="bu">int</span>(col) <span class="op">&lt;=</span> <span class="dv">2024</span>],</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    var_name<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    value_name<span class="op">=</span><span class="st">'Value'</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="co"># convert 'Year' column to integer</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>df_long[<span class="st">'Year'</span>] <span class="op">=</span> df_long[<span class="st">'Year'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_long.head())</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>df_long <span class="op">=</span> df_long.sort_values([<span class="st">'ISO3'</span>, <span class="st">'Year'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ISO3  Year  Value
0  AFG  1961 -0.096
1  ALB  1961  0.643
2  DZA  1961  0.154
3  ASM  1961  0.075
4  AND  1961  0.736</code></pre>
</div>
</div>
<div id="8283c667" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Plot the mean temperature change over  the world##################################</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">###################################and allow to compare to local change for each#################################</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">################################################separated country################################################</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Setup</span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>indicator_name <span class="op">=</span> <span class="st">'Surface Temperature'</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> <span class="bu">sorted</span>(df_long[<span class="st">'Year'</span>].unique())</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>pivot_df <span class="op">=</span> df_long.pivot(index<span class="op">=</span><span class="st">'Year'</span>, columns<span class="op">=</span><span class="st">'ISO3'</span>, values<span class="op">=</span><span class="st">'Value'</span>)</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>countries <span class="op">=</span> <span class="bu">sorted</span>(pivot_df.columns)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Bootstrap global mean</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>n_bootstrap <span class="op">=</span> <span class="dv">1000</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>bootstrap_means <span class="op">=</span> np.empty((<span class="bu">len</span>(years), n_bootstrap))</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(n_bootstrap):</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    sampled_countries <span class="op">=</span> np.random.choice(countries, size<span class="op">=</span><span class="bu">len</span>(countries), replace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    sampled_data <span class="op">=</span> pivot_df[sampled_countries]</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    bootstrap_means[:, i] <span class="op">=</span> sampled_data.mean(axis<span class="op">=</span><span class="dv">1</span>, skipna<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>mean_bootstrap <span class="op">=</span> np.nanmean(bootstrap_means, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>lower_ci <span class="op">=</span> np.nanpercentile(bootstrap_means, <span class="fl">2.5</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>upper_ci <span class="op">=</span> np.nanpercentile(bootstrap_means, <span class="fl">97.5</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Create traces ---</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Global mean line</span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(</span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>years,</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span>mean_bootstrap,</span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    mode<span class="op">=</span><span class="st">'lines'</span>,</span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">'Global Mean'</span>,</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a>    line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'red'</span>, dash<span class="op">=</span><span class="st">'dashdot'</span>),</span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    visible<span class="op">=</span><span class="va">True</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Global CI fill</span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>fig.add_trace(go.Scatter(</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>    x<span class="op">=</span>years <span class="op">+</span> years[::<span class="op">-</span><span class="dv">1</span>],</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>    y<span class="op">=</span><span class="bu">list</span>(upper_ci) <span class="op">+</span> <span class="bu">list</span>(lower_ci[::<span class="op">-</span><span class="dv">1</span>]),</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>    fill<span class="op">=</span><span class="st">'toself'</span>,</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>    fillcolor<span class="op">=</span><span class="st">'rgba(255,0,0,0.2)'</span>,</span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a>    line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'rgba(255,255,255,0)'</span>),</span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a>    name<span class="op">=</span><span class="st">'95% Bootstrap CI'</span>,</span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a>    hoverinfo<span class="op">=</span><span class="st">"skip"</span>,</span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a>    showlegend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb14-51"><a href="#cb14-51" aria-hidden="true" tabindex="-1"></a>    visible<span class="op">=</span><span class="va">True</span></span>
<span id="cb14-52"><a href="#cb14-52" aria-hidden="true" tabindex="-1"></a>))</span>
<span id="cb14-53"><a href="#cb14-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-54"><a href="#cb14-54" aria-hidden="true" tabindex="-1"></a><span class="co"># Country traces (one per country)</span></span>
<span id="cb14-55"><a href="#cb14-55" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> code <span class="kw">in</span> countries:</span>
<span id="cb14-56"><a href="#cb14-56" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(go.Scatter(</span>
<span id="cb14-57"><a href="#cb14-57" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>years,</span>
<span id="cb14-58"><a href="#cb14-58" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span>pivot_df[code],</span>
<span id="cb14-59"><a href="#cb14-59" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">'lines'</span>,</span>
<span id="cb14-60"><a href="#cb14-60" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="ss">f'</span><span class="sc">{</span>code<span class="sc">}</span><span class="ss">'</span>,</span>
<span id="cb14-61"><a href="#cb14-61" aria-hidden="true" tabindex="-1"></a>        visible<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb14-62"><a href="#cb14-62" aria-hidden="true" tabindex="-1"></a>        line<span class="op">=</span><span class="bu">dict</span>(width<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb14-63"><a href="#cb14-63" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb14-64"><a href="#cb14-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-65"><a href="#cb14-65" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Build dropdown menu ---</span></span>
<span id="cb14-66"><a href="#cb14-66" aria-hidden="true" tabindex="-1"></a>dropdown_buttons <span class="op">=</span> [</span>
<span id="cb14-67"><a href="#cb14-67" aria-hidden="true" tabindex="-1"></a>    <span class="bu">dict</span>(</span>
<span id="cb14-68"><a href="#cb14-68" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span><span class="st">'None'</span>,</span>
<span id="cb14-69"><a href="#cb14-69" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">'update'</span>,</span>
<span id="cb14-70"><a href="#cb14-70" aria-hidden="true" tabindex="-1"></a>        args<span class="op">=</span>[{<span class="st">"visible"</span>: [<span class="va">True</span>, <span class="va">True</span>] <span class="op">+</span> [<span class="va">False</span>] <span class="op">*</span> <span class="bu">len</span>(countries)},</span>
<span id="cb14-71"><a href="#cb14-71" aria-hidden="true" tabindex="-1"></a>              {<span class="st">"title"</span>: <span class="ss">f"Global Mean of </span><span class="sc">{</span>indicator_name<span class="sc">}</span><span class="ss"> with 95% CI"</span>}]</span>
<span id="cb14-72"><a href="#cb14-72" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-73"><a href="#cb14-73" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb14-74"><a href="#cb14-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-75"><a href="#cb14-75" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, code <span class="kw">in</span> <span class="bu">enumerate</span>(countries):</span>
<span id="cb14-76"><a href="#cb14-76" aria-hidden="true" tabindex="-1"></a>    vis <span class="op">=</span> [<span class="va">True</span>, <span class="va">True</span>] <span class="op">+</span> [j <span class="op">==</span> i <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(countries))]</span>
<span id="cb14-77"><a href="#cb14-77" aria-hidden="true" tabindex="-1"></a>    dropdown_buttons.append(</span>
<span id="cb14-78"><a href="#cb14-78" aria-hidden="true" tabindex="-1"></a>        <span class="bu">dict</span>(</span>
<span id="cb14-79"><a href="#cb14-79" aria-hidden="true" tabindex="-1"></a>            label<span class="op">=</span>code,</span>
<span id="cb14-80"><a href="#cb14-80" aria-hidden="true" tabindex="-1"></a>            method<span class="op">=</span><span class="st">'update'</span>,</span>
<span id="cb14-81"><a href="#cb14-81" aria-hidden="true" tabindex="-1"></a>            args<span class="op">=</span>[</span>
<span id="cb14-82"><a href="#cb14-82" aria-hidden="true" tabindex="-1"></a>                {<span class="st">"visible"</span>: vis},</span>
<span id="cb14-83"><a href="#cb14-83" aria-hidden="true" tabindex="-1"></a>                {<span class="st">"title"</span>: <span class="ss">f"Global vs </span><span class="sc">{</span>code<span class="sc">}</span><span class="ss"> â </span><span class="sc">{</span>indicator_name<span class="sc">}</span><span class="ss">"</span>}</span>
<span id="cb14-84"><a href="#cb14-84" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb14-85"><a href="#cb14-85" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb14-86"><a href="#cb14-86" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb14-87"><a href="#cb14-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-88"><a href="#cb14-88" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Update layout with dropdown on the left ---</span></span>
<span id="cb14-89"><a href="#cb14-89" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb14-90"><a href="#cb14-90" aria-hidden="true" tabindex="-1"></a>    updatemenus<span class="op">=</span>[</span>
<span id="cb14-91"><a href="#cb14-91" aria-hidden="true" tabindex="-1"></a>        <span class="bu">dict</span>(</span>
<span id="cb14-92"><a href="#cb14-92" aria-hidden="true" tabindex="-1"></a>            <span class="bu">type</span><span class="op">=</span><span class="st">'dropdown'</span>,</span>
<span id="cb14-93"><a href="#cb14-93" aria-hidden="true" tabindex="-1"></a>            direction<span class="op">=</span><span class="st">'down'</span>,</span>
<span id="cb14-94"><a href="#cb14-94" aria-hidden="true" tabindex="-1"></a>            showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb14-95"><a href="#cb14-95" aria-hidden="true" tabindex="-1"></a>            buttons<span class="op">=</span>dropdown_buttons,</span>
<span id="cb14-96"><a href="#cb14-96" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="fl">1.05</span>,</span>
<span id="cb14-97"><a href="#cb14-97" aria-hidden="true" tabindex="-1"></a>            xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb14-98"><a href="#cb14-98" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="fl">0.6</span>,</span>
<span id="cb14-99"><a href="#cb14-99" aria-hidden="true" tabindex="-1"></a>            yanchor<span class="op">=</span><span class="st">"top"</span>,</span>
<span id="cb14-100"><a href="#cb14-100" aria-hidden="true" tabindex="-1"></a>            bgcolor<span class="op">=</span><span class="st">'rgba(30,30,30,0.7)'</span>,</span>
<span id="cb14-101"><a href="#cb14-101" aria-hidden="true" tabindex="-1"></a>            bordercolor<span class="op">=</span><span class="st">'gray'</span>,</span>
<span id="cb14-102"><a href="#cb14-102" aria-hidden="true" tabindex="-1"></a>            font<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'lightgray'</span>)</span>
<span id="cb14-103"><a href="#cb14-103" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb14-104"><a href="#cb14-104" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb14-105"><a href="#cb14-105" aria-hidden="true" tabindex="-1"></a>    annotations<span class="op">=</span>[</span>
<span id="cb14-106"><a href="#cb14-106" aria-hidden="true" tabindex="-1"></a>    <span class="bu">dict</span>(</span>
<span id="cb14-107"><a href="#cb14-107" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span><span class="st">"Plot a&lt;br&gt;single country:"</span>,</span>
<span id="cb14-108"><a href="#cb14-108" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">1.05</span>,         </span>
<span id="cb14-109"><a href="#cb14-109" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">0.65</span>,         </span>
<span id="cb14-110"><a href="#cb14-110" aria-hidden="true" tabindex="-1"></a>        xref<span class="op">=</span><span class="st">"paper"</span>,</span>
<span id="cb14-111"><a href="#cb14-111" aria-hidden="true" tabindex="-1"></a>        yref<span class="op">=</span><span class="st">"paper"</span>,</span>
<span id="cb14-112"><a href="#cb14-112" aria-hidden="true" tabindex="-1"></a>        showarrow<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb14-113"><a href="#cb14-113" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(size<span class="op">=</span><span class="dv">13</span>, color<span class="op">=</span><span class="st">"lightgray"</span>),</span>
<span id="cb14-114"><a href="#cb14-114" aria-hidden="true" tabindex="-1"></a>        align<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb14-115"><a href="#cb14-115" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">'left'</span>)</span>
<span id="cb14-116"><a href="#cb14-116" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb14-117"><a href="#cb14-117" aria-hidden="true" tabindex="-1"></a>    template<span class="op">=</span><span class="st">'plotly_dark'</span>,</span>
<span id="cb14-118"><a href="#cb14-118" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="ss">f"Global Mean of </span><span class="sc">{</span>indicator_name<span class="sc">}</span><span class="ss"> with 95% CI"</span>,</span>
<span id="cb14-119"><a href="#cb14-119" aria-hidden="true" tabindex="-1"></a>    xaxis_title<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb14-120"><a href="#cb14-120" aria-hidden="true" tabindex="-1"></a>    yaxis_title<span class="op">=</span>indicator_name,</span>
<span id="cb14-121"><a href="#cb14-121" aria-hidden="true" tabindex="-1"></a>    font<span class="op">=</span><span class="bu">dict</span>(family<span class="op">=</span><span class="st">'Georgia'</span>, size<span class="op">=</span><span class="dv">13</span>),</span>
<span id="cb14-122"><a href="#cb14-122" aria-hidden="true" tabindex="-1"></a>    height<span class="op">=</span><span class="dv">500</span>,</span>
<span id="cb14-123"><a href="#cb14-123" aria-hidden="true" tabindex="-1"></a>    width<span class="op">=</span><span class="dv">700</span>,</span>
<span id="cb14-124"><a href="#cb14-124" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(l<span class="op">=</span><span class="dv">40</span>, r<span class="op">=</span><span class="dv">20</span>, t<span class="op">=</span><span class="dv">70</span>, b<span class="op">=</span><span class="dv">40</span>),</span>
<span id="cb14-125"><a href="#cb14-125" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(bgcolor<span class="op">=</span><span class="st">'rgba(0,0,0,0)'</span>, borderwidth<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb14-126"><a href="#cb14-126" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb14-127"><a href="#cb14-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-128"><a href="#cb14-128" aria-hidden="true" tabindex="-1"></a>fig.write_html(<span class="st">"interactive_plot.html"</span>, include_plotlyjs<span class="op">=</span><span class="st">'cdn'</span>)</span>
<span id="cb14-129"><a href="#cb14-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-130"><a href="#cb14-130" aria-hidden="true" tabindex="-1"></a>IFrame(src<span class="op">=</span><span class="st">"interactive_plot.html"</span>, width<span class="op">=</span><span class="dv">900</span>, height<span class="op">=</span><span class="dv">500</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">

        <iframe width="900" height="500" src="interactive_plot.html" frameborder="0" allowfullscreen=""></iframe>
        
</div>
</div>
<div id="f0c421e6" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.cm <span class="im">as</span> cm</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.colors <span class="im">as</span> mcolors</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ---Fit linear regression for each country ---</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>df_valid <span class="op">=</span> df_long.dropna(subset<span class="op">=</span>[<span class="st">'Value'</span>]).sort_values([<span class="st">'ISO3'</span>, <span class="st">'Year'</span>])</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>slope_by_country <span class="op">=</span> {}</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> country, group <span class="kw">in</span> df_valid.groupby(<span class="st">'ISO3'</span>):</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> group[<span class="st">'Year'</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> group[<span class="st">'Value'</span>].values</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(y) <span class="op">&gt;</span> <span class="dv">30</span>:</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> LinearRegression().fit(X, y)</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>        slope_by_country[country] <span class="op">=</span> model.coef_[<span class="dv">0</span>] <span class="op">*</span> <span class="dv">10</span>  <span class="co"># Â°C per decade</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>slope_by_country <span class="op">=</span> pd.Series(slope_by_country)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co"># ---Select top and bottom 5 warming countries ---</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>top_5_increase <span class="op">=</span> slope_by_country.sort_values(ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">5</span>)</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>small_pos_slopes <span class="op">=</span> slope_by_country[slope_by_country <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>bottom_5_increase <span class="op">=</span> small_pos_slopes.sort_values().head(<span class="dv">5</span>)</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>selected_countries <span class="op">=</span> top_5_increase.index.tolist() <span class="op">+</span> bottom_5_increase.index.tolist()</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="co"># ---Assign gradient colors based on slope values ---</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>cmap <span class="op">=</span> cm.RdYlGn_r</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>vmin <span class="op">=</span> slope_by_country.<span class="bu">min</span>()</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>vmax <span class="op">=</span> slope_by_country.<span class="bu">max</span>()</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="co"># Use diverging colormap if needed</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> vmin <span class="op">&lt;</span> <span class="dv">0</span> <span class="kw">and</span> vmax <span class="op">&gt;</span> <span class="dv">0</span>:</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>    norm <span class="op">=</span> mcolors.TwoSlopeNorm(vmin<span class="op">=</span>vmin, vcenter<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span>vmax)</span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>    norm <span class="op">=</span> mcolors.Normalize(vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax)</span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>country_colors <span class="op">=</span> {</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    country: cmap(norm(slope_by_country[country]))</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> country <span class="kw">in</span> selected_countries</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a><span class="co"># ---Plot lines ---</span></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">'dark_background'</span>)</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">16</span>, <span class="dv">6</span>))</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> country <span class="kw">in</span> selected_countries:</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>    df_country <span class="op">=</span> df_long[df_long[<span class="st">'ISO3'</span>] <span class="op">==</span> country]</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    sns.lineplot(data<span class="op">=</span>df_country, x<span class="op">=</span><span class="st">'Year'</span>, y<span class="op">=</span><span class="st">'Value'</span>, label<span class="op">=</span>country,</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>                 color<span class="op">=</span>country_colors[country], ax<span class="op">=</span>ax)</span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a><span class="co"># ---Add colorbar ---</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>sm <span class="op">=</span> cm.ScalarMappable(norm<span class="op">=</span>norm, cmap<span class="op">=</span>cmap)</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>sm.set_array([])  <span class="co"># dummy array just to satisfy colorbar</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>cbar <span class="op">=</span> fig.colorbar(sm, ax<span class="op">=</span>ax, orientation<span class="op">=</span><span class="st">'vertical'</span>, pad<span class="op">=</span><span class="fl">0.03</span>)</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>cbar.set_label(<span class="st">'Linear temperature trend (Â°C per decade)'</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>cbar.ax.yaxis.label.set_color(<span class="st">'white'</span>)</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>cbar.ax.tick_params(colors<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a><span class="co"># ---Final plot formatting ---</span></span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="ss">f'</span><span class="sc">{</span>indicator_name<span class="sc">}</span><span class="ss"> (Â°C) per Country Colored by Change Magnitude (Â°C per decade)'</span>)</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(<span class="st">'Year'</span>)</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(<span class="ss">f'</span><span class="sc">{</span>indicator_name<span class="sc">}</span><span class="ss"> (Â°C)'</span>)</span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>ax.grid(<span class="va">False</span>)</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>ax.legend(frameon<span class="op">=</span><span class="va">False</span>, loc<span class="op">=</span><span class="st">'center right'</span>, bbox_to_anchor<span class="op">=</span>(<span class="fl">0.11</span>, <span class="fl">0.77</span>))</span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update({</span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>    <span class="st">'font.family'</span>: <span class="st">'Georgia'</span>,</span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>    <span class="st">'axes.labelcolor'</span>: <span class="st">'lightgray'</span>,</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>    <span class="st">'xtick.color'</span>: <span class="st">'lightgray'</span>,</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>    <span class="st">'ytick.color'</span>: <span class="st">'lightgray'</span>,</span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>    <span class="st">'figure.facecolor'</span>: <span class="st">'#111'</span>,</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>    <span class="st">'axes.facecolor'</span>: <span class="st">'#222'</span>,</span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a>    <span class="st">'savefig.facecolor'</span>: <span class="st">'#111'</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"Surface_Temperature.png"</span>, bbox_inches<span class="op">=</span><span class="st">"tight"</span>)</span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a>display(Image(<span class="st">"Surface_Temperature.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="climate-change-a-global-data-analysis_files/figure-html/cell-11-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="8c3df4cb" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 1. Top 5 largest warming trends (highest positive slopes) ---</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>top_5_increase <span class="op">=</span> slope_by_country.sort_values(ascending<span class="op">=</span><span class="va">False</span>).head(<span class="dv">5</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 2. Top 5 smallest warming trends (still positive but smallest) ---</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>small_pos_deltas <span class="op">=</span> slope_by_country[slope_by_country <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>bottom_5_increase <span class="op">=</span> small_pos_deltas.sort_values().head(<span class="dv">5</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 3. Combine into a single list of selected countries ---</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>selected_countries <span class="op">=</span> top_5_increase.index.tolist() <span class="op">+</span> bottom_5_increase.index.tolist()</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 4. Countries with stable or cooling trend (Î &lt;= 0 Â°C/decade) ---</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>improved_countries <span class="op">=</span> slope_by_country[slope_by_country <span class="op">&lt;=</span> <span class="dv">0</span>]</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 5. Summary Message ---</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> improved_countries.empty:</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"No countries show a stable or cooling trend (â¤ 0 Â°C/decade)."</span>)</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span><span class="bu">len</span>(improved_countries)<span class="sc">}</span><span class="ss"> countries show a stable or cooling trend (â¤ 0 Â°C/decade):"</span>)</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(improved_countries.sort_values())</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="co"># --- 6. Display Top 5 largest &amp; smallest warming trends ---</span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ðºTop 5 Countries with the Largest Warming Trends (Â°C/decade):"</span>)</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(top_5_increase)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">ð» Top 5 Countries with the Smallest Positive Warming Trends (Â°C/decade):"</span>)</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(bottom_5_increase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>No countries show a stable or cooling trend (â¤ 0 Â°C/decade).
ðºTop 5 Countries with the Largest Warming Trends (Â°C/decade):
UKR    0.763991
MDA    0.750384
AZE    0.674375
GEO    0.661912
ARM    0.650528
dtype: float64

ð» Top 5 Countries with the Smallest Positive Warming Trends (Â°C/decade):
CHL    0.085244
YEM    0.116262
PYF    0.129335
TLS    0.131330
ARG    0.133774
dtype: float64</code></pre>
</div>
</div>
</section>
<section id="linear-temperature-trends-by-country-cdecade" class="level2">
<h2 class="anchored" data-anchor-id="linear-temperature-trends-by-country-cdecade">Linear Temperature Trends by Country (Â°C/decade)</h2>
<p>To quantify how climate indicators (e.g., surface temperature) have changed over time, we applied <strong>simple linear regression</strong> to each countryâs time series data. The slope of the fitted line gives the <strong>average rate of temperature change per year</strong>, which we scaled to <strong>Â°C per decade</strong> for easier interpretation.</p>
<section id="why-linear-regression" class="level3">
<h3 class="anchored" data-anchor-id="why-linear-regression">Why Linear Regression?</h3>
<p>Linear regression is a straightforward method to model long-term trends, offering a <strong>first-order estimate</strong> of how an indicator changes over time. It captures:</p>
<ul>
<li><strong>The direction</strong> of change (warming or cooling)</li>
<li><strong>The rate</strong> of change (slope in Â°C/year â Â°C/decade)</li>
<li>While it doesnât capture non-linear effects or fluctuations, itâs widely used as a baseline trend indicator.</li>
</ul>
<hr>
</section>
<section id="top-5-countries-with-the-largest-warming-trends-cdecade" class="level3">
<h3 class="anchored" data-anchor-id="top-5-countries-with-the-largest-warming-trends-cdecade">ðº Top 5 Countries with the <strong>Largest Warming Trends</strong> (Â°C/decade)</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Country</th>
<th style="text-align: right;">Trend (Â°C/decade)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Zimbabwe (ZWE)</td>
<td style="text-align: right;"><strong>0.148</strong></td>
</tr>
<tr class="even">
<td>Ukraine (UKR)</td>
<td style="text-align: right;">0.076</td>
</tr>
<tr class="odd">
<td>Moldova (MDA)</td>
<td style="text-align: right;">0.075</td>
</tr>
<tr class="even">
<td>Azerbaijan (AZE)</td>
<td style="text-align: right;">0.067</td>
</tr>
<tr class="odd">
<td>Georgia (GEO)</td>
<td style="text-align: right;">0.066</td>
</tr>
</tbody>
</table>
<p>These countries are experiencing the <strong>fastest warming</strong>, with Zimbabwe showing a particularly steep trend of nearly <strong>0.15Â°C per decade</strong>, well above the global average.</p>
<hr>
</section>
<section id="top-5-countries-with-the-smallest-positive-warming-trends-cdecade" class="level3">
<h3 class="anchored" data-anchor-id="top-5-countries-with-the-smallest-positive-warming-trends-cdecade">ð» Top 5 Countries with the <strong>Smallest Positive Warming Trends</strong> (Â°C/decade)</h3>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Country</th>
<th style="text-align: right;">Trend (Â°C/decade)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Chile (CHL)</td>
<td style="text-align: right;">0.009</td>
</tr>
<tr class="even">
<td>Yemen (YEM)</td>
<td style="text-align: right;">0.012</td>
</tr>
<tr class="odd">
<td>French Polynesia (PYF)</td>
<td style="text-align: right;">0.013</td>
</tr>
<tr class="even">
<td>Timor-Leste (TLS)</td>
<td style="text-align: right;">0.013</td>
</tr>
<tr class="odd">
<td>Argentina (ARG)</td>
<td style="text-align: right;">0.013</td>
</tr>
</tbody>
</table>
<p>These countries still show warming, but at a <strong>much slower pace</strong>, close to <strong>0.01Â°C per decade</strong>, which may reflect regional climatic factors, buffering effects, or measurement variability.</p>
<hr>
</section>
<section id="no-cooling-countries-identified" class="level3">
<h3 class="anchored" data-anchor-id="no-cooling-countries-identified">No Cooling Countries Identified</h3>
<blockquote class="blockquote">
<p>** No countries show a stable or cooling trend (â¤ 0 Â°C/decade).**</p>
</blockquote>
<p>This suggests that, according to the linear trend from 1961â2022, <strong>every country with sufficient data</strong> is experiencing some level of warming. This aligns with the broader global warming consensus observed in both satellite and ground station data.</p>
<hr>
</section>
<section id="final-thoughts" class="level3">
<h3 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h3>
<p>Linear trend analysis offers a <strong>clear and interpretable metric</strong> for comparing warming rates across countries. However, it should be complemented with more nuanced methods (e.g., rolling averages, non-linear fits) to fully capture <strong>short-term dynamics, regional patterns, and variability</strong> in climate behavior.</p>
<div id="6b8a81a5" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># #Load the geopanda dataset to plot world maps </span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># world_df = gpd.read_file(gpd.datasets.get_path('naturalearth_lowres'))</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># # Fix missing/ambiguous ISO codes if needed</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co"># world_df = world_df.rename(columns={'iso_a3': 'cca3'})</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># #Remove non-used columns</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co"># world_df.drop(columns=['pop_est', 'gdp_md_est'], inplace=True)</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># #Save the file to use in other platform where it is not available</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co"># world_df.to_file("world_cleaned.geojson", driver="GeoJSON")</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">#Load the geopanda dataset saved from Kaggle notebook</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>world_df <span class="op">=</span> gpd.read_file(<span class="st">"data/world_cleaned.geojson"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="81d71b34" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Plot this new climate change trend (slope)########################################</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co">##########################################over a wolrd map#######################################################</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert slope_by_country to DataFrame</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>delta_df <span class="op">=</span> slope_by_country.rename(<span class="st">'delta_indicator'</span>).reset_index()</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>delta_df.rename(columns<span class="op">=</span>{<span class="st">'index'</span>: <span class="st">'cca3'</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with GeoDataFrame</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>world_with_climate <span class="op">=</span> world_df.merge(delta_df, how<span class="op">=</span><span class="st">'left'</span>, on<span class="op">=</span><span class="st">'cca3'</span>)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Define color scale</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>vmax <span class="op">=</span> world_with_climate[<span class="st">'delta_indicator'</span>].<span class="bu">abs</span>().quantile(<span class="fl">0.99</span>)</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>vmin <span class="op">=</span> <span class="op">-</span>vmax</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>norm <span class="op">=</span> TwoSlopeNorm(vmin<span class="op">=</span>vmin, vcenter<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span>vmax)</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Create custom colormap</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>custom_cmap <span class="op">=</span> LinearSegmentedColormap.from_list(</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="st">"blue_black_red"</span>,</span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"blue"</span>, <span class="st">"black"</span>, <span class="st">"red"</span>],</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>    N<span class="op">=</span><span class="dv">256</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate countries with/without data</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>has_data <span class="op">=</span> world_with_climate[world_with_climate[<span class="st">'delta_indicator'</span>].notna()]</span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>missing_data <span class="op">=</span> world_with_climate[world_with_climate[<span class="st">'delta_indicator'</span>].isna()]</span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'font.family'</span>] <span class="op">=</span> <span class="st">'Georgia'</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>), facecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="co"># Countries with data</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>has_data.plot(</span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    column<span class="op">=</span><span class="st">'delta_indicator'</span>,</span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a>    cmap<span class="op">=</span>custom_cmap,</span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    norm<span class="op">=</span>norm,</span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax,</span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a>    legend_kwds<span class="op">=</span>{</span>
<span id="cb19-46"><a href="#cb19-46" aria-hidden="true" tabindex="-1"></a>        <span class="st">'label'</span>: <span class="st">'Temperature Trend (Â°C per decade)'</span>,</span>
<span id="cb19-47"><a href="#cb19-47" aria-hidden="true" tabindex="-1"></a>        <span class="st">'orientation'</span>: <span class="st">'horizontal'</span>,</span>
<span id="cb19-48"><a href="#cb19-48" aria-hidden="true" tabindex="-1"></a>        <span class="st">'shrink'</span>: <span class="fl">0.5</span>,</span>
<span id="cb19-49"><a href="#cb19-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">'pad'</span>: <span class="fl">0.02</span></span>
<span id="cb19-50"><a href="#cb19-50" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb19-51"><a href="#cb19-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-52"><a href="#cb19-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-53"><a href="#cb19-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Countries without data</span></span>
<span id="cb19-54"><a href="#cb19-54" aria-hidden="true" tabindex="-1"></a>missing_data.plot(</span>
<span id="cb19-55"><a href="#cb19-55" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'none'</span>,</span>
<span id="cb19-56"><a href="#cb19-56" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb19-57"><a href="#cb19-57" aria-hidden="true" tabindex="-1"></a>    hatch<span class="op">=</span><span class="st">'///'</span>,</span>
<span id="cb19-58"><a href="#cb19-58" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb19-59"><a href="#cb19-59" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax</span>
<span id="cb19-60"><a href="#cb19-60" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-61"><a href="#cb19-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-62"><a href="#cb19-62" aria-hidden="true" tabindex="-1"></a><span class="co"># Styling</span></span>
<span id="cb19-63"><a href="#cb19-63" aria-hidden="true" tabindex="-1"></a>ax.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb19-64"><a href="#cb19-64" aria-hidden="true" tabindex="-1"></a>ax.set_title(</span>
<span id="cb19-65"><a href="#cb19-65" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Rate of Temperature Change by Country (Â°C per Decade)'</span>,</span>
<span id="cb19-66"><a href="#cb19-66" aria-hidden="true" tabindex="-1"></a>    fontsize<span class="op">=</span><span class="dv">16</span>,</span>
<span id="cb19-67"><a href="#cb19-67" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'white'</span></span>
<span id="cb19-68"><a href="#cb19-68" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-69"><a href="#cb19-69" aria-hidden="true" tabindex="-1"></a>ax.set_axis_off()</span>
<span id="cb19-70"><a href="#cb19-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-71"><a href="#cb19-71" aria-hidden="true" tabindex="-1"></a><span class="co"># Style colorbar</span></span>
<span id="cb19-72"><a href="#cb19-72" aria-hidden="true" tabindex="-1"></a>cbar <span class="op">=</span> ax.get_figure().axes[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb19-73"><a href="#cb19-73" aria-hidden="true" tabindex="-1"></a>cbar.set_position([<span class="fl">0.65</span>, <span class="fl">0.12</span>, <span class="fl">0.25</span>, <span class="fl">0.02</span>])</span>
<span id="cb19-74"><a href="#cb19-74" aria-hidden="true" tabindex="-1"></a>cbar.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb19-75"><a href="#cb19-75" aria-hidden="true" tabindex="-1"></a>cbar.tick_params(colors<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb19-76"><a href="#cb19-76" aria-hidden="true" tabindex="-1"></a>cbar.set_title(<span class="st">"Â°C per decade"</span>, color<span class="op">=</span><span class="st">'white'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb19-77"><a href="#cb19-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-78"><a href="#cb19-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Add manual legend for missing data (hatched areas)</span></span>
<span id="cb19-79"><a href="#cb19-79" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.patches <span class="im">as</span> mpatches</span>
<span id="cb19-80"><a href="#cb19-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-81"><a href="#cb19-81" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a patch with hatching</span></span>
<span id="cb19-82"><a href="#cb19-82" aria-hidden="true" tabindex="-1"></a>hatch_patch <span class="op">=</span> mpatches.Patch(</span>
<span id="cb19-83"><a href="#cb19-83" aria-hidden="true" tabindex="-1"></a>    facecolor<span class="op">=</span><span class="st">'none'</span>,</span>
<span id="cb19-84"><a href="#cb19-84" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb19-85"><a href="#cb19-85" aria-hidden="true" tabindex="-1"></a>    hatch<span class="op">=</span><span class="st">'///'</span>,</span>
<span id="cb19-86"><a href="#cb19-86" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">'Missing Data'</span></span>
<span id="cb19-87"><a href="#cb19-87" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-88"><a href="#cb19-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-89"><a href="#cb19-89" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to the plot (positioned near the colorbar)</span></span>
<span id="cb19-90"><a href="#cb19-90" aria-hidden="true" tabindex="-1"></a>ax.legend(</span>
<span id="cb19-91"><a href="#cb19-91" aria-hidden="true" tabindex="-1"></a>    handles<span class="op">=</span>[hatch_patch],</span>
<span id="cb19-92"><a href="#cb19-92" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span><span class="st">'lower center'</span>,</span>
<span id="cb19-93"><a href="#cb19-93" aria-hidden="true" tabindex="-1"></a>    bbox_to_anchor<span class="op">=</span>(<span class="fl">0.9</span>, <span class="op">-</span><span class="fl">0.08</span>),</span>
<span id="cb19-94"><a href="#cb19-94" aria-hidden="true" tabindex="-1"></a>    frameon<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb19-95"><a href="#cb19-95" aria-hidden="true" tabindex="-1"></a>    labelcolor<span class="op">=</span><span class="st">'white'</span></span>
<span id="cb19-96"><a href="#cb19-96" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-97"><a href="#cb19-97" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb19-98"><a href="#cb19-98" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"Rate_Temperature_Change.png"</span>, bbox_inches<span class="op">=</span><span class="st">"tight"</span>)</span>
<span id="cb19-99"><a href="#cb19-99" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb19-100"><a href="#cb19-100" aria-hidden="true" tabindex="-1"></a>display(Image(<span class="st">"Rate_Temperature_Change.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="climate-change-a-global-data-analysis_files/figure-html/cell-14-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="global-warming-trends-visualized-on-the-world-map" class="level2">
<h2 class="anchored" data-anchor-id="global-warming-trends-visualized-on-the-world-map">Global Warming Trends Visualized on the World Map</h2>
<p>To complement our quantitative analysis, we mapped the <strong>linear temperature trends</strong> by country across the globe. Each country is colored based on its <strong>warming rate (Â°C/decade)</strong>, derived from simple linear regression on its historical temperature data (1961â2022).</p>
<section id="what-does-the-map-show" class="level3">
<h3 class="anchored" data-anchor-id="what-does-the-map-show">What Does the Map Show?</h3>
<ul>
<li><strong>All countries</strong> with sufficient data show a <strong>positive trend</strong>, confirming that <strong>no region is cooling</strong> over the long term.</li>
<li><strong>Darker shades</strong> represent countries experiencing <strong>slower warming</strong>.</li>
</ul>
</section>
<section id="regional-highlights" class="level3">
<h3 class="anchored" data-anchor-id="regional-highlights">Regional Highlights</h3>
<ul>
<li><p><strong>Northern countries</strong>âincluding <strong>Russia</strong>, <strong>Eastern Europe</strong>, and <strong>Canada</strong>âstand out with <strong>higher warming trends</strong>. This reflects a well-known climate phenomenon:<br>
&gt; <strong>Polar and sub-polar amplification</strong>, where higher latitudes warm faster due to snow/ice feedbacks and changes in atmospheric circulation.</p></li>
<li><p><strong>Equatorial and some Southern Hemisphere countries</strong> show <strong>weaker warming trends</strong>, though still positive. These include parts of <strong>South America</strong>, <strong>Southeast Asia</strong>, and <strong>Oceania</strong>.</p></li>
</ul>
</section>
<section id="interpretation-notes" class="level3">
<h3 class="anchored" data-anchor-id="interpretation-notes">Interpretation Notes</h3>
<ul>
<li>This map provides an intuitive, spatial view of how climate change is <strong>unevenly distributed</strong>, despite being <strong>global phenomenon</strong>.</li>
<li>Geographic patterns help identify <strong>climate hotspots</strong>, support <strong>policy targeting</strong>, and inspire <strong>region-specific climate adaptation strategies</strong>.</li>
</ul>
<div id="5467806a" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Load a dataset to study the impact of population #################################</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co">##########################################growth on climate change###############################################</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>df_ALLC_pop <span class="op">=</span> pd.read_csv(</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data/API_SP.POP.TOTL_DS2_en_csv_v2_38144.csv"</span>,</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    skiprows<span class="op">=</span><span class="dv">4</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>display(df_ALLC_pop.head(<span class="dv">1</span>))</span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>df_ALLC_pop <span class="op">=</span> df_ALLC_pop.rename(columns<span class="op">=</span>{<span class="st">'Country Code'</span>: <span class="st">'cca3'</span>})</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_pop[<span class="st">'cca3'</span>])))</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">set</span>(df_ALLC_pop[<span class="st">'Indicator Name'</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Country Name</th>
<th data-quarto-table-cell-role="th">Country Code</th>
<th data-quarto-table-cell-role="th">Indicator Name</th>
<th data-quarto-table-cell-role="th">Indicator Code</th>
<th data-quarto-table-cell-role="th">1960</th>
<th data-quarto-table-cell-role="th">1961</th>
<th data-quarto-table-cell-role="th">1962</th>
<th data-quarto-table-cell-role="th">1963</th>
<th data-quarto-table-cell-role="th">1964</th>
<th data-quarto-table-cell-role="th">1965</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">2016</th>
<th data-quarto-table-cell-role="th">2017</th>
<th data-quarto-table-cell-role="th">2018</th>
<th data-quarto-table-cell-role="th">2019</th>
<th data-quarto-table-cell-role="th">2020</th>
<th data-quarto-table-cell-role="th">2021</th>
<th data-quarto-table-cell-role="th">2022</th>
<th data-quarto-table-cell-role="th">2023</th>
<th data-quarto-table-cell-role="th">2024</th>
<th data-quarto-table-cell-role="th">Unnamed: 69</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Aruba</td>
<td>ABW</td>
<td>Population, total</td>
<td>SP.POP.TOTL</td>
<td>54922.0</td>
<td>55578.0</td>
<td>56320.0</td>
<td>57002.0</td>
<td>57619.0</td>
<td>58190.0</td>
<td>...</td>
<td>108727.0</td>
<td>108735.0</td>
<td>108908.0</td>
<td>109203.0</td>
<td>108587.0</td>
<td>107700.0</td>
<td>107310.0</td>
<td>107359.0</td>
<td>107624.0</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>1 rows Ã 70 columns</p>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>266
{'Population, total'}</code></pre>
</div>
</div>
<div id="288db772" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 1. Ordered unique ISO3 from climate dataset</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>iso3_allc <span class="op">=</span> <span class="bu">list</span>(OrderedDict.fromkeys(df_ALLC_STC_cleaned[<span class="st">'ISO3'</span>]))</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 2. ISO3 set from population dataset</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>df_ALLC_pop_iso3 <span class="op">=</span> <span class="bu">set</span>(df_ALLC_pop[<span class="st">'cca3'</span>])</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 3. Convert iso3_allc to a set for reverse comparison</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>iso3_allc_set <span class="op">=</span> <span class="bu">set</span>(iso3_allc)</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 4. Find missing matches both ways</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>invalid_iso3 <span class="op">=</span> [code <span class="cf">for</span> code <span class="kw">in</span> iso3_allc <span class="cf">if</span> code <span class="kw">not</span> <span class="kw">in</span> df_ALLC_pop_iso3]  <span class="co"># in climate, not in pop</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>invalid_iso3_bis <span class="op">=</span> [code <span class="cf">for</span> code <span class="kw">in</span> df_ALLC_pop_iso3 <span class="cf">if</span> code <span class="kw">not</span> <span class="kw">in</span> iso3_allc_set]  <span class="co"># in pop, not in climate</span></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 5. Print</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ISO3 in climate but missing in population dataset:"</span>, invalid_iso3)</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ISO3 in population but missing in climate dataset:"</span>, invalid_iso3_bis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ISO3 in climate but missing in population dataset: ['AIA', 'COK', 'FLK', 'GLP', 'GUF', 'MTQ', 'MSR', 'NIU', 'NFK', 'SPM', 'TWN', 'TKL', 'WLF', 'ESH']
ISO3 in population but missing in climate dataset: ['TMN', 'LMC', 'TLA', 'GUM', 'XKX', 'ECA', 'IBT', 'AFW', 'IDB', 'CUW', 'SAS', 'WLD', 'HPC', 'TEA', 'PRE', 'LIC', 'FCS', 'LDC', 'MEA', 'BMU', 'SSF', 'CEB', 'MNA', 'EAR', 'SXM', 'LAC', 'ARB', 'ECS', 'FSM', 'EMU', 'IBD', 'LCN', 'MIC', 'SST', 'TSS', 'PST', 'SSA', 'EAP', 'OED', 'IDA', 'AFE', 'TEC', 'CSS', 'MNP', 'IDX', 'PSS', 'MAF', 'EAS', 'LMY', 'TSA', 'INX', 'CIV', 'CHI', 'UMC', 'EUU', 'OSS', 'TUR', 'NAC', 'LTE', 'HIC']</code></pre>
</div>
</div>
</section>
<section id="what-are-these-countries" class="level3">
<h3 class="anchored" data-anchor-id="what-are-these-countries">What Are These Countries?</h3>
<p>Most of these are <strong>small territories, overseas departments, or special regions</strong> that may not be included in standard population databases:</p>
<table class="caption-top table">
<colgroup>
<col style="width: 7%">
<col style="width: 40%">
<col style="width: 51%">
</colgroup>
<thead>
<tr class="header">
<th>ISO3</th>
<th>Entity</th>
<th>Notes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>AIA</td>
<td>Anguilla</td>
<td>British Overseas Territory</td>
</tr>
<tr class="even">
<td>COK</td>
<td>Cook Islands</td>
<td>Associated with New Zealand</td>
</tr>
<tr class="odd">
<td>FLK</td>
<td>Falkland Islands</td>
<td>British Overseas Territory</td>
</tr>
<tr class="even">
<td>GLP</td>
<td>Guadeloupe</td>
<td>French overseas department</td>
</tr>
<tr class="odd">
<td>GUF</td>
<td>French Guiana</td>
<td>French overseas department</td>
</tr>
<tr class="even">
<td>MTQ</td>
<td>Martinique</td>
<td>French overseas department</td>
</tr>
<tr class="odd">
<td>MSR</td>
<td>Montserrat</td>
<td>British Overseas Territory</td>
</tr>
<tr class="even">
<td>NIU</td>
<td>Niue</td>
<td>Associated with New Zealand</td>
</tr>
<tr class="odd">
<td>NFK</td>
<td>Norfolk Island</td>
<td>Australian external territory</td>
</tr>
<tr class="even">
<td>SPM</td>
<td>Saint Pierre and Miquelon</td>
<td>French territory near Canada</td>
</tr>
<tr class="odd">
<td>TWN</td>
<td>Taiwan</td>
<td>Sometimes excluded for political reasons</td>
</tr>
<tr class="even">
<td>TKL</td>
<td>Tokelau</td>
<td>New Zealand dependent territory</td>
</tr>
<tr class="odd">
<td>WLF</td>
<td>Wallis and Futuna</td>
<td>French overseas collectivity</td>
</tr>
<tr class="even">
<td>ESH</td>
<td>Western Sahara</td>
<td>Disputed territory</td>
</tr>
</tbody>
</table>
</section>
<section id="interpretation" class="level3">
<h3 class="anchored" data-anchor-id="interpretation">Interpretation</h3>
<ul>
<li>These <strong>arenât major independent countries</strong> in most international statistics, so their exclusion from the population dataset is expected.</li>
<li><strong>Taiwan (TWN)</strong> may be the most notable omission, likely due to <strong>political classification differences</strong> in some datasets like World Bank or UN.</li>
</ul>
</section>
<section id="conclusion" class="level3">
<h3 class="anchored" data-anchor-id="conclusion">Conclusion</h3>
<blockquote class="blockquote">
<p>There are <strong>no major independent countries missing</strong> from the population dataset.<br>
The missing entries are mostly <strong>small, dependent territories</strong> or <strong>regions excluded for administrative reasons</strong>.</p>
</blockquote>
<div id="82c6eefb" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows where cca3 is in pop but not in climate</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>df_ALLC_pop_cleaned <span class="op">=</span> df_ALLC_pop[<span class="op">~</span>df_ALLC_pop[<span class="st">'cca3'</span>].isin(invalid_iso3_bis)].copy()</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># reset index</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>df_ALLC_pop_cleaned.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes before:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_pop[<span class="st">'cca3'</span>])))</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes after:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_pop_cleaned[<span class="st">'cca3'</span>])))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of ISO3 codes before: 266
Number of ISO3 codes after: 206</code></pre>
</div>
</div>
<div id="aee9b9be" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Select only year columns (e.g., '1960', '1961', ..., '2024')</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>year_cols <span class="op">=</span> [col <span class="cf">for</span> col <span class="kw">in</span> df_ALLC_pop_cleaned.columns <span class="cf">if</span> col.isdigit()]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate missing values per year</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>missing_per_year <span class="op">=</span> df_ALLC_pop_cleaned[year_cols].isna().<span class="bu">sum</span>()</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to DataFrame for pretty printing</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>missing_per_year_df <span class="op">=</span> missing_per_year.reset_index()</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>missing_per_year_df.columns <span class="op">=</span> [<span class="st">'Year'</span>, <span class="st">'Missing Count'</span>]</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(missing_per_year_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Year  Missing Count
0   1960              1
1   1961              1
2   1962              1
3   1963              1
4   1964              1
..   ...            ...
60  2020              0
61  2021              0
62  2022              0
63  2023              0
64  2024              0

[65 rows x 2 columns]</code></pre>
</div>
</div>
<div id="d5010798" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define start and end years</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>start_year <span class="op">=</span> <span class="st">'1960'</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>end_year <span class="op">=</span> <span class="st">'2024'</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>num_years <span class="op">=</span> <span class="bu">int</span>(end_year) <span class="op">-</span> <span class="bu">int</span>(start_year)</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract population values</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>P_start <span class="op">=</span> df_ALLC_pop_cleaned[start_year].replace(<span class="dv">0</span>, np.nan).astype(<span class="bu">float</span>)</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>P_end <span class="op">=</span> df_ALLC_pop_cleaned[end_year].replace(<span class="dv">0</span>, np.nan).astype(<span class="bu">float</span>)</span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute average annual growth rate over the full period (log diff)</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>df_ALLC_pop_cleaned[<span class="st">'avg_growth_rate'</span>] <span class="op">=</span> (np.log(P_end) <span class="op">-</span> np.log(P_start)) <span class="op">/</span> num_years <span class="op">*</span><span class="dv">100</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>df_ALLC_pop_cleaned_sorted <span class="op">=</span> df_ALLC_pop_cleaned.sort_values(by<span class="op">=</span><span class="st">'avg_growth_rate'</span>, ascending<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_ALLC_pop_cleaned_sorted[[<span class="st">'cca3'</span>, <span class="st">'Country Name'</span>, <span class="st">'avg_growth_rate'</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    cca3          Country Name  avg_growth_rate
18   BGR              Bulgaria        -0.311747
98   KNA   St. Kitts and Nevis        -0.273674
111  LVA                Latvia        -0.203109
191  UKR               Ukraine        -0.192500
78   HRV               Croatia        -0.106940
..   ...                   ...              ...
159  SAU          Saudi Arabia         4.177779
100  KWT                Kuwait         4.331197
155  QAT                 Qatar         6.834404
5    ARE  United Arab Emirates         6.901032
153  PSE    West Bank and Gaza              NaN

[206 rows x 3 columns]</code></pre>
</div>
</div>
<div id="94885478" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter and print Turkey's growth rate</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_ALLC_pop_cleaned_sorted[df_ALLC_pop_cleaned_sorted[<span class="st">'Country Name'</span>].<span class="bu">str</span>.contains(<span class="st">'Uzbekistan'</span>, case<span class="op">=</span><span class="va">False</span>)][[<span class="st">'cca3'</span>, <span class="st">'Country Name'</span>, <span class="st">'avg_growth_rate'</span>]])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    cca3 Country Name  avg_growth_rate
194  UZB   Uzbekistan         2.325431</code></pre>
</div>
</div>
<div id="b7dbbe3d" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Plot the population growth on a world map#########################################</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="co"># ð Merge on 3-letter ISO code</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>world_with_climate_with_pop <span class="op">=</span> world_with_climate.merge(</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    df_ALLC_pop_cleaned[[<span class="st">'cca3'</span>, <span class="st">'avg_growth_rate'</span>]],  <span class="co"># only key and target column</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    left_on<span class="op">=</span><span class="st">'cca3'</span>,</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>    right_on<span class="op">=</span><span class="st">'cca3'</span>,</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>    how<span class="op">=</span><span class="st">'left'</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="471fab27" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split into countries with and without data</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>has_data <span class="op">=</span> world_with_climate_with_pop[world_with_climate_with_pop[<span class="st">'avg_growth_rate'</span>].notna()]</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>missing_data <span class="op">=</span> world_with_climate_with_pop[world_with_climate_with_pop[<span class="st">'avg_growth_rate'</span>].isna()]</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Define color scale (centered at 0)</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>vmax <span class="op">=</span> has_data[<span class="st">'avg_growth_rate'</span>].<span class="bu">abs</span>().quantile(<span class="fl">0.95</span>)</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>vmin <span class="op">=</span> <span class="op">-</span>vmax</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>norm <span class="op">=</span> TwoSlopeNorm(vmin<span class="op">=</span>vmin, vcenter<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span>vmax)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Custom colormap</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>custom_cmap <span class="op">=</span> LinearSegmentedColormap.from_list(</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"blue_black_red"</span>,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    [<span class="st">"blue"</span>, <span class="st">"black"</span>, <span class="st">"red"</span>],</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    N<span class="op">=</span><span class="dv">256</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot setup</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">'font.family'</span>] <span class="op">=</span> <span class="st">'Georgia'</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">14</span>, <span class="dv">8</span>), facecolor<span class="op">=</span><span class="st">'black'</span>)</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot countries WITH data</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a>has_data.plot(</span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a>    column<span class="op">=</span><span class="st">'avg_growth_rate'</span>,</span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a>    cmap<span class="op">=</span>custom_cmap,</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a>    norm<span class="op">=</span>norm,</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax,</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a>    legend_kwds<span class="op">=</span>{</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">'label'</span>: <span class="st">'Annual Population Growth Rate (% per year)'</span>,</span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">'orientation'</span>: <span class="st">'horizontal'</span>,</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">'shrink'</span>: <span class="fl">0.5</span>,</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">'pad'</span>: <span class="fl">0.02</span></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-37"><a href="#cb33-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-38"><a href="#cb33-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot countries WITHOUT data (with hatching)</span></span>
<span id="cb33-39"><a href="#cb33-39" aria-hidden="true" tabindex="-1"></a>missing_data.plot(</span>
<span id="cb33-40"><a href="#cb33-40" aria-hidden="true" tabindex="-1"></a>    color<span class="op">=</span><span class="st">'none'</span>,</span>
<span id="cb33-41"><a href="#cb33-41" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb33-42"><a href="#cb33-42" aria-hidden="true" tabindex="-1"></a>    hatch<span class="op">=</span><span class="st">'///'</span>,</span>
<span id="cb33-43"><a href="#cb33-43" aria-hidden="true" tabindex="-1"></a>    linewidth<span class="op">=</span><span class="fl">0.4</span>,</span>
<span id="cb33-44"><a href="#cb33-44" aria-hidden="true" tabindex="-1"></a>    ax<span class="op">=</span>ax</span>
<span id="cb33-45"><a href="#cb33-45" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-46"><a href="#cb33-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-47"><a href="#cb33-47" aria-hidden="true" tabindex="-1"></a><span class="co"># Style map</span></span>
<span id="cb33-48"><a href="#cb33-48" aria-hidden="true" tabindex="-1"></a>ax.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb33-49"><a href="#cb33-49" aria-hidden="true" tabindex="-1"></a>ax.set_title(<span class="ss">f"Population Growth Rate by Country (</span><span class="sc">{</span>start_year<span class="sc">}</span><span class="ss">-</span><span class="sc">{</span>end_year<span class="sc">}</span><span class="ss">)"</span>, fontsize<span class="op">=</span><span class="dv">16</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb33-50"><a href="#cb33-50" aria-hidden="true" tabindex="-1"></a>ax.set_axis_off()</span>
<span id="cb33-51"><a href="#cb33-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-52"><a href="#cb33-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Style colorbar</span></span>
<span id="cb33-53"><a href="#cb33-53" aria-hidden="true" tabindex="-1"></a>cbar <span class="op">=</span> ax.get_figure().axes[<span class="op">-</span><span class="dv">1</span>]</span>
<span id="cb33-54"><a href="#cb33-54" aria-hidden="true" tabindex="-1"></a>cbar.set_position([<span class="fl">0.65</span>, <span class="fl">0.12</span>, <span class="fl">0.25</span>, <span class="fl">0.02</span>])</span>
<span id="cb33-55"><a href="#cb33-55" aria-hidden="true" tabindex="-1"></a>cbar.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb33-56"><a href="#cb33-56" aria-hidden="true" tabindex="-1"></a>cbar.tick_params(colors<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb33-57"><a href="#cb33-57" aria-hidden="true" tabindex="-1"></a>cbar.set_title(<span class="st">""</span>, color<span class="op">=</span><span class="st">'white'</span>, fontsize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb33-58"><a href="#cb33-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-59"><a href="#cb33-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-60"><a href="#cb33-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-61"><a href="#cb33-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a patch with hatching</span></span>
<span id="cb33-62"><a href="#cb33-62" aria-hidden="true" tabindex="-1"></a>hatch_patch <span class="op">=</span> mpatches.Patch(</span>
<span id="cb33-63"><a href="#cb33-63" aria-hidden="true" tabindex="-1"></a>    facecolor<span class="op">=</span><span class="st">'none'</span>,</span>
<span id="cb33-64"><a href="#cb33-64" aria-hidden="true" tabindex="-1"></a>    edgecolor<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb33-65"><a href="#cb33-65" aria-hidden="true" tabindex="-1"></a>    hatch<span class="op">=</span><span class="st">'///'</span>,</span>
<span id="cb33-66"><a href="#cb33-66" aria-hidden="true" tabindex="-1"></a>    label<span class="op">=</span><span class="st">'Missing Data'</span></span>
<span id="cb33-67"><a href="#cb33-67" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-68"><a href="#cb33-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-69"><a href="#cb33-69" aria-hidden="true" tabindex="-1"></a><span class="co"># Add to the plot</span></span>
<span id="cb33-70"><a href="#cb33-70" aria-hidden="true" tabindex="-1"></a>ax.legend(</span>
<span id="cb33-71"><a href="#cb33-71" aria-hidden="true" tabindex="-1"></a>    handles<span class="op">=</span>[hatch_patch],</span>
<span id="cb33-72"><a href="#cb33-72" aria-hidden="true" tabindex="-1"></a>    loc<span class="op">=</span><span class="st">'lower center'</span>,</span>
<span id="cb33-73"><a href="#cb33-73" aria-hidden="true" tabindex="-1"></a>    bbox_to_anchor<span class="op">=</span>(<span class="fl">0.9</span>, <span class="op">-</span><span class="fl">0.08</span>),</span>
<span id="cb33-74"><a href="#cb33-74" aria-hidden="true" tabindex="-1"></a>    frameon<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb33-75"><a href="#cb33-75" aria-hidden="true" tabindex="-1"></a>    labelcolor<span class="op">=</span><span class="st">'white'</span></span>
<span id="cb33-76"><a href="#cb33-76" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb33-77"><a href="#cb33-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-78"><a href="#cb33-78" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb33-79"><a href="#cb33-79" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"Population_Growth_Rate.png"</span>, bbox_inches<span class="op">=</span><span class="st">"tight"</span>)</span>
<span id="cb33-80"><a href="#cb33-80" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb33-81"><a href="#cb33-81" aria-hidden="true" tabindex="-1"></a>display(Image(<span class="st">"Population_Growth_Rate.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="climate-change-a-global-data-analysis_files/figure-html/cell-22-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="average-population-growth-rate-per-year" class="level2">
<h2 class="anchored" data-anchor-id="average-population-growth-rate-per-year">Average Population Growth Rate (% per year)</h2>
<p>We compute the <strong>average annual population growth rate</strong> using:</p>
<p><strong>Average Annual Growth Rate (% per year)</strong> is computed as:<br>
$ = $</p>
<p>This assumes <strong>exponential growth</strong> and enables fair comparison across countries.</p>
<section id="what-the-map-shows" class="level3">
<h3 class="anchored" data-anchor-id="what-the-map-shows">What the Map Shows</h3>
<ul>
<li><strong>Fastest-growing populations</strong> are mostly in <strong>Sub-Saharan Africa</strong> (e.g., Niger, Angola, Chad) and parts of <strong>Central Asia</strong>.</li>
<li><strong>Slow or negative growth</strong> is seen in <strong>Russia</strong>, <strong>Western Europe</strong> (e.g., Italy, Germany), and <strong>some Eastern European</strong> countries.</li>
<li><strong>Eastern Europe</strong> shows mixed patterns: some countries (e.g., Bulgaria) are shrinking, while others (e.g., Uzbekistan) grow faster.</li>
</ul>
<p>These trends reflect a complex mix of <strong>birth rates, aging, migration</strong>, and <strong>economic conditions</strong> across regions.</p>
<div id="f8f45813" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Load a dataset to study the impact of green house ################################</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="co">##########################################gases (GHG) on climate ################################################</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>df_ALLC_GHG <span class="op">=</span> pd.read_csv(</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"data/National_Greenhouse_Gas_Emissions_Inventories_and_Implied_National_Mitigation_(Nationally_Determined_Contributions)_Targets.csv"</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>display(df_ALLC_GHG.head(<span class="dv">1</span>))</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>df_ALLC_GHG <span class="op">=</span> df_ALLC_GHG.rename(columns<span class="op">=</span>{<span class="st">'ISO3'</span>: <span class="st">'cca3'</span>})</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_GHG[<span class="st">'cca3'</span>])))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ObjectId</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">ISO2</th>
<th data-quarto-table-cell-role="th">ISO3</th>
<th data-quarto-table-cell-role="th">Indicator</th>
<th data-quarto-table-cell-role="th">Unit</th>
<th data-quarto-table-cell-role="th">Source</th>
<th data-quarto-table-cell-role="th">CTS_Code</th>
<th data-quarto-table-cell-role="th">CTS_Name</th>
<th data-quarto-table-cell-role="th">CTS_Full_Descriptor</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">F2021</th>
<th data-quarto-table-cell-role="th">F2022</th>
<th data-quarto-table-cell-role="th">F2023</th>
<th data-quarto-table-cell-role="th">F2024</th>
<th data-quarto-table-cell-role="th">F2025</th>
<th data-quarto-table-cell-role="th">F2026</th>
<th data-quarto-table-cell-role="th">F2027</th>
<th data-quarto-table-cell-role="th">F2028</th>
<th data-quarto-table-cell-role="th">F2029</th>
<th data-quarto-table-cell-role="th">F2030</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1</td>
<td>Advanced Economies</td>
<td>NaN</td>
<td>AETMP</td>
<td>Annual Net Emissions/Removals</td>
<td>Million metric tons of CO2 equivalent</td>
<td>United Nations Framework Convention on Climate...</td>
<td>ECNGDR</td>
<td>Annual Net Emissions/Removals</td>
<td>Environment, Climate Change, Greenhouse Gas Em...</td>
<td>...</td>
<td>10011.9466</td>
<td>9866.40021</td>
<td>9506.226668</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>1 rows Ã 74 columns</p>
</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>236</code></pre>
</div>
</div>
<div id="21ab7e44" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Use Ordered unique ISO3 from climate dataset</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>iso3_allc <span class="op">=</span> <span class="bu">list</span>(OrderedDict.fromkeys(world_with_climate_with_pop[<span class="st">'cca3'</span>]))</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ISO3 set from population dataset</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>df_ALLC_GHG_iso3 <span class="op">=</span> <span class="bu">set</span>(df_ALLC_GHG[<span class="st">'cca3'</span>])</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert iso3_allc to a set for reverse comparison</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>iso3_allc_set <span class="op">=</span> <span class="bu">set</span>(iso3_allc)</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Find missing matches both ways</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>invalid_iso3 <span class="op">=</span> [code <span class="cf">for</span> code <span class="kw">in</span> iso3_allc <span class="cf">if</span> code <span class="kw">not</span> <span class="kw">in</span> df_ALLC_GHG_iso3]  <span class="co"># in climate, not in pop</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>invalid_iso3_bis <span class="op">=</span> [code <span class="cf">for</span> code <span class="kw">in</span> df_ALLC_GHG_iso3 <span class="cf">if</span> code <span class="kw">not</span> <span class="kw">in</span> iso3_allc_set]  <span class="co"># in pop, not in climate</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Print</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ISO3 in climate but missing in GHG dataset:"</span>, invalid_iso3)</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"ISO3 in GHG but missing in climate dataset:"</span>, invalid_iso3_bis)</span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove rows where cca3 is in pop but not in climate</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>df_ALLC_GHG_cleaned <span class="op">=</span> df_ALLC_GHG[<span class="op">~</span>df_ALLC_GHG[<span class="st">'cca3'</span>].isin(invalid_iso3_bis)].copy()</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="co"># reset index</span></span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>df_ALLC_GHG_cleaned.reset_index(drop<span class="op">=</span><span class="va">True</span>, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Check result</span></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes before:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_GHG[<span class="st">'cca3'</span>])))</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of ISO3 codes after:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(df_ALLC_GHG_cleaned[<span class="st">'cca3'</span>])))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>ISO3 in climate but missing in GHG dataset: ['ATF', 'PSE', 'ATA', 'CYN', 'SOL', 'SRB', 'MNE', '-99', 'SSD']
ISO3 in GHG but missing in climate dataset: ['NA605', 'NAANZ', 'AMETMP', 'ATG', 'ABW', 'TCA', 'AIR', 'GIB', 'MLT', 'ANT', 'STP', 'WLD', 'KIR', 'MUS', 'LIE', 'OCETMP', 'VCT', 'BMU', 'NA510', 'NA225', 'NASE', 'NASA', 'BRB', 'NAEE', 'SGP', 'ASIATMP', 'SCG', 'SPM', 'NAWE', 'SEA', 'PYF', 'TON', 'NANA9', 'SYC', 'COK', 'KNA', 'SSA', 'OCRTMP', 'CYM', 'DMA', 'GUF', 'NA120', 'HKG', 'GRD', 'BHR', 'NA119', 'NANE', 'PLW', 'FRO', 'REU', 'LCA', 'CPV', 'EMDETMP', 'EURTMP', 'AETMP', 'NASEA', 'MTQ', 'SHN', 'WSM', 'AIA', 'LACTMP', 'VGB', 'COM', 'MAC', 'GLP', 'NAWA', 'MDV', 'NACA']
Number of ISO3 codes before: 236
Number of ISO3 codes after: 168</code></pre>
</div>
</div>
<div id="37a18ecc" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter to the chosen headline indicator (excl. LULUCF)</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>keep <span class="op">=</span> {</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'Total GHG emissions excluding land-use, land-use change and forestry'</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>ghg_excl <span class="op">=</span> df_ALLC_GHG_cleaned[df_ALLC_GHG_cleaned[<span class="st">'Indicator'</span>].isin(keep)].copy()</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="co"># How many unique countries in FULL vs FILTERED</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>n_countries_full <span class="op">=</span> df_ALLC_GHG_cleaned[<span class="st">'cca3'</span>].nunique()</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>n_countries_ghg_excl <span class="op">=</span> ghg_excl[<span class="st">'cca3'</span>].nunique()</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Unique countries (full):"</span>, n_countries_full)</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"Unique countries (GHG excl. LULUCF):"</span>, n_countries_ghg_excl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unique countries (full): 168
Unique countries (GHG excl. LULUCF): 168</code></pre>
</div>
</div>
<div id="bd29b205" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Number of gas type:'</span>, <span class="bu">len</span>(<span class="bu">set</span>(ghg_excl[<span class="st">'Gas_Type'</span>])))</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="bu">set</span>(ghg_excl[<span class="st">'Gas_Type'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Number of gas type: 5</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>{'Carbon dioxide',
 'Fluorinated gases',
 'Greenhouse gas',
 'Methane',
 'Nitrous oxide'}</code></pre>
</div>
</div>
<div id="f3fc9222" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Unique gas types (drop NaNs if present)</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>gas_types <span class="op">=</span> <span class="bu">sorted</span>(ghg_excl[<span class="st">'Gas_Type'</span>].dropna().unique())</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="co"># How many unique countries in the full (filtered-by-indicator) set</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>n_countries_full <span class="op">=</span> ghg_excl[<span class="st">'cca3'</span>].nunique()</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Unique countries (full GHG excl. LULUCF): </span><span class="sc">{</span>n_countries_full<span class="sc">}</span><span class="ch">\n</span><span class="ss">"</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> gas <span class="kw">in</span> gas_types:</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>    ghg_excl_gas <span class="op">=</span> ghg_excl[ghg_excl[<span class="st">'Gas_Type'</span>] <span class="op">==</span> gas].copy()</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>    n_countries_ghg_excl_gas <span class="op">=</span> ghg_excl_gas[<span class="st">'cca3'</span>].nunique()</span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f"</span><span class="sc">{</span>gas<span class="sc">:&gt;45s}</span><span class="ss">  â  countries: </span><span class="sc">{</span>n_countries_ghg_excl_gas<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>display(ghg_excl[ghg_excl[<span class="st">'Gas_Type'</span>] <span class="op">==</span> <span class="st">'Greenhouse gas'</span>].head(<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Unique countries (full GHG excl. LULUCF): 168

                               Carbon dioxide  â  countries: 168
                            Fluorinated gases  â  countries: 144
                               Greenhouse gas  â  countries: 168
                                      Methane  â  countries: 168
                                Nitrous oxide  â  countries: 168</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ObjectId</th>
<th data-quarto-table-cell-role="th">Country</th>
<th data-quarto-table-cell-role="th">ISO2</th>
<th data-quarto-table-cell-role="th">cca3</th>
<th data-quarto-table-cell-role="th">Indicator</th>
<th data-quarto-table-cell-role="th">Unit</th>
<th data-quarto-table-cell-role="th">Source</th>
<th data-quarto-table-cell-role="th">CTS_Code</th>
<th data-quarto-table-cell-role="th">CTS_Name</th>
<th data-quarto-table-cell-role="th">CTS_Full_Descriptor</th>
<th data-quarto-table-cell-role="th">...</th>
<th data-quarto-table-cell-role="th">F2021</th>
<th data-quarto-table-cell-role="th">F2022</th>
<th data-quarto-table-cell-role="th">F2023</th>
<th data-quarto-table-cell-role="th">F2024</th>
<th data-quarto-table-cell-role="th">F2025</th>
<th data-quarto-table-cell-role="th">F2026</th>
<th data-quarto-table-cell-role="th">F2027</th>
<th data-quarto-table-cell-role="th">F2028</th>
<th data-quarto-table-cell-role="th">F2029</th>
<th data-quarto-table-cell-role="th">F2030</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">93</td>
<td>225</td>
<td>Afghanistan, Islamic Rep. of</td>
<td>AF</td>
<td>AFG</td>
<td>Total GHG emissions excluding land-use, land-u...</td>
<td>Million metric tons of CO2 equivalent</td>
<td>United Nations Framework Convention on Climate...</td>
<td>ECNGDE</td>
<td>Total GHG Emissions Excluding Land-Use and Lan...</td>
<td>Environment, Climate Change, Greenhouse Gas Em...</td>
<td>...</td>
<td>27.643074</td>
<td>28.614071</td>
<td>29.460052</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
</tr>
</tbody>
</table>

<p>1 rows Ã 74 columns</p>
</div>
</div>
</div>
<div id="cecd4364" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Melt only F-year columns (F1961..F2024)</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>value_cols <span class="op">=</span> [</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>    c <span class="cf">for</span> c <span class="kw">in</span> ghg_excl.columns</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> c.startswith(<span class="st">'F'</span>) <span class="kw">and</span> c[<span class="dv">1</span>:].isdigit() <span class="kw">and</span> <span class="dv">1961</span> <span class="op">&lt;=</span> <span class="bu">int</span>(c[<span class="dv">1</span>:]) <span class="op">&lt;=</span> <span class="dv">2024</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>df_long_GHG <span class="op">=</span> ghg_excl.melt(</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>    id_vars<span class="op">=</span>[<span class="st">'cca3'</span>, <span class="st">'Gas_Type'</span>],</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>    value_vars<span class="op">=</span>value_cols,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>    var_name<span class="op">=</span><span class="st">'Year'</span>,</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>    value_name<span class="op">=</span><span class="st">'Value'</span></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert 'FYYYY' -&gt; int year, and ensure numeric values</span></span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>df_long_GHG[<span class="st">'Year'</span>] <span class="op">=</span> df_long_GHG[<span class="st">'Year'</span>].<span class="bu">str</span>[<span class="dv">1</span>:].astype(<span class="bu">int</span>)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a>df_long_GHG[<span class="st">'Value'</span>] <span class="op">=</span> pd.to_numeric(df_long_GHG[<span class="st">'Value'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>).replace([np.inf, <span class="op">-</span>np.inf], np.nan)</span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a><span class="co"># convert 'Year' column to integer</span></span>
<span id="cb45-20"><a href="#cb45-20" aria-hidden="true" tabindex="-1"></a>df_long_GHG[<span class="st">'Year'</span>] <span class="op">=</span> df_long_GHG[<span class="st">'Year'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb45-21"><a href="#cb45-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-22"><a href="#cb45-22" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(df_long_GHG.head())</span>
<span id="cb45-23"><a href="#cb45-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-24"><a href="#cb45-24" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb45-25"><a href="#cb45-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-26"><a href="#cb45-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure proper ordering and numeric types</span></span>
<span id="cb45-27"><a href="#cb45-27" aria-hidden="true" tabindex="-1"></a>df_long_GHG <span class="op">=</span> df_long_GHG.sort_values([<span class="st">'cca3'</span>, <span class="st">'Gas_Type'</span>, <span class="st">'Year'</span>]).copy()</span>
<span id="cb45-28"><a href="#cb45-28" aria-hidden="true" tabindex="-1"></a>df_long_GHG[<span class="st">'Year'</span>] <span class="op">=</span> pd.to_numeric(df_long_GHG[<span class="st">'Year'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb45-29"><a href="#cb45-29" aria-hidden="true" tabindex="-1"></a>df_long_GHG[<span class="st">'Value'</span>] <span class="op">=</span> pd.to_numeric(df_long_GHG[<span class="st">'Value'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>).replace([np.inf, <span class="op">-</span>np.inf], np.nan)</span>
<span id="cb45-30"><a href="#cb45-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-31"><a href="#cb45-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop missing values</span></span>
<span id="cb45-32"><a href="#cb45-32" aria-hidden="true" tabindex="-1"></a>df_valid_GHG <span class="op">=</span> df_long_GHG.dropna(subset<span class="op">=</span>[<span class="st">'Year'</span>, <span class="st">'Value'</span>])</span>
<span id="cb45-33"><a href="#cb45-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-34"><a href="#cb45-34" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Fit linear regression per (country, gas) pair ---</span></span>
<span id="cb45-35"><a href="#cb45-35" aria-hidden="true" tabindex="-1"></a>records <span class="op">=</span> []</span>
<span id="cb45-36"><a href="#cb45-36" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (country, gas), grp <span class="kw">in</span> df_valid_GHG.groupby([<span class="st">'cca3'</span>, <span class="st">'Gas_Type'</span>]):</span>
<span id="cb45-37"><a href="#cb45-37" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> grp[<span class="st">'Year'</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb45-38"><a href="#cb45-38" aria-hidden="true" tabindex="-1"></a>    y <span class="op">=</span> grp[<span class="st">'Value'</span>].values</span>
<span id="cb45-39"><a href="#cb45-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(y) <span class="op">&gt;=</span> <span class="dv">15</span>:  <span class="co"># require enough years; adjust if needed</span></span>
<span id="cb45-40"><a href="#cb45-40" aria-hidden="true" tabindex="-1"></a>        model <span class="op">=</span> LinearRegression().fit(X, y)</span>
<span id="cb45-41"><a href="#cb45-41" aria-hidden="true" tabindex="-1"></a>        slope_per_year <span class="op">=</span> <span class="bu">float</span>(model.coef_[<span class="dv">0</span>])</span>
<span id="cb45-42"><a href="#cb45-42" aria-hidden="true" tabindex="-1"></a>        slope_per_decade <span class="op">=</span> slope_per_year <span class="op">*</span> <span class="fl">10.0</span></span>
<span id="cb45-43"><a href="#cb45-43" aria-hidden="true" tabindex="-1"></a>        records.append({</span>
<span id="cb45-44"><a href="#cb45-44" aria-hidden="true" tabindex="-1"></a>            <span class="st">'cca3'</span>: country,</span>
<span id="cb45-45"><a href="#cb45-45" aria-hidden="true" tabindex="-1"></a>            <span class="st">'Gas_Type'</span>: gas,</span>
<span id="cb45-46"><a href="#cb45-46" aria-hidden="true" tabindex="-1"></a>            <span class="st">'n_years'</span>: <span class="bu">len</span>(y),</span>
<span id="cb45-47"><a href="#cb45-47" aria-hidden="true" tabindex="-1"></a>            <span class="st">'trend_per_year'</span>: slope_per_year,</span>
<span id="cb45-48"><a href="#cb45-48" aria-hidden="true" tabindex="-1"></a>            <span class="st">'trend_per_decade'</span>: slope_per_decade,</span>
<span id="cb45-49"><a href="#cb45-49" aria-hidden="true" tabindex="-1"></a>            <span class="st">'intercept'</span>: <span class="bu">float</span>(model.intercept_)</span>
<span id="cb45-50"><a href="#cb45-50" aria-hidden="true" tabindex="-1"></a>        })</span>
<span id="cb45-51"><a href="#cb45-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-52"><a href="#cb45-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Result as a tidy DataFrame</span></span>
<span id="cb45-53"><a href="#cb45-53" aria-hidden="true" tabindex="-1"></a>slope_by_country_gas <span class="op">=</span> pd.DataFrame(records).sort_values([<span class="st">'Gas_Type'</span>, <span class="st">'cca3'</span>]).reset_index(drop<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb45-54"><a href="#cb45-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-55"><a href="#cb45-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: pivot to wide format (rows=countries, cols=gas types, values=trend per decade)</span></span>
<span id="cb45-56"><a href="#cb45-56" aria-hidden="true" tabindex="-1"></a>slope_wide_decade <span class="op">=</span> slope_by_country_gas.pivot(index<span class="op">=</span><span class="st">'cca3'</span>, columns<span class="op">=</span><span class="st">'Gas_Type'</span>, values<span class="op">=</span><span class="st">'trend_per_decade'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cca3           Gas_Type  Year      Value
0  AFG     Carbon dioxide  1970   1.733920
1  AFG  Fluorinated gases  1970        NaN
2  AFG     Greenhouse gas  1970  15.437430
3  AFG            Methane  1970  11.190968
4  AFG      Nitrous oxide  1970   2.512542</code></pre>
</div>
</div>
<div id="de12ce05" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gas options</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>gas_options <span class="op">=</span> <span class="bu">sorted</span>(slope_by_country_gas[<span class="st">'Gas_Type'</span>].dropna().unique())</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># === Map Generator ===</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_plotly_map_with_dropdown():</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>    gases <span class="op">=</span> <span class="bu">sorted</span>(slope_by_country_gas[<span class="st">'Gas_Type'</span>].dropna().unique())</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    buttons <span class="op">=</span> []</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Custom diverging color scale: blue â black â red</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    custom_colorscale <span class="op">=</span> [</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>        [<span class="fl">0.0</span>, <span class="st">"blue"</span>],</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>        [<span class="fl">0.5</span>, <span class="st">"black"</span>],</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>        [<span class="fl">1.0</span>, <span class="st">"red"</span>]</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a><span class="co">#     # Color scale range (use 99th percentile to avoid outliers)</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a><span class="co">#     v_abs_max = slope_by_country_gas['trend_per_decade'].abs().quantile(0.99)</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a><span class="co">#     v_abs_max = float(v_abs_max if np.isfinite(v_abs_max) and v_abs_max &gt; 0 else 1.0)</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, gas <span class="kw">in</span> <span class="bu">enumerate</span>(gases):</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>        sel <span class="op">=</span> slope_by_country_gas.loc[slope_by_country_gas[<span class="st">'Gas_Type'</span>] <span class="op">==</span> gas, [<span class="st">'cca3'</span>, <span class="st">'trend_per_decade'</span>]]</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>        sel <span class="op">=</span> sel.rename(columns<span class="op">=</span>{<span class="st">'trend_per_decade'</span>: <span class="st">'delta_indicator'</span>})</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>        vmax <span class="op">=</span> sel[<span class="st">'delta_indicator'</span>].<span class="bu">abs</span>().quantile(<span class="fl">0.99</span>)</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>        vmax <span class="op">=</span> <span class="bu">float</span>(vmax <span class="cf">if</span> np.isfinite(vmax) <span class="kw">and</span> vmax <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="fl">1.0</span>)</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>        world_with_trend <span class="op">=</span> world_df.merge(sel, how<span class="op">=</span><span class="st">'left'</span>, on<span class="op">=</span><span class="st">'cca3'</span>)</span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>        has_data <span class="op">=</span> world_with_trend[world_with_trend[<span class="st">'delta_indicator'</span>].notna()]</span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>        missing_data <span class="op">=</span> world_with_trend[world_with_trend[<span class="st">'delta_indicator'</span>].isna()]</span>
<span id="cb47-34"><a href="#cb47-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-35"><a href="#cb47-35" aria-hidden="true" tabindex="-1"></a>        <span class="co"># === Trace 1: Countries with data ===</span></span>
<span id="cb47-36"><a href="#cb47-36" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(</span>
<span id="cb47-37"><a href="#cb47-37" aria-hidden="true" tabindex="-1"></a>            go.Choropleth(</span>
<span id="cb47-38"><a href="#cb47-38" aria-hidden="true" tabindex="-1"></a>                locations<span class="op">=</span>has_data[<span class="st">'cca3'</span>],</span>
<span id="cb47-39"><a href="#cb47-39" aria-hidden="true" tabindex="-1"></a>                z<span class="op">=</span>has_data[<span class="st">'delta_indicator'</span>],</span>
<span id="cb47-40"><a href="#cb47-40" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span>has_data[<span class="st">'cca3'</span>],</span>
<span id="cb47-41"><a href="#cb47-41" aria-hidden="true" tabindex="-1"></a>                colorscale<span class="op">=</span>custom_colorscale,</span>
<span id="cb47-42"><a href="#cb47-42" aria-hidden="true" tabindex="-1"></a>                zmin<span class="op">=-</span>vmax,</span>
<span id="cb47-43"><a href="#cb47-43" aria-hidden="true" tabindex="-1"></a>                zmax<span class="op">=+</span>vmax,</span>
<span id="cb47-44"><a href="#cb47-44" aria-hidden="true" tabindex="-1"></a>                colorbar<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb47-45"><a href="#cb47-45" aria-hidden="true" tabindex="-1"></a>                    title<span class="op">=</span><span class="st">"Trend (Mt COâe/decade)"</span>,</span>
<span id="cb47-46"><a href="#cb47-46" aria-hidden="true" tabindex="-1"></a>                    tickfont<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>),</span>
<span id="cb47-47"><a href="#cb47-47" aria-hidden="true" tabindex="-1"></a>                    titlefont<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>),</span>
<span id="cb47-48"><a href="#cb47-48" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">len</span><span class="op">=</span><span class="fl">0.5</span></span>
<span id="cb47-49"><a href="#cb47-49" aria-hidden="true" tabindex="-1"></a>                ),</span>
<span id="cb47-50"><a href="#cb47-50" aria-hidden="true" tabindex="-1"></a>                marker_line_color<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb47-51"><a href="#cb47-51" aria-hidden="true" tabindex="-1"></a>                marker_line_width<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb47-52"><a href="#cb47-52" aria-hidden="true" tabindex="-1"></a>                showscale<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb47-53"><a href="#cb47-53" aria-hidden="true" tabindex="-1"></a>                visible<span class="op">=</span>(i <span class="op">==</span> <span class="dv">0</span>),</span>
<span id="cb47-54"><a href="#cb47-54" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>gas</span>
<span id="cb47-55"><a href="#cb47-55" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb47-56"><a href="#cb47-56" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb47-57"><a href="#cb47-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-58"><a href="#cb47-58" aria-hidden="true" tabindex="-1"></a>        <span class="co"># === Trace 2: Missing countries â subtle dark gray fill ===</span></span>
<span id="cb47-59"><a href="#cb47-59" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(</span>
<span id="cb47-60"><a href="#cb47-60" aria-hidden="true" tabindex="-1"></a>            go.Choropleth(</span>
<span id="cb47-61"><a href="#cb47-61" aria-hidden="true" tabindex="-1"></a>                locations<span class="op">=</span>missing_data[<span class="st">'cca3'</span>],</span>
<span id="cb47-62"><a href="#cb47-62" aria-hidden="true" tabindex="-1"></a>                z<span class="op">=</span>[<span class="dv">0</span>]<span class="op">*</span><span class="bu">len</span>(missing_data),  <span class="co"># Dummy values</span></span>
<span id="cb47-63"><a href="#cb47-63" aria-hidden="true" tabindex="-1"></a>                colorscale<span class="op">=</span>[[<span class="dv">0</span>, <span class="st">'#333333'</span>], [<span class="dv">1</span>, <span class="st">'#333333'</span>]],  <span class="co"># consistent dark gray</span></span>
<span id="cb47-64"><a href="#cb47-64" aria-hidden="true" tabindex="-1"></a>                zmin<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb47-65"><a href="#cb47-65" aria-hidden="true" tabindex="-1"></a>                zmax<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb47-66"><a href="#cb47-66" aria-hidden="true" tabindex="-1"></a>                showscale<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb47-67"><a href="#cb47-67" aria-hidden="true" tabindex="-1"></a>                marker_line_color<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb47-68"><a href="#cb47-68" aria-hidden="true" tabindex="-1"></a>                marker_line_width<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb47-69"><a href="#cb47-69" aria-hidden="true" tabindex="-1"></a>                hoverinfo<span class="op">=</span><span class="st">'text'</span>,</span>
<span id="cb47-70"><a href="#cb47-70" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span>[<span class="st">"Missing data"</span>] <span class="op">*</span> <span class="bu">len</span>(missing_data),</span>
<span id="cb47-71"><a href="#cb47-71" aria-hidden="true" tabindex="-1"></a>                visible<span class="op">=</span>(i <span class="op">==</span> <span class="dv">0</span>),</span>
<span id="cb47-72"><a href="#cb47-72" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">'Missing data'</span></span>
<span id="cb47-73"><a href="#cb47-73" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb47-74"><a href="#cb47-74" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb47-75"><a href="#cb47-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-76"><a href="#cb47-76" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Control visibility for dropdown (2 traces per gas)</span></span>
<span id="cb47-77"><a href="#cb47-77" aria-hidden="true" tabindex="-1"></a>        trace_visibility <span class="op">=</span> []</span>
<span id="cb47-78"><a href="#cb47-78" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(gases)):</span>
<span id="cb47-79"><a href="#cb47-79" aria-hidden="true" tabindex="-1"></a>            trace_visibility.extend([j <span class="op">==</span> i, j <span class="op">==</span> i])  <span class="co"># 2 traces per gas: data + missing</span></span>
<span id="cb47-80"><a href="#cb47-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-81"><a href="#cb47-81" aria-hidden="true" tabindex="-1"></a>        buttons.append(<span class="bu">dict</span>(</span>
<span id="cb47-82"><a href="#cb47-82" aria-hidden="true" tabindex="-1"></a>            method<span class="op">=</span><span class="st">'update'</span>,</span>
<span id="cb47-83"><a href="#cb47-83" aria-hidden="true" tabindex="-1"></a>            label<span class="op">=</span>gas,</span>
<span id="cb47-84"><a href="#cb47-84" aria-hidden="true" tabindex="-1"></a>            args<span class="op">=</span>[</span>
<span id="cb47-85"><a href="#cb47-85" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'visible'</span>: trace_visibility},</span>
<span id="cb47-86"><a href="#cb47-86" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'title'</span>: <span class="ss">f"</span><span class="sc">{</span>gas<span class="sc">}</span><span class="ss"> â Trend of GHG by Country&lt;br&gt;(Million metric tons COâe per decade)"</span>}</span>
<span id="cb47-87"><a href="#cb47-87" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb47-88"><a href="#cb47-88" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb47-89"><a href="#cb47-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-90"><a href="#cb47-90" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Final layout ===</span></span>
<span id="cb47-91"><a href="#cb47-91" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb47-92"><a href="#cb47-92" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f"</span><span class="sc">{</span>gases[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> â Trend of GHG by Country&lt;br&gt;(Million metric tons COâe per decade)"</span>,</span>
<span id="cb47-93"><a href="#cb47-93" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>, family<span class="op">=</span><span class="st">'Georgia'</span>),</span>
<span id="cb47-94"><a href="#cb47-94" aria-hidden="true" tabindex="-1"></a>        paper_bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb47-95"><a href="#cb47-95" aria-hidden="true" tabindex="-1"></a>        plot_bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb47-96"><a href="#cb47-96" aria-hidden="true" tabindex="-1"></a>        geo<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb47-97"><a href="#cb47-97" aria-hidden="true" tabindex="-1"></a>            showframe<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb47-98"><a href="#cb47-98" aria-hidden="true" tabindex="-1"></a>            showcoastlines<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb47-99"><a href="#cb47-99" aria-hidden="true" tabindex="-1"></a>            showland<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb47-100"><a href="#cb47-100" aria-hidden="true" tabindex="-1"></a>            landcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb47-101"><a href="#cb47-101" aria-hidden="true" tabindex="-1"></a>            bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb47-102"><a href="#cb47-102" aria-hidden="true" tabindex="-1"></a>            projection_type<span class="op">=</span><span class="st">'equirectangular'</span></span>
<span id="cb47-103"><a href="#cb47-103" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb47-104"><a href="#cb47-104" aria-hidden="true" tabindex="-1"></a>        margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">60</span>, l<span class="op">=</span><span class="dv">0</span>, r<span class="op">=</span><span class="dv">0</span>, b<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb47-105"><a href="#cb47-105" aria-hidden="true" tabindex="-1"></a>        updatemenus<span class="op">=</span>[<span class="bu">dict</span>(</span>
<span id="cb47-106"><a href="#cb47-106" aria-hidden="true" tabindex="-1"></a>            buttons<span class="op">=</span>buttons,</span>
<span id="cb47-107"><a href="#cb47-107" aria-hidden="true" tabindex="-1"></a>            direction<span class="op">=</span><span class="st">"down"</span>,</span>
<span id="cb47-108"><a href="#cb47-108" aria-hidden="true" tabindex="-1"></a>            showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb47-109"><a href="#cb47-109" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="fl">1.05</span>,</span>
<span id="cb47-110"><a href="#cb47-110" aria-hidden="true" tabindex="-1"></a>            xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb47-111"><a href="#cb47-111" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="fl">0.85</span>,</span>
<span id="cb47-112"><a href="#cb47-112" aria-hidden="true" tabindex="-1"></a>            yanchor<span class="op">=</span><span class="st">"top"</span></span>
<span id="cb47-113"><a href="#cb47-113" aria-hidden="true" tabindex="-1"></a>        )]</span>
<span id="cb47-114"><a href="#cb47-114" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb47-115"><a href="#cb47-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-116"><a href="#cb47-116" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fig</span>
<span id="cb47-117"><a href="#cb47-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-118"><a href="#cb47-118" aria-hidden="true" tabindex="-1"></a><span class="co">#Display the plot</span></span>
<span id="cb47-119"><a href="#cb47-119" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> build_plotly_map_with_dropdown()</span>
<span id="cb47-120"><a href="#cb47-120" aria-hidden="true" tabindex="-1"></a>display(fig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="31011c90-d44f-47a2-81d7-dea32f8658db" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("31011c90-d44f-47a2-81d7-dea32f8658db")) {                    Plotly.newPlot(                        "31011c90-d44f-47a2-81d7-dea32f8658db",                        [{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Trend (Mt CO\u2082e\u002fdecade)"}},"colorscale":[[0.0,"blue"],[0.5,"black"],[1.0,"red"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Carbon dioxide","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":true,"z":[0.22285010755250612,3.032977201764817,0.03642565828206595,40.604134292052585,176.19244164856104,6.664776658928913,12.580989829273868,1.0918184843319991,123.39502225361537,23.136619945366874,14.507017050062892,0.014738995165999596,0.02772834487478558,3.236765715241852,4.190248981277301,0.3798281387753001,0.6224957587714883,5.018436413982084,-24.543857382885466,-0.003997419987040213,0.003467790253097008,1.7686337679207158,0.14547311993786924,0.15820887083095098,56.660700098036976,0.1507237382927387,73.73265996748617,0.5784054855829996,80.14916850729941,3.6921222299942817,8.00223556145607,10.898680051255955,1.9567874925389743,1.5294183025267771,0.8298327888877454,2.103821073093196,1.3933085302229842,3.466747730086906,0.04043984515380217,16.99003266932723,0.22499012303487698,0.4316857308957498,-32.513384551896316,7.630367464429196,-5.169899284436821,0.2218009364692205,-1.0409423692128832,0.2161159566952545,1.3669545147040207,0.7528816816763862,1.991805173626072,1.0386857007764436,0.7389046391896319,1.4931303207448063,0.425448796210787,12.924320877953114,1.8195680786960169,0.4266242455326852,3.8191176574518764,2.0247107909574993,0.6283281453859347,0.06869804814217646,0.030500516613302837,0.12662991872041163,0.9667368258528681,0.041222825647036394,0.5352972817884506,0.2932649903937487,1.3772360629392033,0.42873396586735274,1.2684762363056983,1.1362267525054315,0.17996610132189822,3.61811399263503,0.1262075123525824,12.284098981395077,4.149018680622448,0.6145937101208309,0.10767316041852486,5.629382343686295,27.77144773144654,4.720352504901467,39.271627914957115,21.878663562954067,15.74607410588908,28.25177991594053,15.471792422609106,0.026669023347817795,2.711271037711454,61.66355765233847,3.3471195983823137,4.819904068696779,57.89947025110729,-11.856170404154756,130.35436883097003,3.0953053932014485,502.95508903106537,21.58280612359367,0.3492436164410139,2.6515365480053354,41.84072788333904,1.2719099011884887,-1.1675131063323803,-2.718599819891747,9.82116524192491,137.46148685960358,6.095350474562223,-2.4205218801993507,-9.58416184221841,-6.938706562652942,-98.98094573847914,-20.21142954354869,2.4796666290642273,-8.548063063327614,-4.63710863780141,-24.292664834057554,-3.8596281937259387,-2.269752761275395,-4.769060429161806,-91.7477484429579,-9.79944539615018,8.339027707722508,79.44784545756052,-0.4488971234922812,-1.3756165443034112,-1.1226128774423478,-1.4455319207928339,-7.523639235738516,1.9139891460644183,6.786818237972173,21.885950590813795,3.829618707810176,0.8864854900350676,0.06906131568705925,4.544960429971411,52.67563468229463,4.091757974513055,2444.2741459406516,60.67572347504478,2.1213999437011615,-5.1618566663312375,-54.48965519996187,0.3218691802713931,-0.48778749582237524,-5.450067857225845,22.718842425164855,56.23497713387078,1.3782186931461784,0.5723754813340957,-0.18443319293310462,-4.522226710951021,-22.02655120194015,0.08346632282828281,52.24148534274825,1.5102899178559177,3.70657124261254,112.46129767012005,1.2264786378555361,12.80731325292891,49.83028622454355,8.486424064387268,3.1372306749597856,-0.005383793267772062,1.216084125071088,0.25482645237888313,1.8592627453340962,-0.13673919490718503,6.757678613058891],"zmax":284.02411528479155,"zmin":-284.02411528479155,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":true,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Trend (Mt CO\u2082e\u002fdecade)"}},"colorscale":[[0.0,"blue"],[0.5,"black"],[1.0,"red"]],"locations":["FJI","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","DOM","RUS","NOR","ZAF","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","VEN","SUR","FRA","ECU","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","AGO","BDI","ISR","LBN","MDG","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","KHM","THA","MMR","VNM","PRK","KOR","IND","BGD","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Fluorinated gases","showscale":true,"text":["FJI","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","DOM","RUS","NOR","ZAF","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","VEN","SUR","FRA","ECU","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","AGO","BDI","ISR","LBN","MDG","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","KHM","THA","MMR","VNM","PRK","KOR","IND","BGD","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","RWA","BIH","MKD","TTO"],"visible":false,"z":[0.059842484277654026,0.022723220492471833,25.68854753910425,0.7171241558165338,0.05674315400352361,0.0079139974653136,2.5544547361570418,2.274004603691633,1.4650045443262816,0.6914783297692896,0.3488363085848626,0.05417956257635469,0.5498615617723452,0.16814380215889993,0.5347181773628723,0.8191788792833997,-1.3020591351236896,2.510999412036592,3.594073475210595,0.04977710243351613,2.365291250839336,0.010048060125286478,0.21379288604298802,1.3233979507867346,0.25900411583040484,0.10980273803024214,0.07049511515459451,0.20782991712452253,0.09088019250749937,0.07272894805144467,1.1549800411389362,-0.17903276507230254,2.5343990035140083,0.18274365769464124,0.04258966035686821,0.13438216856448482,0.18589811681894575,0.11488085683999813,0.08720501535792145,0.3775402750038197,0.15613353016195564,0.21357396021084796,0.24856040108479752,0.16683833803972495,2.1324448085824272,0.41360652428016004,0.20835210228877,0.1866033590977701,0.6663089785958748,0.23602794407486624,0.0016839538310671571,0.0007135176836767047,0.3013011598869365,0.12532457070254027,0.0787557681131748,0.23334719805761503,0.06589983717296846,2.3686327766479065e-05,0.11279211424526844,0.1087765734523323,0.12649443687177775,0.07467255822143426,1.0043218310771866,0.7676130079999999,0.19259655377915616,0.4245369906875477,0.4890294504452067,0.6517974311406123,3.57476421798704,0.9408778540122229,2.5252259587406134,0.5676563996035828,0.29174497406685407,0.15613353016195564,5.654370007852867,0.17709408676209668,2.6765408231520245,0.6269499724235377,4.398946239119496,9.93649411341795,0.7582136638915202,1.6547316467653894,0.24594947352788385,-0.3564983910402134,0.000435744123347005,0.05841542983144339,2.918874761960739,1.409901446473644,0.019420615775109583,0.08213009679702689,0.06034037292612011,0.28323073294149037,1.219427100527921,0.31669307749533054,0.2761076689479703,0.061646877134885265,-0.2729448376222603,0.15545986676215148,0.07661420360937381,0.05041509377725683,0.7838981542694873,0.2346964071073403,0.6734731702145986,1.1142696697221266,0.048713681828030014,0.12221133203621115,0.2529367750798552,0.018685901916783647,0.8274733445660376,-1.0445193036676195,0.6603451044330876,1.5773447257598625,0.26715236760853817,0.19855864081951585,1.7896850798913666,0.14464544487089376,88.62551638008003,3.812788118250048,3.562537196296931,0.1705513228016009,0.8247484833977509,-0.15240753937259383,0.25971972141376026,0.12186570512115262,1.0167136385831905,0.58919736949838,0.05595947632552078,0.0027910863548694493,0.28762960574499696,0.14036843775871924,0.857991951585668,7.155328550402133,0.18798685612223065,1.6521433987303282,9.04620092816314,0.09776932084786749,0.5362325150236821,2.460256721550981,0.756687417245664,0.00022433689201716706,0.008876073999639888,0.06561154638040784,0.18260534379962226,0.4798886754912146],"zmax":18.915164566059033,"zmin":-18.915164566059033,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["TZA","ESH","HTI","BHS","FLK","GRL","ATF","TLS","LSO","BLZ","GUY","PRI","GNB","SWZ","PSE","GMB","VUT","LAO","MNG","BTN","NPL","NCL","SLB","ERI","ATA","CYN","DJI","SOL","UGA","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Trend (Mt CO\u2082e\u002fdecade)"}},"colorscale":[[0.0,"blue"],[0.5,"black"],[1.0,"red"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Greenhouse gas","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":false,"z":[0.31146268702572893,12.640445311610442,0.0900124190524109,46.83673587429007,209.39085542557646,3.265876969849439,22.11384385135125,1.7118535664299595,179.98843622527153,29.69119685618448,17.42662605163331,7.042063217411853,2.6332711111492273,15.604864400686104,21.907182798319038,14.917449861342478,1.615397830768058,6.870154721897847,-52.246991340956725,0.04412124001334096,0.002692410850390699,-0.8928963553116064,0.14761917054697923,0.41009218550181054,70.49937133916524,0.22165747950790926,98.63000825942443,2.3365830444444438,188.0164573174385,4.007591729475891,10.694030665965313,22.30504998803125,2.474142015186202,1.8469267291892508,2.3131131704242422,3.4837547990909092,1.5310723454118542,6.642713598684962,0.12404055061863921,25.030244299104247,0.31011582120411657,0.32846818499752234,-46.61616325988184,11.68366507779302,-5.112278039115685,0.24474518895483136,-2.17482979876882,1.334571912692967,1.5119285564867544,1.3678416410668954,4.053943109218219,6.38624217707223,2.2869921352673908,2.9140906683400036,5.349085512118924,34.49513356702877,5.562709224449019,1.6180256327634834,7.116643458362874,4.600432684424242,4.414203040940347,0.4261271555185819,0.5099191313630645,0.8546301649937106,5.587167807647798,2.2076716143746893,3.9188947111621886,1.922918843832285,3.3041933237671053,2.5896532886525625,3.0392587499008954,4.359538968927387,0.1969122372685344,12.191348445061935,0.8644637957087858,8.897791511175908,5.2442591978745945,2.25733209444635,0.2886788066918239,6.809332612551935,33.179835628991796,6.346668798110158,47.85237329276157,26.18846097944349,20.662717595479315,40.97085952077758,20.896033810718503,0.06959592868648751,6.475864138679245,73.57166890238231,5.172624280614828,12.412801625035254,75.45235827313894,-12.293260126922048,137.081361404757,9.251468918460072,611.4188452022107,28.794599631332186,0.47717123608271395,5.28574594237469,86.37021694255763,2.9624727015704213,-0.5023766239355821,-2.6004890809796066,15.08484113328378,152.21856715284923,7.11038889700019,-2.462610772112445,-11.812561889281493,-8.008529998959403,-112.30602360998662,-51.5301076828664,0.468219857369926,-11.721366116062512,-5.073716070216122,-29.230907529940914,-4.986020583472459,-3.201821969035639,-5.459624092235562,-129.8979051861254,-13.400769373146558,8.710779555807127,88.47938766469221,-0.6064841326186391,-1.6862203381475125,-1.2302272754564507,-1.423741236847341,-10.556642766453212,-4.5961769949304365,7.563782370890031,24.613655584257664,4.2660521361273105,0.9025138981425576,0.10283727275890983,4.2043933105660365,44.73785693268535,4.248628264543549,2732.1890421669523,65.34034243207167,2.1423483966075882,-6.112134283971793,-78.27776189761767,0.18857511952620537,1.741970316660949,-5.740658902388413,29.235266607162185,61.799529307657714,1.6842848805286832,0.04217372140651805,-1.7247344255155326,-6.523633711949685,-25.386322429769393,0.49780941161997333,37.20861809148083,6.480219246060606,8.298079570049552,136.98025296475703,1.4487498561520868,17.077664621429385,60.80906525836096,-1.0300535329331033,23.097896736032016,0.22142919747207923,8.004800588496282,0.4372512548385743,2.0894654192338478,-0.3014436412083095,7.793983165637886],"zmax":342.0600920518708,"zmin":-342.0600920518708,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Trend (Mt CO\u2082e\u002fdecade)"}},"colorscale":[[0.0,"blue"],[0.5,"black"],[1.0,"red"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Methane","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":false,"z":[0.043344604671621885,7.2588632473299,0.04849975317667238,5.296604929178579,-33.171358664036596,-4.905276351294073,8.659216257175528,0.5344875664825615,45.58127347802554,1.7934351231942065,0.48694316712788255,5.901390111664568,2.12400998752811,10.105431413813605,12.735119459534975,11.142245463019629,0.8795805299931391,1.2121947230425,-21.19986852197446,0.04296546334286258,-0.0003711319809414905,-0.2779931070901467,0.0009639234797026876,0.225966027196112,10.198910688225656,0.06878588932037355,18.0493303203278,1.4073661051572324,83.81270815948159,-0.590641082058319,1.7916019615894794,8.498708701757193,0.28944673747550975,0.11648149946064416,1.1717674134953306,1.0443036435265862,0.06292378892929293,2.414180772650277,0.07142793514122353,5.737924540461215,0.07546847231903943,-0.006849305690489809,-7.925895857895938,3.35346806082447,0.0033538922805412606,-0.013020566099866588,-0.6988004489231942,0.8243321475948161,0.04587604809834188,0.44153903045473597,1.3795591627028778,3.872981765471698,1.1448050612814937,1.0086123655669903,3.460222304680007,14.490158610482176,2.7265203572403274,0.8895958504333902,2.6358787734655986,1.8122469394846576,3.0414972195475505,0.27832690089384404,0.4184961116607584,0.6171675326948731,3.341491115735849,1.2805917762824468,3.230950169718696,1.3961051164787495,1.8813353062668183,1.66041445618563,1.1760635649857059,2.4405322296264527,0.0010344842976939066,7.805431504288926,0.5878238422496663,-4.654047902553077,0.5673459283011244,1.3244672306422718,0.15467282024814172,0.8188244212281303,4.007297971522775,0.9608113778467693,4.5810480739100425,3.6624468834232884,2.2367457542428055,11.441364672765388,5.011342345910805,0.03446403078025539,3.190610003227749,3.4431595194091855,1.3899816925839525,5.510879307398513,11.73205138927387,-0.4164151979683629,0.08513483676005326,5.218203556695635,59.25036376657136,3.0967151469220506,0.10594187207089764,1.9004249924642649,33.57365475483895,1.2163849091934438,0.8864444731496093,0.2192177957556698,4.328415832710882,7.812016280644175,-0.20885527151172104,-0.030094550520678477,-1.5837189500160087,-1.145932486864875,-11.475089540137219,-29.178565387699628,-1.7918972533131314,-1.723058887643225,-0.4300906385412616,-2.566070928218029,-0.9167368502081188,-0.7566296963987039,-0.6384580452525253,-28.151440669944726,-2.816640426323232,0.04606580074709366,3.5166273009872313,-0.19413758688736418,-0.00369996287440443,-0.48381801374842764,0.0028574684208118937,-2.6913497942306073,-3.612473276805793,0.2923855136992566,2.493125719165237,0.32388661152658643,-0.00796127144844673,0.03055775204878978,-0.46766484243948925,-6.454797842839717,-0.09531912213455297,137.2252626817991,0.5565949130360205,-2.1418602526548502,-0.5218500272128835,-20.80447859288355,0.0348764024692205,1.8316684347996945,-0.24399792685610816,3.6770661910653697,3.679742566144463,0.2209206510120068,-0.4458677294202401,-1.5845482452902608,-1.7131532466552315,-2.605846183720221,0.31425320517972166,-20.948068452407085,3.9110316947711072,3.0300307159264332,13.809490799005147,0.15643993545225837,3.4013714151667624,5.307940316714311,-10.461238793276156,14.844191837274632,0.19472277219554027,5.271198721492661,0.021310162362492852,0.11502199865942439,-0.19405570721059653,0.743584995979417],"zmax":67.35593741623204,"zmin":-67.35593741623204,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Trend (Mt CO\u2082e\u002fdecade)"}},"colorscale":[[0.0,"blue"],[0.5,"black"],[1.0,"red"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Nitrous oxide","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":false,"z":[0.012256301018105585,2.348604863596722,0.005087007562416618,0.9132734300019056,40.68122487993138,0.9713141835982465,0.827139221415666,0.07877167857213643,8.457685761985896,2.487137188461978,0.9676612899531158,0.7444850894251952,0.22167612576862972,2.2361695500495524,4.678487200474175,3.3026209468759298,0.11332154174499715,0.3445501678460071,-7.322444324291975,0.0051531966617114535,-0.0004042474492090719,-1.0814778806514198,0.0011821271084429196,0.025917287554793212,1.128761144307223,0.002147851856680012,3.2539444939203355,0.3140259276775299,21.68928937962645,0.8986733899996189,0.7378412768183723,1.5842632860224888,0.08503003717133599,0.1186853384448256,0.27262485269944725,0.22098221129407286,0.006602733839527345,0.7033099777461406,0.012172770389174768,1.1473070469193822,0.009657225751858187,0.013040898891938251,-8.711281849647417,0.5630652650802364,0.0542673526826758,0.0027955476538974663,-0.5364931585969124,0.1915744562569087,0.03572479947017342,0.1253149126609491,0.4743114098864112,1.3884447777400422,0.2854659039005145,0.2752314337777777,1.3713792479748426,4.948209275411092,0.6030142639302459,0.18686960566990662,0.4750436680842386,0.39591042340766136,0.6141745664989516,0.079102206434534,0.059604681594053736,0.11028066762607201,1.1127292594324376,0.8167226186357921,0.0939485336725748,0.05961828683666855,0.00926878580827139,0.5004837243647798,0.5324979941196875,0.6968304205584144,0.015911651640937677,0.6735210893169429,0.10923986433161807,0.26341860149266244,0.1044464228183724,0.17471140213874592,0.02633282607470936,0.12693308615818563,0.9120604765408804,0.17934664401029157,0.42493308307680583,0.1292357711294073,0.15467178152849242,0.7100585337701542,0.19381165249857057,0.008462874513817418,0.4878531645523157,2.8105817272727265,0.4355229895128645,1.9826746673123692,4.39001478458319,-0.49776563373775473,2.242911492764246,0.9379599689346291,39.276898260430706,3.6968152701036776,0.021985747547550977,0.7337844019466361,9.301102658078898,0.3385016425424051,0.13519040061940155,-0.10167866198932722,0.8913162233451494,4.026189258152849,0.4461317542111682,-0.031414957442729166,-0.7268111921848674,0.02900449862778728,-2.13321906199352,-3.3595398497884505,-0.536242595621879,-1.726351834640366,-0.05166845362530968,-2.0992269314499707,-0.3241567428282828,-0.23681202732609108,-0.10276248849056602,-10.78261425073375,-0.9580069987482369,-0.3477871224837049,4.400645235536496,-0.0003212519878025496,-0.4291151625984372,0.12326684058242804,0.003327159778921287,-1.169127080220316,-1.8531735589689344,-0.18728911829502567,-1.3427654447913093,-0.15460555091214023,0.0239896795536497,0.003218205005908138,-0.07146091835029537,-3.272664986453211,0.17239679842081188,62.0641170141414,0.2952359246521822,-1.3997284848522964,-0.5989789131465598,-3.8083765832208885,-0.015762923799123307,0.1383696563846007,-0.14109771068839336,1.8226443519717934,1.2956122351755286,0.039890076994854196,-0.08712511636287398,-0.24338259307451868,-0.42862219178311406,-1.6119169996794358,0.10008988368362871,-1.2401273863350486,0.9551960426251188,0.6500846503502954,1.6632635672163136,-0.009311450226033923,0.573171162833238,3.210582000338479,0.18807377735620354,5.116224888656376,0.03209021855079093,1.5175177417594812,0.15425908644787495,0.049569128826376964,-0.10654238422908328,0.0279924383209453],"zmax":39.740326044865945,"zmin":-39.740326044865945,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"font":{"color":"white","family":"Georgia"},"geo":{"projection":{"type":"equirectangular"},"showframe":false,"showcoastlines":false,"showland":true,"landcolor":"black","bgcolor":"black"},"margin":{"t":60,"l":0,"r":0,"b":0},"title":{"text":"Carbon dioxide \u2014 Trend of GHG by Country\u003cbr\u003e(Million metric tons CO\u2082e per decade)"},"paper_bgcolor":"black","plot_bgcolor":"black","updatemenus":[{"buttons":[{"args":[{"visible":[true,true,false,false,false,false,false,false,false,false]},{"title":"Carbon dioxide \u2014 Trend of GHG by Country\u003cbr\u003e(Million metric tons CO\u2082e per decade)"}],"label":"Carbon dioxide","method":"update"},{"args":[{"visible":[false,false,true,true,false,false,false,false,false,false]},{"title":"Fluorinated gases \u2014 Trend of GHG by Country\u003cbr\u003e(Million metric tons CO\u2082e per decade)"}],"label":"Fluorinated gases","method":"update"},{"args":[{"visible":[false,false,false,false,true,true,false,false,false,false]},{"title":"Greenhouse gas \u2014 Trend of GHG by Country\u003cbr\u003e(Million metric tons CO\u2082e per decade)"}],"label":"Greenhouse gas","method":"update"},{"args":[{"visible":[false,false,false,false,false,false,true,true,false,false]},{"title":"Methane \u2014 Trend of GHG by Country\u003cbr\u003e(Million metric tons CO\u2082e per decade)"}],"label":"Methane","method":"update"},{"args":[{"visible":[false,false,false,false,false,false,false,false,true,true]},{"title":"Nitrous oxide \u2014 Trend of GHG by Country\u003cbr\u003e(Million metric tons CO\u2082e per decade)"}],"label":"Nitrous oxide","method":"update"}],"direction":"down","showactive":true,"x":1.05,"xanchor":"left","y":0.85,"yanchor":"top"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('31011c90-d44f-47a2-81d7-dea32f8658db');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div id="4989e90c" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ensure proper ordering and numeric</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>df_valid_GHG <span class="op">=</span> df_valid_GHG.copy()</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>df_valid_GHG[<span class="st">'Year'</span>] <span class="op">=</span> pd.to_numeric(df_valid_GHG[<span class="st">'Year'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>df_valid_GHG[<span class="st">'Value'</span>] <span class="op">=</span> pd.to_numeric(df_valid_GHG[<span class="st">'Value'</span>], errors<span class="op">=</span><span class="st">'coerce'</span>)</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Optionally treat missing emissions as 0 within each series</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co"># (so gaps donât break continuity)</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> _fill_missing_years(g):</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    ys <span class="op">=</span> pd.Series(g[<span class="st">'Value'</span>].values, index<span class="op">=</span>g[<span class="st">'Year'</span>].values)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>    full_idx <span class="op">=</span> pd.Index(<span class="bu">range</span>(<span class="bu">int</span>(g[<span class="st">'Year'</span>].<span class="bu">min</span>()), <span class="bu">int</span>(g[<span class="st">'Year'</span>].<span class="bu">max</span>())<span class="op">+</span><span class="dv">1</span>), name<span class="op">=</span><span class="st">'Year'</span>)</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>    ys <span class="op">=</span> ys.reindex(full_idx).fillna(<span class="fl">0.0</span>)</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>    out <span class="op">=</span> ys.reset_index()</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>    out[<span class="st">'cca3'</span>] <span class="op">=</span> g[<span class="st">'cca3'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    out[<span class="st">'Gas_Type'</span>] <span class="op">=</span> g[<span class="st">'Gas_Type'</span>].iloc[<span class="dv">0</span>]</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> out.rename(columns<span class="op">=</span>{<span class="dv">0</span>: <span class="st">'Value'</span>})</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>filled <span class="op">=</span> (</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>    df_valid_GHG.sort_values([<span class="st">'cca3'</span>,<span class="st">'Gas_Type'</span>,<span class="st">'Year'</span>])</span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>    .groupby([<span class="st">'cca3'</span>,<span class="st">'Gas_Type'</span>], group_keys<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    .<span class="bu">apply</span>(_fill_missing_years)</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Cumulative sum per country Ã gas over years</span></span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>df_cumsum <span class="op">=</span> (</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>    filled.sort_values([<span class="st">'cca3'</span>,<span class="st">'Gas_Type'</span>,<span class="st">'Year'</span>])</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>    .assign(cum_value<span class="op">=</span><span class="kw">lambda</span> d: d.groupby([<span class="st">'cca3'</span>,<span class="st">'Gas_Type'</span>])[<span class="st">'Value'</span>].cumsum())</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="2e37e7cc" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gas options</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>gas_options <span class="op">=</span> <span class="bu">sorted</span>(df_cumsum[<span class="st">'Gas_Type'</span>].dropna().unique())</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co"># === Map Generator ===</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> build_plotly_cumulative_map():</span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>    fig <span class="op">=</span> go.Figure()</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>    gases <span class="op">=</span> gas_options</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>    buttons <span class="op">=</span> []</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    seq_colorscale <span class="op">=</span> <span class="st">"Viridis"</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> i, gas <span class="kw">in</span> <span class="bu">enumerate</span>(gases):</span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>        sel_gas <span class="op">=</span> df_cumsum[df_cumsum[<span class="st">'Gas_Type'</span>] <span class="op">==</span> gas]</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>        sel_latest <span class="op">=</span> (</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a>            sel_gas.sort_values([<span class="st">'cca3'</span>, <span class="st">'Year'</span>])</span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>            .groupby(<span class="st">'cca3'</span>, as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>            .tail(<span class="dv">1</span>)[[<span class="st">'cca3'</span>, <span class="st">'cum_value'</span>]]</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>            .rename(columns<span class="op">=</span>{<span class="st">'cum_value'</span>: <span class="st">'delta_indicator'</span>})</span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>        sel_gas <span class="op">=</span> df_cumsum[df_cumsum[<span class="st">'Gas_Type'</span>] <span class="op">==</span> gas]</span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>        sel_latest <span class="op">=</span> (</span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>            sel_gas.sort_values([<span class="st">'cca3'</span>, <span class="st">'Year'</span>])</span>
<span id="cb49-24"><a href="#cb49-24" aria-hidden="true" tabindex="-1"></a>            .groupby(<span class="st">'cca3'</span>, as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb49-25"><a href="#cb49-25" aria-hidden="true" tabindex="-1"></a>            .tail(<span class="dv">1</span>)[[<span class="st">'cca3'</span>, <span class="st">'cum_value'</span>]]</span>
<span id="cb49-26"><a href="#cb49-26" aria-hidden="true" tabindex="-1"></a>            .rename(columns<span class="op">=</span>{<span class="st">'cum_value'</span>: <span class="st">'delta_indicator'</span>})</span>
<span id="cb49-27"><a href="#cb49-27" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-28"><a href="#cb49-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-29"><a href="#cb49-29" aria-hidden="true" tabindex="-1"></a>        vmax <span class="op">=</span> sel_latest[<span class="st">'delta_indicator'</span>].quantile(<span class="fl">0.99</span>)</span>
<span id="cb49-30"><a href="#cb49-30" aria-hidden="true" tabindex="-1"></a>        vmax <span class="op">=</span> <span class="bu">float</span>(vmax <span class="cf">if</span> np.isfinite(vmax) <span class="kw">and</span> vmax <span class="op">&gt;</span> <span class="dv">0</span> <span class="cf">else</span> <span class="fl">1.0</span>)</span>
<span id="cb49-31"><a href="#cb49-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-32"><a href="#cb49-32" aria-hidden="true" tabindex="-1"></a>        world_with_cum <span class="op">=</span> world_df.merge(sel_latest, how<span class="op">=</span><span class="st">'left'</span>, on<span class="op">=</span><span class="st">'cca3'</span>)</span>
<span id="cb49-33"><a href="#cb49-33" aria-hidden="true" tabindex="-1"></a>        has_data <span class="op">=</span> world_with_cum[world_with_cum[<span class="st">'delta_indicator'</span>].notna()]</span>
<span id="cb49-34"><a href="#cb49-34" aria-hidden="true" tabindex="-1"></a>        missing_data <span class="op">=</span> world_with_cum[world_with_cum[<span class="st">'delta_indicator'</span>].isna()]</span>
<span id="cb49-35"><a href="#cb49-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-36"><a href="#cb49-36" aria-hidden="true" tabindex="-1"></a>        <span class="co"># === Trace 1: Countries with data ===</span></span>
<span id="cb49-37"><a href="#cb49-37" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(</span>
<span id="cb49-38"><a href="#cb49-38" aria-hidden="true" tabindex="-1"></a>            go.Choropleth(</span>
<span id="cb49-39"><a href="#cb49-39" aria-hidden="true" tabindex="-1"></a>                locations<span class="op">=</span>has_data[<span class="st">'cca3'</span>],</span>
<span id="cb49-40"><a href="#cb49-40" aria-hidden="true" tabindex="-1"></a>                z<span class="op">=</span>has_data[<span class="st">'delta_indicator'</span>],</span>
<span id="cb49-41"><a href="#cb49-41" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span>has_data[<span class="st">'cca3'</span>],</span>
<span id="cb49-42"><a href="#cb49-42" aria-hidden="true" tabindex="-1"></a>                colorscale<span class="op">=</span>seq_colorscale,</span>
<span id="cb49-43"><a href="#cb49-43" aria-hidden="true" tabindex="-1"></a>                zmin<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb49-44"><a href="#cb49-44" aria-hidden="true" tabindex="-1"></a>                zmax<span class="op">=</span>vmax,</span>
<span id="cb49-45"><a href="#cb49-45" aria-hidden="true" tabindex="-1"></a>                colorbar<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb49-46"><a href="#cb49-46" aria-hidden="true" tabindex="-1"></a>                    title<span class="op">=</span><span class="st">"Cumulative (Mt COâe)"</span>,</span>
<span id="cb49-47"><a href="#cb49-47" aria-hidden="true" tabindex="-1"></a>                    tickfont<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>),</span>
<span id="cb49-48"><a href="#cb49-48" aria-hidden="true" tabindex="-1"></a>                    titlefont<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>),</span>
<span id="cb49-49"><a href="#cb49-49" aria-hidden="true" tabindex="-1"></a>                    <span class="bu">len</span><span class="op">=</span><span class="fl">0.5</span></span>
<span id="cb49-50"><a href="#cb49-50" aria-hidden="true" tabindex="-1"></a>                ),</span>
<span id="cb49-51"><a href="#cb49-51" aria-hidden="true" tabindex="-1"></a>                marker_line_color<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb49-52"><a href="#cb49-52" aria-hidden="true" tabindex="-1"></a>                marker_line_width<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb49-53"><a href="#cb49-53" aria-hidden="true" tabindex="-1"></a>                showscale<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb49-54"><a href="#cb49-54" aria-hidden="true" tabindex="-1"></a>                visible<span class="op">=</span>(i <span class="op">==</span> <span class="dv">0</span>),</span>
<span id="cb49-55"><a href="#cb49-55" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span>gas</span>
<span id="cb49-56"><a href="#cb49-56" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb49-57"><a href="#cb49-57" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-58"><a href="#cb49-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-59"><a href="#cb49-59" aria-hidden="true" tabindex="-1"></a>        <span class="co"># === Trace 2: Missing countries ===</span></span>
<span id="cb49-60"><a href="#cb49-60" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(</span>
<span id="cb49-61"><a href="#cb49-61" aria-hidden="true" tabindex="-1"></a>            go.Choropleth(</span>
<span id="cb49-62"><a href="#cb49-62" aria-hidden="true" tabindex="-1"></a>                locations<span class="op">=</span>missing_data[<span class="st">'cca3'</span>],</span>
<span id="cb49-63"><a href="#cb49-63" aria-hidden="true" tabindex="-1"></a>                z<span class="op">=</span>[<span class="dv">0</span>]<span class="op">*</span><span class="bu">len</span>(missing_data),</span>
<span id="cb49-64"><a href="#cb49-64" aria-hidden="true" tabindex="-1"></a>                colorscale<span class="op">=</span>[[<span class="dv">0</span>, <span class="st">'#333333'</span>], [<span class="dv">1</span>, <span class="st">'#333333'</span>]],</span>
<span id="cb49-65"><a href="#cb49-65" aria-hidden="true" tabindex="-1"></a>                zmin<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb49-66"><a href="#cb49-66" aria-hidden="true" tabindex="-1"></a>                zmax<span class="op">=</span><span class="dv">1</span>,</span>
<span id="cb49-67"><a href="#cb49-67" aria-hidden="true" tabindex="-1"></a>                showscale<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb49-68"><a href="#cb49-68" aria-hidden="true" tabindex="-1"></a>                marker_line_color<span class="op">=</span><span class="st">'white'</span>,</span>
<span id="cb49-69"><a href="#cb49-69" aria-hidden="true" tabindex="-1"></a>                marker_line_width<span class="op">=</span><span class="fl">0.5</span>,</span>
<span id="cb49-70"><a href="#cb49-70" aria-hidden="true" tabindex="-1"></a>                hoverinfo<span class="op">=</span><span class="st">'text'</span>,</span>
<span id="cb49-71"><a href="#cb49-71" aria-hidden="true" tabindex="-1"></a>                text<span class="op">=</span>[<span class="st">"Missing data"</span>] <span class="op">*</span> <span class="bu">len</span>(missing_data),</span>
<span id="cb49-72"><a href="#cb49-72" aria-hidden="true" tabindex="-1"></a>                visible<span class="op">=</span>(i <span class="op">==</span> <span class="dv">0</span>),</span>
<span id="cb49-73"><a href="#cb49-73" aria-hidden="true" tabindex="-1"></a>                name<span class="op">=</span><span class="st">'Missing data'</span></span>
<span id="cb49-74"><a href="#cb49-74" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb49-75"><a href="#cb49-75" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb49-76"><a href="#cb49-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-77"><a href="#cb49-77" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Dropdown visibility toggle</span></span>
<span id="cb49-78"><a href="#cb49-78" aria-hidden="true" tabindex="-1"></a>        trace_visibility <span class="op">=</span> []</span>
<span id="cb49-79"><a href="#cb49-79" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> j <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(gases)):</span>
<span id="cb49-80"><a href="#cb49-80" aria-hidden="true" tabindex="-1"></a>            trace_visibility.extend([j <span class="op">==</span> i, j <span class="op">==</span> i])  <span class="co"># 2 traces per gas</span></span>
<span id="cb49-81"><a href="#cb49-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-82"><a href="#cb49-82" aria-hidden="true" tabindex="-1"></a>        buttons.append(<span class="bu">dict</span>(</span>
<span id="cb49-83"><a href="#cb49-83" aria-hidden="true" tabindex="-1"></a>            method<span class="op">=</span><span class="st">'update'</span>,</span>
<span id="cb49-84"><a href="#cb49-84" aria-hidden="true" tabindex="-1"></a>            label<span class="op">=</span>gas,</span>
<span id="cb49-85"><a href="#cb49-85" aria-hidden="true" tabindex="-1"></a>            args<span class="op">=</span>[</span>
<span id="cb49-86"><a href="#cb49-86" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'visible'</span>: trace_visibility},</span>
<span id="cb49-87"><a href="#cb49-87" aria-hidden="true" tabindex="-1"></a>                {<span class="st">'title'</span>: <span class="ss">f"</span><span class="sc">{</span>gas<span class="sc">}</span><span class="ss"> â Cumulative GHG Emissions by Country&lt;br&gt;(Million metric tons COâe)"</span>}</span>
<span id="cb49-88"><a href="#cb49-88" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb49-89"><a href="#cb49-89" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb49-90"><a href="#cb49-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-91"><a href="#cb49-91" aria-hidden="true" tabindex="-1"></a>    <span class="co"># === Final layout ===</span></span>
<span id="cb49-92"><a href="#cb49-92" aria-hidden="true" tabindex="-1"></a>    fig.update_layout(</span>
<span id="cb49-93"><a href="#cb49-93" aria-hidden="true" tabindex="-1"></a>        title<span class="op">=</span><span class="ss">f"</span><span class="sc">{</span>gases[<span class="dv">0</span>]<span class="sc">}</span><span class="ss"> â Cumulative GHG Emissions by Country&lt;br&gt;(Million metric tons COâe)"</span>,</span>
<span id="cb49-94"><a href="#cb49-94" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>, family<span class="op">=</span><span class="st">'Georgia'</span>),</span>
<span id="cb49-95"><a href="#cb49-95" aria-hidden="true" tabindex="-1"></a>        paper_bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb49-96"><a href="#cb49-96" aria-hidden="true" tabindex="-1"></a>        plot_bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb49-97"><a href="#cb49-97" aria-hidden="true" tabindex="-1"></a>        geo<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb49-98"><a href="#cb49-98" aria-hidden="true" tabindex="-1"></a>            showframe<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb49-99"><a href="#cb49-99" aria-hidden="true" tabindex="-1"></a>            showcoastlines<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb49-100"><a href="#cb49-100" aria-hidden="true" tabindex="-1"></a>            showland<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb49-101"><a href="#cb49-101" aria-hidden="true" tabindex="-1"></a>            landcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb49-102"><a href="#cb49-102" aria-hidden="true" tabindex="-1"></a>            bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb49-103"><a href="#cb49-103" aria-hidden="true" tabindex="-1"></a>            projection_type<span class="op">=</span><span class="st">'equirectangular'</span></span>
<span id="cb49-104"><a href="#cb49-104" aria-hidden="true" tabindex="-1"></a>        ),</span>
<span id="cb49-105"><a href="#cb49-105" aria-hidden="true" tabindex="-1"></a>        margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">60</span>, l<span class="op">=</span><span class="dv">0</span>, r<span class="op">=</span><span class="dv">0</span>, b<span class="op">=</span><span class="dv">0</span>),</span>
<span id="cb49-106"><a href="#cb49-106" aria-hidden="true" tabindex="-1"></a>        updatemenus<span class="op">=</span>[<span class="bu">dict</span>(</span>
<span id="cb49-107"><a href="#cb49-107" aria-hidden="true" tabindex="-1"></a>            buttons<span class="op">=</span>buttons,</span>
<span id="cb49-108"><a href="#cb49-108" aria-hidden="true" tabindex="-1"></a>            direction<span class="op">=</span><span class="st">"down"</span>,</span>
<span id="cb49-109"><a href="#cb49-109" aria-hidden="true" tabindex="-1"></a>            showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb49-110"><a href="#cb49-110" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span><span class="fl">1.05</span>,</span>
<span id="cb49-111"><a href="#cb49-111" aria-hidden="true" tabindex="-1"></a>            xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb49-112"><a href="#cb49-112" aria-hidden="true" tabindex="-1"></a>            y<span class="op">=</span><span class="fl">0.85</span>,</span>
<span id="cb49-113"><a href="#cb49-113" aria-hidden="true" tabindex="-1"></a>            yanchor<span class="op">=</span><span class="st">"top"</span></span>
<span id="cb49-114"><a href="#cb49-114" aria-hidden="true" tabindex="-1"></a>        )]</span>
<span id="cb49-115"><a href="#cb49-115" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb49-116"><a href="#cb49-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-117"><a href="#cb49-117" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fig</span>
<span id="cb49-118"><a href="#cb49-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-119"><a href="#cb49-119" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plot</span></span>
<span id="cb49-120"><a href="#cb49-120" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> build_plotly_cumulative_map()</span>
<span id="cb49-121"><a href="#cb49-121" aria-hidden="true" tabindex="-1"></a>display(fig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="0a4cad5e-b84c-42c2-b691-b9bdc30ea786" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("0a4cad5e-b84c-42c2-b691-b9bdc30ea786")) {                    Plotly.newPlot(                        "0a4cad5e-b84c-42c2-b691-b9bdc30ea786",                        [{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Cumulative (Mt CO\u2082e)"}},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Carbon dioxide","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":true,"z":[68.967014942,309.036927646,9.927020685,26835.0843106,282781.905713,12063.2644493,5925.38953212,183.880067111,15267.85736486,7292.16006415,2763.05946412,164.373426536,39.057762025,509.875726851,523.155036863,34.094485115,93.61830779900001,799.89473914,93612.44454,65.666817998,0.519464275,2139.10352706,11.499638411,12.109434547,18688.6452898,16.937149485,18779.8728443,314.900375261,16857.6651911,564.80154738,1724.88681232,3153.74901053,319.798759072,263.602887091,184.659267557,278.50950063,256.32901984800003,478.180049561,7.697227879,6300.58367466,96.690534044,73.578166121,22195.5188467,1270.841184486,1228.15842618,428.026829585,1532.69539487,656.9867957399999,185.086781866,117.585805166,259.038374818,84.825093473,93.896625548,137.301698086,55.272640175,4915.25073895,295.004945331,62.200844027,427.208594327,338.557329941,83.088665098,10.917556059,48.045774285,36.903844533,83.487755539,10.554494433,228.120386868,301.683041432,133.919055051,209.440232827,141.593210844,183.470317104,46.188600306,939.361226236,15.351563429,2469.85002495,749.929229511,91.455991432,14.426629794,991.005160849,5131.74174801,781.144417327,5548.07149951,2539.06105313,3205.8038564,4907.09107015,1951.786970105,6.535361341,204.041798544,8148.93706009,219.94875665,602.698047004,5127.09425542,4687.91739148,20405.93247507,694.19125337,59485.1041428,2058.098594216,30.299270699,221.716917412,5545.30416566,203.095798014,397.90278613099997,685.20254873,2340.08997097,19331.22841091,1730.562689542,514.004219939,3244.49632812,3968.18797796,23518.9449233,19577.1156353,3468.93395497,3554.53673804,891.996902234,7037.08380201,1100.4377786,627.319281282,1294.000532954,50786.1316533,3403.64650788,4033.00322539,11696.52857713,273.627878388,1178.85241112,2285.57500423,621.286662474,6406.08778722,8635.7660845,2377.8572517,13372.3438766,1883.7492075,139.310365947,11.979992585,1512.95557223,16719.3246816,554.255439621,277924.5068033,9957.07040984,21808.6359077,2892.06262964,29462.2467873,151.488776852,1907.55706845,945.99573532,3732.76671348,6757.04113735,307.860792939,773.48011616,2843.54200478,2471.11516398,7878.99875275,27.697140406,60511.6980391,200.977029467,630.583948496,16205.19977634,299.623505248,1877.854881635,7093.74260471,2258.31472762,305.613364273,44.405050976,128.404621436,34.89923844,928.116784796,491.402570487,1115.694576008],"zmax":154435.4250868913,"zmin":0,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":true,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Cumulative (Mt CO\u2082e)"}},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"locations":["FJI","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","DOM","RUS","NOR","ZAF","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","VEN","SUR","FRA","ECU","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","AGO","BDI","ISR","LBN","MDG","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","KHM","THA","MMR","VNM","PRK","KOR","IND","BGD","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Fluorinated gases","showscale":true,"text":["FJI","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","DOM","RUS","NOR","ZAF","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","VEN","SUR","FRA","ECU","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","AGO","BDI","ISR","LBN","MDG","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","KHM","THA","MMR","VNM","PRK","KOR","IND","BGD","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","RWA","BIH","MKD","TTO"],"visible":false,"z":[2.37196100934168,612.0860864,6481.92990758,37.908348728972,4.147039341,0.65464458104,226.535313038,209.937149207,96.591821036,27.407947026000002,18.67352076788463,1.900794892,21.79472,6.664672209,21.194485564,1738.78473236,191.341889981,226.368815856,303.158928857,2.5873118467842,336.876177693,0.646750776,12.255801511,97.60568210299999,10.266078923,6.0213072691648,2.79419582028236,8.237700454,5.00615432979,5.020709591,157.400921812,8.606652026,573.723590509,9.948785798728,2.658485462828,7.5350811233720005,7.368395394,4.5535027109763995,3.4565225571588,14.96446588,6.188624201,8.465375596,9.852124102,6.612927879,157.402472576,65.047332527,8.2583982,38.853470769,26.410316000999998,9.355378361,0.1067774244111906,0.043581112878172,11.942595872,4.9674574922178,4.22416728577564,12.5186861635774,2.61205475128158,0.0021855299196234,4.4707117690446,7.1134728130028,6.78528511763608,2.95977680000216,80.611534769,30.4256775,10.3334497638418,16.827262477,40.802729087,35.05356701124088,278.92129467899997,37.173476335000004,199.279349468,57.908628476000004,16.078964744538,6.188624201,438.007658556,7.512574932,100.098257371,36.200651369,450.713077316,963.469857618,30.053118183000002,142.415959521,9.748635432,110.146119558,0.0881284934982,3.2395155173366,279.55354593,55.883897551000004,8.238812584,54.236666563,3.555864878134,27.89752717,134.547147653,77.998715151,51.180655199,3.0978458935486,104.395176858,7.878819628284,4.844794354,4.35556806225,677.038871104,12.167987270388,195.66112719,121.731004832,2.7608530742578,35.163862953,49.562046668,1.442719246188,112.165320655,260.896797176,50.401177735,408.416747511,26.216535143,44.3075791,300.922919769,5.733273936,6590.1670700019995,474.232171643,440.549356989,21.792132628,639.029626152,25.376493014,33.463403595,7.5005362697068,85.798471375,46.614706375,3.932120024002,15.211104982,29.803083263999998,15.850415108,66.986903689,1887.0764589999999,7.451186274,65.485578989,714.327232212,5.840229388532,21.254508983,249.595823837,63.304883878,0.03357994997708,0.539039588477,36.019518903,9.739999518752,19.021222851],"zmax":4506.142924690568,"zmin":0,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["TZA","ESH","HTI","BHS","FLK","GRL","ATF","TLS","LSO","BLZ","GUY","PRI","GNB","SWZ","PSE","GMB","VUT","LAO","MNG","BTN","NPL","NCL","SLB","ERI","ATA","CYN","DJI","SOL","UGA","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Cumulative (Mt CO\u2082e)"}},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Greenhouse gas","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":false,"z":[132.045662574,2277.59316875,25.456062056,34334.9278614,353276.524923,16849.783231,8382.43066716,307.561549709,30773.8403394,15767.2022902,4320.38578762,1513.11640206,1428.88399948,2778.23315946,4716.38952665,1730.556077478,508.021461538,1374.669153997,119081.308321,78.923772061,8.588997434,2903.17738962,14.766975746,64.17672387,23977.3391269,124.813224577,27408.1784784,1907.46499514,45628.5102847,1920.37064796,3211.04372024,7889.07089446,585.5504768549999,600.08269116,695.153057924,699.475829953,502.044240114,1146.720167612,29.658599056,9942.7493125,273.274470871,141.667309885,29663.9132695,2502.22052723,1363.3973119,504.271463293,2658.18114781,1493.84477679,474.495954505,449.989955281,781.374993022,1084.615095589,491.097446214,401.145943718,1000.107765206,17591.1112969,1423.800025452,257.093022835,998.735711657,857.0179688549999,669.247284881,103.338286221,133.044228441,244.480984437,882.324616616,429.474629552,786.169958038,1053.097980676,353.277633269,943.1645357,435.052798851,792.752046293,153.393467228,2644.31169016,186.24471021,3282.21054103,922.486170872,1378.25472566,67.670383792,1516.36692681,8457.98888572,985.225300438,7130.64408132,3450.78537277,5117.16272132,10185.41103568,3072.3014623,27.385984461,1341.001855589,15228.5601132,725.214160191,4764.94894702,10865.7259966,6295.9959772,23495.23239554,1729.175186,105116.798894,8830.6056156,85.103781631,1912.48944296,14839.6127448,976.93609657,877.832630495,1133.0468394499999,3463.46398329,27752.1340115,2936.37357682,675.479378023,4023.33924329,5644.35736023,31462.7589176,25989.1173438,4334.23311469,4658.40559717,1110.170126524,9897.142482,1594.123535,890.468181695,1465.47079098,59834.3627106,4350.10456863,5166.34414842,15752.43775736,491.961385121,1568.93931411,2838.27468324,670.853488461,7671.97673757,11112.8734728,3200.14522361,16717.9127889,3124.56400007,157.612331893,21.989273569,3851.19460323,24616.2431113,1435.88154913,370328.794877,11357.31070806,26421.9197065,3790.22678022,37517.478885,228.338115305,2619.01692348,1298.1908015239999,7467.71980663,8469.27155458,417.591524677,999.83986231,3582.57823474,3015.68022734,9420.4335267,272.368262775,67060.309717,1383.9153115,1365.565353641,21132.71359552,357.012825499,3134.40088742,10535.01976549,4779.93957885,4715.14611498,93.438803556,1299.27938168,291.818955339,1270.720143322,644.93321105,1362.512865869],"zmax":196365.72979966295,"zmin":0,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Cumulative (Mt CO\u2082e)"}},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Methane","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":false,"z":[48.00291304,1468.43244647,13.596226867,5251.1270743000005,45023.5567163,3477.64631096,2022.06421554,101.543244859,12269.4355958,6673.2579091,1151.19878542,1081.361966658,1124.0027041,1775.09449328,3125.46207837,1295.61322535,353.361696609,452.389733056,18736.7655142,11.585538968,6.036924916,353.138792287,3.015631781,44.396459175,4132.01246754,80.121043276,6676.46101772,1293.98010212,22981.568716,1142.73159852,1184.40863541,3806.7323273399998,212.376107469,254.145596423,367.800590467,317.42927252,181.39511244,525.747821738,17.074653777,3034.3218016,100.051806101,52.373381013,4414.88311735,1045.380814497,97.265109706,54.867174319,780.53804769,614.520383845,208.37921398,242.39425873,390.249479051,746.6488962130001,306.45072878999997,198.254083011,702.023407806,11480.3610634,886.044378842,154.53633093599998,437.673320251,402.007715952,478.743124463,73.435014287,71.846890838,181.419130505,592.423433627,232.892100011,530.158032001,721.36466581,214.946102143,402.822771089,212.745788268,436.973301495,82.897086809,1527.058044412,136.081461032,627.41326452,109.96212138,1004.64108049,43.078698501,404.78000933,3070.00594319,133.738527845,1246.212149369,858.902387319,1680.029497064,4987.36499316,1074.618979587,16.431209708,1007.239811886,5833.13077855,426.789310222,3642.91284658,4893.15481606,1386.69715323,2063.38294348,821.868594917,36265.1139322,5876.62837109,47.969378478,1496.28807005,7473.8900467,615.081009081,299.867777178,357.182364055,946.526351623,7040.78763425,962.842848651,127.945146133,446.521409359,1008.55276673,5919.8322514500005,4880.93118259,568.179586803,682.336882048,166.89852650699999,1998.19324934,296.532180205,175.176528552,119.413621526,5835.42148104,646.347636729,648.33521484,2598.40693122,165.379315901,222.23037313700002,335.829332651,35.636316018,710.917619348,1531.48330654,583.725929004,2152.91229033,874.61365894,12.147328589,8.646412398,1883.44393728,6303.81104065,785.5727704,69362.3096171,703.00654997,2956.32771966,524.181688511,5920.86302315,35.75532003,586.678410143,255.866233887,3155.92216706,1228.10722926,99.03988803,167.521266462,445.210171875,378.36489508,1075.19815873,190.403502063,3264.09214539,952.682118144,532.878104781,3918.07620545,41.606547233,987.35390491,2448.9852121,2400.52234618,3320.83648703,40.470532527,903.277071024,212.753611724,255.521929695,108.236139661,217.367461496],"zmax":39155.40005095311,"zmin":0,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"},{"colorbar":{"len":0.5,"tickfont":{"color":"white"},"title":{"font":{"color":"white"},"text":"Cumulative (Mt CO\u2082e)"}},"colorscale":[[0.0,"#440154"],[0.1111111111111111,"#482878"],[0.2222222222222222,"#3e4989"],[0.3333333333333333,"#31688e"],[0.4444444444444444,"#26828e"],[0.5555555555555556,"#1f9e89"],[0.6666666666666666,"#35b779"],[0.7777777777777778,"#6ece58"],[0.8888888888888888,"#b5de2b"],[1.0,"#fde725"]],"locations":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"marker":{"line":{"color":"white","width":0.5}},"name":"Nitrous oxide","showscale":true,"text":["FJI","TZA","ESH","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","SDN","TCD","HTI","DOM","RUS","BHS","FLK","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","CIV","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","BDI","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","TUR","ALB","HRV","CHE","LUX","BEL","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","TWN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","ERI","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","RWA","BIH","MKD","TTO"],"visible":false,"z":[12.703773585,500.123794674,1.932814502,1636.63039011,18989.1325863,1270.96412179,430.82988007,21.483593154,3010.01206535,1591.84716769,309.535716974,239.973061815,247.150012606,491.362144469,1045.977691396,394.183694807,61.041457104,101.190196194,4993.31353762,1.67141509,2.032608243,219.593180297,0.251705557,7.6708301500000005,930.31255431,27.755031816,1648.68568744,295.997205884,5452.40019863,212.190751266,289.492470957,830.98387466,43.109531397,76.312900378,139.899004053,95.299356338,59.313953486,137.771586707,4.88671741,450.442914497,76.532130724,7.109110729,2479.78771519,176.049742412,37.973776045,18.718973938,337.412624113,214.969201778,76.476455958,86.55336883,117.122673303,246.952481681,82.284716275,55.738038532,236.19878934,1038.097022649,177.703368753,32.097449667,95.000326293,90.042606994,98.060116934,18.985715873,13.044785892,26.114428287,194.470831591,181.060577599,23.66737186,17.531587304,1.800421334,330.899346245,76.243087977,165.194954863,24.30778011,171.107134371,31.851908943999998,104.33571676,32.169142476,271.824204013,10.165055495,103.754494154,215.438465579,35.288788201,57.43913747,15.648456078,32.050018586,233.046343716,29.816547782,4.419413409,123.531620959,808.484616328,78.47609330899999,511.825478524,745.378667632,185.180781453,575.203899375,213.11533774,8403.11096226,865.825532169,6.835132451,194.484455539,1678.00257257,149.010654026,69.915947671,90.573798239,173.608145162,1100.564420258,187.084141089,25.291199391,278.084839107,664.0607506700001,1996.08421554,1396.52337842,219.120857754,370.351321857,48.176851898,757.470253809,189.27475657600002,83.12757753,47.701068383,2535.7707071199998,287.942436492,289.344581184,1335.77124421,50.193337762,132.692666945,167.30829969,12.487790718,442.806010324,684.727284873,188.160865169,784.23987461,339.984598512,6.154637355,1.362868585,410.487514652,1292.18446902,90.320065133,16451.8113766,223.001576853,1216.40672185,352.190329478,1495.33944862,15.717525401,91.318041321,88.828296053,493.232454586,437.508481497,6.758723668,43.627374706,264.022974867,150.349753167,399.249711567,54.267620306,1397.44307863,222.804977607,136.617721398,295.110381332,9.942543618,247.937591885,742.696125206,57.797621112,1088.6626838500001,8.563220056,267.59768927,43.627065588,51.06190993,35.554501361,10.429605487],"zmax":11059.1820989923,"zmin":0,"type":"choropleth"},{"colorscale":[[0,"#333333"],[1,"#333333"]],"hoverinfo":"text","locations":["ATF","PSE","ATA","CYN","SOL","SRB","MNE","-99","SSD"],"marker":{"line":{"color":"white","width":0.5}},"name":"Missing data","showscale":false,"text":["Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data","Missing data"],"visible":false,"z":[0,0,0,0,0,0,0,0,0],"zmax":1,"zmin":0,"type":"choropleth"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"font":{"color":"white","family":"Georgia"},"geo":{"projection":{"type":"equirectangular"},"showframe":false,"showcoastlines":false,"showland":true,"landcolor":"black","bgcolor":"black"},"margin":{"t":60,"l":0,"r":0,"b":0},"title":{"text":"Carbon dioxide \u2014 Cumulative GHG Emissions by Country\u003cbr\u003e(Million metric tons CO\u2082e)"},"paper_bgcolor":"black","plot_bgcolor":"black","updatemenus":[{"buttons":[{"args":[{"visible":[true,true,false,false,false,false,false,false,false,false]},{"title":"Carbon dioxide \u2014 Cumulative GHG Emissions by Country\u003cbr\u003e(Million metric tons CO\u2082e)"}],"label":"Carbon dioxide","method":"update"},{"args":[{"visible":[false,false,true,true,false,false,false,false,false,false]},{"title":"Fluorinated gases \u2014 Cumulative GHG Emissions by Country\u003cbr\u003e(Million metric tons CO\u2082e)"}],"label":"Fluorinated gases","method":"update"},{"args":[{"visible":[false,false,false,false,true,true,false,false,false,false]},{"title":"Greenhouse gas \u2014 Cumulative GHG Emissions by Country\u003cbr\u003e(Million metric tons CO\u2082e)"}],"label":"Greenhouse gas","method":"update"},{"args":[{"visible":[false,false,false,false,false,false,true,true,false,false]},{"title":"Methane \u2014 Cumulative GHG Emissions by Country\u003cbr\u003e(Million metric tons CO\u2082e)"}],"label":"Methane","method":"update"},{"args":[{"visible":[false,false,false,false,false,false,false,false,true,true]},{"title":"Nitrous oxide \u2014 Cumulative GHG Emissions by Country\u003cbr\u003e(Million metric tons CO\u2082e)"}],"label":"Nitrous oxide","method":"update"}],"direction":"down","showactive":true,"x":1.05,"xanchor":"left","y":0.85,"yanchor":"top"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('0a4cad5e-b84c-42c2-b691-b9bdc30ea786');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
<div id="5dec4390" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Add all the previous data to a single data frame to study ########################</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">###############################################correlation between variables#####################################</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 1: Define years ---</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>years <span class="op">=</span> [<span class="bu">str</span>(y) <span class="cf">for</span> y <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">1961</span>, <span class="dv">2025</span>)]</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 2 (replaced): GHG stats (mean &amp; SE) from long table ---</span></span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>ghg_total <span class="op">=</span> df_long_GHG[df_long_GHG[<span class="st">'Gas_Type'</span>] <span class="op">==</span> <span class="st">'Greenhouse gas'</span>].copy()</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Mean &amp; SE per year across countries</span></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>ghg_stats <span class="op">=</span> (</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    ghg_total.groupby(<span class="st">'Year'</span>)[<span class="st">'Value'</span>]</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>    .agg(mean_ghg<span class="op">=</span><span class="st">'mean'</span>,</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>         se_ghg<span class="op">=</span><span class="kw">lambda</span> x: x.std(ddof<span class="op">=</span><span class="dv">1</span>) <span class="op">/</span> np.sqrt(x.count()))</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>    .reset_index()</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 2: Population stats (mean &amp; SE) ---</span></span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>pop_stats <span class="op">=</span> df_ALLC_pop_cleaned[years].<span class="bu">apply</span>(</span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> col: pd.Series({</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>        <span class="st">'mean_pop'</span>: col.mean(skipna<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">'se_pop'</span>: col.std(skipna<span class="op">=</span><span class="va">True</span>, ddof<span class="op">=</span><span class="dv">1</span>) <span class="op">/</span> np.sqrt(col.count())</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>    }),</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>    axis<span class="op">=</span><span class="dv">0</span></span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>).T</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>pop_stats.index.name <span class="op">=</span> <span class="st">'Year'</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>pop_stats.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>pop_stats[<span class="st">'Year'</span>] <span class="op">=</span> pop_stats[<span class="st">'Year'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>pop_stats[<span class="st">'mean_pop_millions'</span>] <span class="op">=</span> pop_stats[<span class="st">'mean_pop'</span>] <span class="op">/</span> <span class="fl">1e6</span></span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>pop_stats[<span class="st">'se_pop_millions'</span>] <span class="op">=</span> pop_stats[<span class="st">'se_pop'</span>] <span class="op">/</span> <span class="fl">1e6</span></span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 3: Climate stats (mean &amp; SE) ---</span></span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a>climate_stats <span class="op">=</span> df_ALLC_STC_cleaned[years].<span class="bu">apply</span>(</span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>    <span class="kw">lambda</span> col: pd.Series({</span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a>        <span class="st">'mean_ind'</span>: col.mean(skipna<span class="op">=</span><span class="va">True</span>),</span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">'se_ind'</span>: col.std(skipna<span class="op">=</span><span class="va">True</span>, ddof<span class="op">=</span><span class="dv">1</span>) <span class="op">/</span> np.sqrt(col.count())</span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a>    }),</span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>    axis<span class="op">=</span><span class="dv">0</span></span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a>).T</span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a>climate_stats.index.name <span class="op">=</span> <span class="st">'Year'</span></span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a>climate_stats.reset_index(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a>climate_stats[<span class="st">'Year'</span>] <span class="op">=</span> climate_stats[<span class="st">'Year'</span>].astype(<span class="bu">int</span>)</span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Step 4 (updated): Merge GHG with climate stats ---</span></span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> pd.merge(ghg_stats, climate_stats, on<span class="op">=</span><span class="st">'Year'</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a>summary <span class="op">=</span> pd.merge(summary, pop_stats, on<span class="op">=</span><span class="st">'Year'</span>, how<span class="op">=</span><span class="st">'inner'</span>)</span>
<span id="cb50-52"><a href="#cb50-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-53"><a href="#cb50-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Optional: log transform of GHG mean (guard against zeros)</span></span>
<span id="cb50-54"><a href="#cb50-54" aria-hidden="true" tabindex="-1"></a>summary[<span class="st">'mean_ghg_log'</span>] <span class="op">=</span> np.log(summary[<span class="st">'mean_ghg'</span>].replace(<span class="dv">0</span>, np.nan))</span>
<span id="cb50-55"><a href="#cb50-55" aria-hidden="true" tabindex="-1"></a>summary[<span class="st">'mean_pop_millions_log'</span>] <span class="op">=</span> np.log(summary[<span class="st">'mean_pop_millions'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ca30ee96" class="cell" data-execution_count="32">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Find the correlation and relation between ########################################</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">########################################Climate Indicator vs Mean GHG############################################</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Clean data: drop NaN / inf rows used in modeling ---</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>summary_clean <span class="op">=</span> (</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    summary[[<span class="st">'mean_ghg'</span>, <span class="st">'mean_ind'</span>]]</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    .replace([np.inf, <span class="op">-</span>np.inf], np.nan)</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    .dropna()</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Rebuild X, y, and x_range from the cleaned data</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> summary_clean[<span class="st">'mean_ghg'</span>].to_numpy().reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> summary_clean[<span class="st">'mean_ind'</span>].to_numpy()</span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>x_range <span class="op">=</span> np.linspace(X.<span class="bu">min</span>(), X.<span class="bu">max</span>(), <span class="dv">300</span>).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Linear ---</span></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>lin_model <span class="op">=</span> LinearRegression().fit(X, y)</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a>y_pred_lin <span class="op">=</span> lin_model.predict(x_range)</span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>r2_lin <span class="op">=</span> r2_score(y, lin_model.predict(X))</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Poly deg=2 ---</span></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>poly2_model <span class="op">=</span> make_pipeline(PolynomialFeatures(<span class="dv">2</span>), LinearRegression())</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>poly2_model.fit(X, y)</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>y_pred_poly2 <span class="op">=</span> poly2_model.predict(x_range)</span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>r2_poly2 <span class="op">=</span> r2_score(y, poly2_model.predict(X))</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Poly deg=3 ---</span></span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>poly3_model <span class="op">=</span> make_pipeline(PolynomialFeatures(<span class="dv">3</span>), LinearRegression())</span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a>poly3_model.fit(X, y)</span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a>y_pred_poly3 <span class="op">=</span> poly3_model.predict(x_range)</span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a>r2_poly3 <span class="op">=</span> r2_score(y, poly3_model.predict(X))</span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Log model (x&gt;0 only) ---</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a>mask_log <span class="op">=</span> (X.flatten() <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a>X_log <span class="op">=</span> np.log(X[mask_log]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a>y_log <span class="op">=</span> y[mask_log]</span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> LinearRegression().fit(X_log, y_log)</span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a>r2_log <span class="op">=</span> r2_score(y_log, log_model.predict(X_log))</span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a>x_range_log <span class="op">=</span> x_range[x_range.flatten() <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a>y_pred_log <span class="op">=</span> log_model.predict(np.log(x_range_log))</span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Exponential model (y&gt;0 only) ---</span></span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a>mask_exp <span class="op">=</span> (y <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a>X_exp <span class="op">=</span> X[mask_exp]</span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a>y_exp <span class="op">=</span> np.log(y[mask_exp])</span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a>exp_model <span class="op">=</span> LinearRegression().fit(X_exp, y_exp)</span>
<span id="cb51-52"><a href="#cb51-52" aria-hidden="true" tabindex="-1"></a>y_pred_exp <span class="op">=</span> np.exp(exp_model.predict(x_range))</span>
<span id="cb51-53"><a href="#cb51-53" aria-hidden="true" tabindex="-1"></a>r2_exp <span class="op">=</span> r2_score(np.exp(y_exp), np.exp(exp_model.predict(X_exp)))</span>
<span id="cb51-54"><a href="#cb51-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-55"><a href="#cb51-55" aria-hidden="true" tabindex="-1"></a><span class="co"># --- LOWESS on cleaned data ---</span></span>
<span id="cb51-56"><a href="#cb51-56" aria-hidden="true" tabindex="-1"></a>lw <span class="op">=</span> lowess(y, X.flatten(), frac<span class="op">=</span><span class="fl">0.4</span>, return_sorted<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb51-57"><a href="#cb51-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-58"><a href="#cb51-58" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Plotting ---</span></span>
<span id="cb51-59"><a href="#cb51-59" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb51-60"><a href="#cb51-60" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">'seaborn-v0_8-dark'</span>)</span>
<span id="cb51-61"><a href="#cb51-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-62"><a href="#cb51-62" aria-hidden="true" tabindex="-1"></a>plt.scatter(X, y, color<span class="op">=</span><span class="st">'white'</span>, label<span class="op">=</span><span class="st">'Data'</span>, zorder<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb51-63"><a href="#cb51-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-64"><a href="#cb51-64" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_lin,   color<span class="op">=</span><span class="st">'red'</span>,       label<span class="op">=</span><span class="ss">f'Linear Fit (RÂ²=</span><span class="sc">{</span>r2_lin<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb51-65"><a href="#cb51-65" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_poly2, color<span class="op">=</span><span class="st">'cyan'</span>,      label<span class="op">=</span><span class="ss">f'Poly Fit deg=2 (RÂ²=</span><span class="sc">{</span>r2_poly2<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb51-66"><a href="#cb51-66" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_poly3, color<span class="op">=</span><span class="st">'limegreen'</span>, label<span class="op">=</span><span class="ss">f'Poly Fit deg=3 (RÂ²=</span><span class="sc">{</span>r2_poly3<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb51-67"><a href="#cb51-67" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range_log,  y_pred_log,   linestyle<span class="op">=</span><span class="st">'-.'</span>, color<span class="op">=</span><span class="st">'magenta'</span>, label<span class="op">=</span><span class="ss">f'Log Fit (RÂ²=</span><span class="sc">{</span>r2_log<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb51-68"><a href="#cb51-68" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_exp,   linestyle<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span><span class="st">'orange'</span>,  label<span class="op">=</span><span class="ss">f'Exp Fit (RÂ²=</span><span class="sc">{</span>r2_exp<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb51-69"><a href="#cb51-69" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.plot(lw[:,0],      lw[:,1],      color='yellow',   label='LOWESS')</span></span>
<span id="cb51-70"><a href="#cb51-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-71"><a href="#cb51-71" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Mean GHG (Million metric tons CO$_2$e)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb51-72"><a href="#cb51-72" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Mean Climate Indicator (Â°C)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb51-73"><a href="#cb51-73" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Model Comparison: Climate Indicator vs Mean GHG"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb51-74"><a href="#cb51-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-75"><a href="#cb51-75" aria-hidden="true" tabindex="-1"></a>plt.legend(frameon<span class="op">=</span><span class="va">False</span>, loc<span class="op">=</span><span class="st">'upper left'</span>, labelcolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb51-76"><a href="#cb51-76" aria-hidden="true" tabindex="-1"></a>plt.tick_params(colors<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb51-77"><a href="#cb51-77" aria-hidden="true" tabindex="-1"></a>plt.gca().set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb51-78"><a href="#cb51-78" aria-hidden="true" tabindex="-1"></a>plt.gcf().patch.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb51-79"><a href="#cb51-79" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb51-80"><a href="#cb51-80" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"Climate_Indicator_vs_Mean_GHG.png"</span>, bbox_inches<span class="op">=</span><span class="st">"tight"</span>)</span>
<span id="cb51-81"><a href="#cb51-81" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb51-82"><a href="#cb51-82" aria-hidden="true" tabindex="-1"></a>display(Image(<span class="st">"Climate_Indicator_vs_Mean_GHG.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="climate-change-a-global-data-analysis_files/figure-html/cell-33-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="d91db7f6" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Find the correlation and relation between ########################################</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co">########################################Climate Indicator vs Population##########################################</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare data</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> summary[<span class="st">'mean_pop_millions'</span>].values.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> summary[<span class="st">'mean_ind'</span>].values</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> X.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>x_range <span class="op">=</span> np.linspace(X.<span class="bu">min</span>(), X.<span class="bu">max</span>(), <span class="dv">300</span>).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>x_range <span class="op">=</span> x_range.reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Linear Regression ---</span></span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>lin_model <span class="op">=</span> LinearRegression().fit(X, y)</span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>y_pred_lin <span class="op">=</span> lin_model.predict(x_range)</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>r2_lin <span class="op">=</span> r2_score(y, lin_model.predict(X))</span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Polynomial Regression (degree=2) ---</span></span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>poly2_model <span class="op">=</span> make_pipeline(PolynomialFeatures(<span class="dv">2</span>), LinearRegression())</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>poly2_model.fit(X, y)</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>y_pred_poly2 <span class="op">=</span> poly2_model.predict(x_range)</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>r2_poly2 <span class="op">=</span> r2_score(y, poly2_model.predict(X))</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Polynomial Regression (degree=3) ---</span></span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a>poly3_model <span class="op">=</span> make_pipeline(PolynomialFeatures(<span class="dv">3</span>), LinearRegression())</span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>poly3_model.fit(X, y)</span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>y_pred_poly3 <span class="op">=</span> poly3_model.predict(x_range)</span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>r2_poly3 <span class="op">=</span> r2_score(y, poly3_model.predict(X))</span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Logarithmic Regression ---</span></span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit</span></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>X_log <span class="op">=</span> np.log(X[X <span class="op">&gt;</span> <span class="dv">0</span>]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a>y_log <span class="op">=</span> y[X.flatten() <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> LinearRegression().fit(X_log, y_log)</span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict for evaluation (same data used to train)</span></span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a>y_pred_log_train <span class="op">=</span> log_model.predict(X_log)</span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>r2_log <span class="op">=</span> r2_score(y_log, y_pred_log_train)</span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict for plotting (full range)</span></span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a>x_range_log <span class="op">=</span> x_range[x_range.flatten() <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>y_pred_log <span class="op">=</span> log_model.predict(np.log(x_range_log))</span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Exponential Regression ---</span></span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a>valid <span class="op">=</span> y <span class="op">&gt;</span> <span class="dv">0</span></span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a>X_exp <span class="op">=</span> X[valid]</span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a>y_exp <span class="op">=</span> np.log(y[valid])</span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a>exp_model <span class="op">=</span> LinearRegression().fit(X_exp, y_exp)</span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a>y_pred_exp <span class="op">=</span> np.exp(exp_model.predict(x_range))</span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Exponential fit</span></span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>r2_exp <span class="op">=</span> r2_score(np.exp(y_exp), np.exp(exp_model.predict(X_exp)))</span>
<span id="cb52-57"><a href="#cb52-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-58"><a href="#cb52-58" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Plotting ---</span></span>
<span id="cb52-59"><a href="#cb52-59" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb52-60"><a href="#cb52-60" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">'seaborn-v0_8-dark'</span>)</span>
<span id="cb52-61"><a href="#cb52-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-62"><a href="#cb52-62" aria-hidden="true" tabindex="-1"></a>plt.scatter(X, y, color<span class="op">=</span><span class="st">'white'</span>, label<span class="op">=</span><span class="st">'Data'</span>, zorder<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb52-63"><a href="#cb52-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-64"><a href="#cb52-64" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range, y_pred_lin, color<span class="op">=</span><span class="st">'red'</span>, label<span class="op">=</span><span class="ss">f'Linear Fit (RÂ²=</span><span class="sc">{</span>r2_lin<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb52-65"><a href="#cb52-65" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range, y_pred_poly2, color<span class="op">=</span><span class="st">'cyan'</span>, label<span class="op">=</span><span class="ss">f'Poly Fit deg=2 (RÂ²=</span><span class="sc">{</span>r2_poly2<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb52-66"><a href="#cb52-66" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range, y_pred_poly3, color<span class="op">=</span><span class="st">'limegreen'</span>, label<span class="op">=</span><span class="ss">f'Poly Fit deg=3 (RÂ²=</span><span class="sc">{</span>r2_poly3<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb52-67"><a href="#cb52-67" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range_log, y_pred_log, linestyle<span class="op">=</span><span class="st">'-.'</span>, color<span class="op">=</span><span class="st">'magenta'</span>, label<span class="op">=</span><span class="ss">f'Log Fit (RÂ²=</span><span class="sc">{</span>r2_log<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb52-68"><a href="#cb52-68" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range, y_pred_exp, linestyle<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span><span class="st">'orange'</span>, label<span class="op">=</span><span class="ss">f'Exp Fit (RÂ²=</span><span class="sc">{</span>r2_exp<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb52-69"><a href="#cb52-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-70"><a href="#cb52-70" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Mean Population (Millions)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb52-71"><a href="#cb52-71" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Mean Climate Indicator (Â°C)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb52-72"><a href="#cb52-72" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Model Comparison: Climate Indicator vs Population"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb52-73"><a href="#cb52-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-74"><a href="#cb52-74" aria-hidden="true" tabindex="-1"></a>plt.legend(frameon<span class="op">=</span><span class="va">False</span>, loc<span class="op">=</span><span class="st">'upper left'</span>, labelcolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb52-75"><a href="#cb52-75" aria-hidden="true" tabindex="-1"></a>plt.tick_params(colors<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb52-76"><a href="#cb52-76" aria-hidden="true" tabindex="-1"></a>plt.gca().set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb52-77"><a href="#cb52-77" aria-hidden="true" tabindex="-1"></a>plt.gcf().patch.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb52-78"><a href="#cb52-78" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb52-79"><a href="#cb52-79" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"Climate_Indicator_vs_pop.png"</span>, bbox_inches<span class="op">=</span><span class="st">"tight"</span>)</span>
<span id="cb52-80"><a href="#cb52-80" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb52-81"><a href="#cb52-81" aria-hidden="true" tabindex="-1"></a>display(Image(<span class="st">"Climate_Indicator_vs_pop.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="climate-change-a-global-data-analysis_files/figure-html/cell-34-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="33363b32" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">###############################Find the correlation and relation between ########################################</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">########################################Mean Population vs Mean GHG #############################################</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co">#################################################################################################################</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Clean data: drop NaN / inf rows used in modeling ---</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>summary_clean <span class="op">=</span> (</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    summary[[<span class="st">'mean_ghg'</span>, <span class="st">'mean_pop_millions'</span>]]</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    .replace([np.inf, <span class="op">-</span>np.inf], np.nan)</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>    .dropna()</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Rebuild X, y, and x_range from the cleaned data</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> summary_clean[<span class="st">'mean_pop_millions'</span>].to_numpy().reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> summary_clean[<span class="st">'mean_ghg'</span>].to_numpy()</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>x_range <span class="op">=</span> np.linspace(X.<span class="bu">min</span>(), X.<span class="bu">max</span>(), <span class="dv">300</span>).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Linear ---</span></span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>lin_model <span class="op">=</span> LinearRegression().fit(X, y)</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>y_pred_lin <span class="op">=</span> lin_model.predict(x_range)</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>r2_lin <span class="op">=</span> r2_score(y, lin_model.predict(X))</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Poly deg=2 ---</span></span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>poly2_model <span class="op">=</span> make_pipeline(PolynomialFeatures(<span class="dv">2</span>), LinearRegression())</span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>poly2_model.fit(X, y)</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>y_pred_poly2 <span class="op">=</span> poly2_model.predict(x_range)</span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>r2_poly2 <span class="op">=</span> r2_score(y, poly2_model.predict(X))</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Poly deg=3 ---</span></span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a>poly3_model <span class="op">=</span> make_pipeline(PolynomialFeatures(<span class="dv">3</span>), LinearRegression())</span>
<span id="cb53-34"><a href="#cb53-34" aria-hidden="true" tabindex="-1"></a>poly3_model.fit(X, y)</span>
<span id="cb53-35"><a href="#cb53-35" aria-hidden="true" tabindex="-1"></a>y_pred_poly3 <span class="op">=</span> poly3_model.predict(x_range)</span>
<span id="cb53-36"><a href="#cb53-36" aria-hidden="true" tabindex="-1"></a>r2_poly3 <span class="op">=</span> r2_score(y, poly3_model.predict(X))</span>
<span id="cb53-37"><a href="#cb53-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-38"><a href="#cb53-38" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Log model (x&gt;0 only) ---</span></span>
<span id="cb53-39"><a href="#cb53-39" aria-hidden="true" tabindex="-1"></a>mask_log <span class="op">=</span> (X.flatten() <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb53-40"><a href="#cb53-40" aria-hidden="true" tabindex="-1"></a>X_log <span class="op">=</span> np.log(X[mask_log]).reshape(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</span>
<span id="cb53-41"><a href="#cb53-41" aria-hidden="true" tabindex="-1"></a>y_log <span class="op">=</span> y[mask_log]</span>
<span id="cb53-42"><a href="#cb53-42" aria-hidden="true" tabindex="-1"></a>log_model <span class="op">=</span> LinearRegression().fit(X_log, y_log)</span>
<span id="cb53-43"><a href="#cb53-43" aria-hidden="true" tabindex="-1"></a>r2_log <span class="op">=</span> r2_score(y_log, log_model.predict(X_log))</span>
<span id="cb53-44"><a href="#cb53-44" aria-hidden="true" tabindex="-1"></a>x_range_log <span class="op">=</span> x_range[x_range.flatten() <span class="op">&gt;</span> <span class="dv">0</span>]</span>
<span id="cb53-45"><a href="#cb53-45" aria-hidden="true" tabindex="-1"></a>y_pred_log <span class="op">=</span> log_model.predict(np.log(x_range_log))</span>
<span id="cb53-46"><a href="#cb53-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-47"><a href="#cb53-47" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Exponential model (y&gt;0 only) ---</span></span>
<span id="cb53-48"><a href="#cb53-48" aria-hidden="true" tabindex="-1"></a>mask_exp <span class="op">=</span> (y <span class="op">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb53-49"><a href="#cb53-49" aria-hidden="true" tabindex="-1"></a>X_exp <span class="op">=</span> X[mask_exp]</span>
<span id="cb53-50"><a href="#cb53-50" aria-hidden="true" tabindex="-1"></a>y_exp <span class="op">=</span> np.log(y[mask_exp])</span>
<span id="cb53-51"><a href="#cb53-51" aria-hidden="true" tabindex="-1"></a>exp_model <span class="op">=</span> LinearRegression().fit(X_exp, y_exp)</span>
<span id="cb53-52"><a href="#cb53-52" aria-hidden="true" tabindex="-1"></a>y_pred_exp <span class="op">=</span> np.exp(exp_model.predict(x_range))</span>
<span id="cb53-53"><a href="#cb53-53" aria-hidden="true" tabindex="-1"></a>r2_exp <span class="op">=</span> r2_score(np.exp(y_exp), np.exp(exp_model.predict(X_exp)))</span>
<span id="cb53-54"><a href="#cb53-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-55"><a href="#cb53-55" aria-hidden="true" tabindex="-1"></a><span class="co"># --- LOWESS on cleaned data ---</span></span>
<span id="cb53-56"><a href="#cb53-56" aria-hidden="true" tabindex="-1"></a>lw <span class="op">=</span> lowess(y, X.flatten(), frac<span class="op">=</span><span class="fl">0.4</span>, return_sorted<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb53-57"><a href="#cb53-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-58"><a href="#cb53-58" aria-hidden="true" tabindex="-1"></a><span class="co"># --- Plotting ---</span></span>
<span id="cb53-59"><a href="#cb53-59" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">12</span>, <span class="dv">7</span>))</span>
<span id="cb53-60"><a href="#cb53-60" aria-hidden="true" tabindex="-1"></a>plt.style.use(<span class="st">'seaborn-v0_8-dark'</span>)</span>
<span id="cb53-61"><a href="#cb53-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-62"><a href="#cb53-62" aria-hidden="true" tabindex="-1"></a>plt.scatter(X, y, color<span class="op">=</span><span class="st">'white'</span>, label<span class="op">=</span><span class="st">'Data'</span>, zorder<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb53-63"><a href="#cb53-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-64"><a href="#cb53-64" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_lin,   color<span class="op">=</span><span class="st">'red'</span>,       label<span class="op">=</span><span class="ss">f'Linear Fit (RÂ²=</span><span class="sc">{</span>r2_lin<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb53-65"><a href="#cb53-65" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_poly2, color<span class="op">=</span><span class="st">'cyan'</span>,      label<span class="op">=</span><span class="ss">f'Poly Fit deg=2 (RÂ²=</span><span class="sc">{</span>r2_poly2<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb53-66"><a href="#cb53-66" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_poly3, color<span class="op">=</span><span class="st">'limegreen'</span>, label<span class="op">=</span><span class="ss">f'Poly Fit deg=3 (RÂ²=</span><span class="sc">{</span>r2_poly3<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb53-67"><a href="#cb53-67" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range_log,  y_pred_log,   linestyle<span class="op">=</span><span class="st">'-.'</span>, color<span class="op">=</span><span class="st">'magenta'</span>, label<span class="op">=</span><span class="ss">f'Log Fit (RÂ²=</span><span class="sc">{</span>r2_log<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb53-68"><a href="#cb53-68" aria-hidden="true" tabindex="-1"></a>plt.plot(x_range,      y_pred_exp,   linestyle<span class="op">=</span><span class="st">'--'</span>, color<span class="op">=</span><span class="st">'orange'</span>,  label<span class="op">=</span><span class="ss">f'Exp Fit (RÂ²=</span><span class="sc">{</span>r2_exp<span class="sc">:.2f}</span><span class="ss">)'</span>)</span>
<span id="cb53-69"><a href="#cb53-69" aria-hidden="true" tabindex="-1"></a><span class="co"># plt.plot(lw[:,0],      lw[:,1],      color='yellow',   label='LOWESS')</span></span>
<span id="cb53-70"><a href="#cb53-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-71"><a href="#cb53-71" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"Mean GHG (Million metric tons CO$_2$e)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb53-72"><a href="#cb53-72" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Mean Population (Millions)"</span>, fontsize<span class="op">=</span><span class="dv">12</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb53-73"><a href="#cb53-73" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">"Model Comparison: Mean Population vs Mean GHG"</span>, fontsize<span class="op">=</span><span class="dv">14</span>, color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb53-74"><a href="#cb53-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-75"><a href="#cb53-75" aria-hidden="true" tabindex="-1"></a>plt.legend(frameon<span class="op">=</span><span class="va">False</span>, loc<span class="op">=</span><span class="st">'upper left'</span>, labelcolor<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb53-76"><a href="#cb53-76" aria-hidden="true" tabindex="-1"></a>plt.tick_params(colors<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb53-77"><a href="#cb53-77" aria-hidden="true" tabindex="-1"></a>plt.gca().set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb53-78"><a href="#cb53-78" aria-hidden="true" tabindex="-1"></a>plt.gcf().patch.set_facecolor(<span class="st">'black'</span>)</span>
<span id="cb53-79"><a href="#cb53-79" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb53-80"><a href="#cb53-80" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="st">"GHG_vs_pop.png"</span>, bbox_inches<span class="op">=</span><span class="st">"tight"</span>)</span>
<span id="cb53-81"><a href="#cb53-81" aria-hidden="true" tabindex="-1"></a>plt.close()</span>
<span id="cb53-82"><a href="#cb53-82" aria-hidden="true" tabindex="-1"></a>display(Image(<span class="st">"GHG_vs_pop.png"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="climate-change-a-global-data-analysis_files/figure-html/cell-35-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="exploring-the-relationship-between-climate-change-population-and-ghg-emissions" class="level2">
<h2 class="anchored" data-anchor-id="exploring-the-relationship-between-climate-change-population-and-ghg-emissions">Exploring the Relationship Between Climate Change, Population, and GHG Emissions</h2>
<p>To better understand the drivers and correlates of climate change, we analyzed the <strong>average values per country</strong> for:</p>
<ul>
<li><strong>Surface temperature change (Â°C/decade)</strong></li>
<li><strong>Population growth</strong></li>
<li><strong>Greenhouse gas (GHG) emissions</strong></li>
</ul>
<section id="observed-correlations" class="level3">
<h3 class="anchored" data-anchor-id="observed-correlations">Observed Correlations</h3>
<ul>
<li><strong>GHG emissions</strong> and <strong>temperature change</strong> show a <strong>positive correlation</strong>, consistent with the well-established link between rising emissions and global warming.</li>
<li><strong>Population</strong> also correlates positively with <strong>GHG emissions</strong>, likely reflecting that:
<ul>
<li>More people â higher energy demand</li>
<li>More people â greater industrial and agricultural activity</li>
</ul></li>
<li><strong>Population and temperature</strong> show an indirect correlation, potentially mediated by emissions and economic growth.</li>
</ul>
<blockquote class="blockquote">
<p>While correlation does <strong>not imply causation</strong>, these patterns align with broader global trends in industrialization, energy use, and environmental impact.</p>
</blockquote>
<hr>
</section>
<section id="model-fitting-and-trend-behavior" class="level3">
<h3 class="anchored" data-anchor-id="model-fitting-and-trend-behavior">Model Fitting and Trend Behavior</h3>
<p>We tested different model types â <strong>linear</strong>, <strong>logarithmic</strong>, and <strong>exponential</strong> â to capture the relationships between these variables. All performed similarly well, indicating stable monotonic relationships.</p>
<p>Given this:</p>
<ul>
<li><strong>Linear regression</strong> is a <strong>sufficient and interpretable</strong> approach.</li>
<li>It offers a <strong>simplified model</strong> without significantly sacrificing accuracy.</li>
<li>Especially for communication and comparison across countries, linear trends provide a <strong>clear, actionable summary</strong>.</li>
</ul>
<hr>
</section>
<section id="final-thoughts-1" class="level3">
<h3 class="anchored" data-anchor-id="final-thoughts-1">Final Thoughts</h3>
<p>These relationships reinforce the interconnected nature of <strong>demographic</strong>, <strong>economic</strong>, and <strong>climatic</strong> systems. While deeper causal modeling would require more granular data and controls, our analysis offers valuable <strong>first-order insight</strong> into how climate change aligns with human and industrial activity across the globe.</p>
<div id="dbad7a37" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ########################################################################################################</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge previous data conserving info by country to allow the study of main patterns of variation</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co"># among countries based on climate, demographic, and emission indicators</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ########################################################################################################</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge latest total GHG values with other indicators</span></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>df_cumsum_latest <span class="op">=</span> (</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>    df_cumsum[df_cumsum[<span class="st">'Gas_Type'</span>] <span class="op">==</span> <span class="st">'Greenhouse gas'</span>]</span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>    .sort_values([<span class="st">'cca3'</span>, <span class="st">'Year'</span>])</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    .groupby(<span class="st">'cca3'</span>, as_index<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    .tail(<span class="dv">1</span>)[[<span class="st">'cca3'</span>, <span class="st">'cum_value'</span>]]</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    .rename(columns<span class="op">=</span>{<span class="st">'cum_value'</span>: <span class="st">'total_GHG'</span>})</span>
<span id="cb54-13"><a href="#cb54-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb54-14"><a href="#cb54-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-15"><a href="#cb54-15" aria-hidden="true" tabindex="-1"></a>world_with_climate_with_pop_ghg <span class="op">=</span> world_with_climate_with_pop.merge(</span>
<span id="cb54-16"><a href="#cb54-16" aria-hidden="true" tabindex="-1"></a>    df_cumsum_latest[[<span class="st">'cca3'</span>, <span class="st">'total_GHG'</span>]],</span>
<span id="cb54-17"><a href="#cb54-17" aria-hidden="true" tabindex="-1"></a>    on<span class="op">=</span><span class="st">'cca3'</span>,</span>
<span id="cb54-18"><a href="#cb54-18" aria-hidden="true" tabindex="-1"></a>    how<span class="op">=</span><span class="st">'left'</span></span>
<span id="cb54-19"><a href="#cb54-19" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ebf09397" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># === Setup ===</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Replace with your real data</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="co"># base_pca = world_with_climate_with_pop_ghg[['cca3', 'delta_indicator', 'avg_growth_rate', 'total_GHG']].dropna()</span></span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Labels and config</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>var_labels <span class="op">=</span> {</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'delta_indicator'</span>: <span class="st">'Linear temperature trend (Â°C per decade)'</span>,</span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">'avg_growth_rate'</span>: <span class="st">'Population growth rate (%)'</span>,</span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">'total_GHG'</span>: <span class="st">'Cumulative GHG (Mt CO$_2$e)'</span></span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>vars_three <span class="op">=</span> <span class="bu">list</span>(var_labels.keys())</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>id_col <span class="op">=</span> <span class="st">'cca3'</span></span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare PCA data</span></span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>base_pca <span class="op">=</span> (</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>    world_with_climate_with_pop_ghg[[id_col] <span class="op">+</span> vars_three]</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    .replace([np.inf, <span class="op">-</span>np.inf], np.nan)</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    .dropna(subset<span class="op">=</span>vars_three)</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>    .copy()</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>feature_colors <span class="op">=</span> {</span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">'delta_indicator'</span>: <span class="st">'orange'</span>,</span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">'avg_growth_rate'</span>: <span class="st">'lime'</span>,</span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">'total_GHG'</span>: <span class="st">'cyan'</span></span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a><span class="co"># === Quantile filter options ===</span></span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>quantile_options <span class="op">=</span> {</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Full range (0â100%)"</span>: (<span class="dv">0</span>, <span class="dv">100</span>),</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">"10â90%"</span>: (<span class="dv">10</span>, <span class="dv">90</span>),</span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a><span class="co"># === Precompute PCA per quantile set ===</span></span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>pca_results <span class="op">=</span> {}</span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> label, (qmin, qmax) <span class="kw">in</span> quantile_options.items():</span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> base_pca.copy()</span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a>    mask <span class="op">=</span> (</span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'delta_indicator'</span>].between(<span class="op">*</span>np.percentile(df[<span class="st">'delta_indicator'</span>], [qmin, qmax])) <span class="op">&amp;</span></span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'avg_growth_rate'</span>].between(<span class="op">*</span>np.percentile(df[<span class="st">'avg_growth_rate'</span>], [qmin, qmax])) <span class="op">&amp;</span></span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a>        df[<span class="st">'total_GHG'</span>].between(<span class="op">*</span>np.percentile(df[<span class="st">'total_GHG'</span>], [qmin, qmax]))</span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-47"><a href="#cb55-47" aria-hidden="true" tabindex="-1"></a>    df <span class="op">=</span> df[mask].copy()</span>
<span id="cb55-48"><a href="#cb55-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">len</span>(df) <span class="op">&lt;</span> <span class="dv">3</span>:</span>
<span id="cb55-49"><a href="#cb55-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">continue</span></span>
<span id="cb55-50"><a href="#cb55-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-51"><a href="#cb55-51" aria-hidden="true" tabindex="-1"></a>    X <span class="op">=</span> StandardScaler().fit_transform(df[vars_three])</span>
<span id="cb55-52"><a href="#cb55-52" aria-hidden="true" tabindex="-1"></a>    pca <span class="op">=</span> PCA(n_components<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb55-53"><a href="#cb55-53" aria-hidden="true" tabindex="-1"></a>    scores <span class="op">=</span> pca.fit_transform(X)</span>
<span id="cb55-54"><a href="#cb55-54" aria-hidden="true" tabindex="-1"></a>    loadings <span class="op">=</span> pca.components_.T</span>
<span id="cb55-55"><a href="#cb55-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-56"><a href="#cb55-56" aria-hidden="true" tabindex="-1"></a>    pca_df <span class="op">=</span> pd.DataFrame(scores, columns<span class="op">=</span>[<span class="st">'PC1'</span>, <span class="st">'PC2'</span>])</span>
<span id="cb55-57"><a href="#cb55-57" aria-hidden="true" tabindex="-1"></a>    pca_df[id_col] <span class="op">=</span> df[id_col].values</span>
<span id="cb55-58"><a href="#cb55-58" aria-hidden="true" tabindex="-1"></a>    pca_results[label] <span class="op">=</span> (pca_df, loadings, pca)</span>
<span id="cb55-59"><a href="#cb55-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-60"><a href="#cb55-60" aria-hidden="true" tabindex="-1"></a><span class="co"># === Build Plotly figure ===</span></span>
<span id="cb55-61"><a href="#cb55-61" aria-hidden="true" tabindex="-1"></a>fig <span class="op">=</span> go.Figure()</span>
<span id="cb55-62"><a href="#cb55-62" aria-hidden="true" tabindex="-1"></a>buttons <span class="op">=</span> []</span>
<span id="cb55-63"><a href="#cb55-63" aria-hidden="true" tabindex="-1"></a>first <span class="op">=</span> <span class="va">True</span></span>
<span id="cb55-64"><a href="#cb55-64" aria-hidden="true" tabindex="-1"></a>n_per_group <span class="op">=</span> <span class="dv">1</span> <span class="op">+</span> <span class="bu">len</span>(vars_three)  <span class="co"># countries + 3 arrows</span></span>
<span id="cb55-65"><a href="#cb55-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-66"><a href="#cb55-66" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i, (label, (pca_df, loadings, pca)) <span class="kw">in</span> <span class="bu">enumerate</span>(pca_results.items()):</span>
<span id="cb55-67"><a href="#cb55-67" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Countries</span></span>
<span id="cb55-68"><a href="#cb55-68" aria-hidden="true" tabindex="-1"></a>    fig.add_trace(go.Scatter(</span>
<span id="cb55-69"><a href="#cb55-69" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span>pca_df[<span class="st">'PC1'</span>], y<span class="op">=</span>pca_df[<span class="st">'PC2'</span>],</span>
<span id="cb55-70"><a href="#cb55-70" aria-hidden="true" tabindex="-1"></a>        mode<span class="op">=</span><span class="st">'text'</span>,</span>
<span id="cb55-71"><a href="#cb55-71" aria-hidden="true" tabindex="-1"></a>        text<span class="op">=</span>pca_df[id_col],</span>
<span id="cb55-72"><a href="#cb55-72" aria-hidden="true" tabindex="-1"></a>        textfont<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>),</span>
<span id="cb55-73"><a href="#cb55-73" aria-hidden="true" tabindex="-1"></a>        hoverinfo<span class="op">=</span><span class="st">'text'</span>,</span>
<span id="cb55-74"><a href="#cb55-74" aria-hidden="true" tabindex="-1"></a>        name<span class="op">=</span><span class="ss">f'Countries (</span><span class="sc">{</span>label<span class="sc">}</span><span class="ss">)'</span>,</span>
<span id="cb55-75"><a href="#cb55-75" aria-hidden="true" tabindex="-1"></a>        visible<span class="op">=</span>first</span>
<span id="cb55-76"><a href="#cb55-76" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb55-77"><a href="#cb55-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-78"><a href="#cb55-78" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Arrows</span></span>
<span id="cb55-79"><a href="#cb55-79" aria-hidden="true" tabindex="-1"></a>    scale <span class="op">=</span> <span class="fl">0.9</span> <span class="op">*</span> np.<span class="bu">max</span>(np.sqrt(pca_df[<span class="st">'PC1'</span>]<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> pca_df[<span class="st">'PC2'</span>]<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb55-80"><a href="#cb55-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> j, feature <span class="kw">in</span> <span class="bu">enumerate</span>(vars_three):</span>
<span id="cb55-81"><a href="#cb55-81" aria-hidden="true" tabindex="-1"></a>        x <span class="op">=</span> loadings[j, <span class="dv">0</span>] <span class="op">*</span> scale</span>
<span id="cb55-82"><a href="#cb55-82" aria-hidden="true" tabindex="-1"></a>        y <span class="op">=</span> loadings[j, <span class="dv">1</span>] <span class="op">*</span> scale</span>
<span id="cb55-83"><a href="#cb55-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-84"><a href="#cb55-84" aria-hidden="true" tabindex="-1"></a>        fig.add_trace(go.Scatter(</span>
<span id="cb55-85"><a href="#cb55-85" aria-hidden="true" tabindex="-1"></a>            x<span class="op">=</span>[<span class="dv">0</span>, x], y<span class="op">=</span>[<span class="dv">0</span>, y],</span>
<span id="cb55-86"><a href="#cb55-86" aria-hidden="true" tabindex="-1"></a>            mode<span class="op">=</span><span class="st">'lines'</span>,</span>
<span id="cb55-87"><a href="#cb55-87" aria-hidden="true" tabindex="-1"></a>            line<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span>feature_colors[feature], width<span class="op">=</span><span class="dv">2</span>),</span>
<span id="cb55-88"><a href="#cb55-88" aria-hidden="true" tabindex="-1"></a>            name<span class="op">=</span>var_labels[feature],</span>
<span id="cb55-89"><a href="#cb55-89" aria-hidden="true" tabindex="-1"></a>            showlegend<span class="op">=</span>first ,  <span class="co"># Show only once</span></span>
<span id="cb55-90"><a href="#cb55-90" aria-hidden="true" tabindex="-1"></a>            visible<span class="op">=</span>first</span>
<span id="cb55-91"><a href="#cb55-91" aria-hidden="true" tabindex="-1"></a>        ))</span>
<span id="cb55-92"><a href="#cb55-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-93"><a href="#cb55-93" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Dropdown visibility logic</span></span>
<span id="cb55-94"><a href="#cb55-94" aria-hidden="true" tabindex="-1"></a>    total_traces <span class="op">=</span> <span class="bu">len</span>(pca_results) <span class="op">*</span> n_per_group</span>
<span id="cb55-95"><a href="#cb55-95" aria-hidden="true" tabindex="-1"></a>    visibility <span class="op">=</span> [<span class="va">False</span>] <span class="op">*</span> total_traces</span>
<span id="cb55-96"><a href="#cb55-96" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> i <span class="op">*</span> n_per_group</span>
<span id="cb55-97"><a href="#cb55-97" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> k <span class="kw">in</span> <span class="bu">range</span>(n_per_group):</span>
<span id="cb55-98"><a href="#cb55-98" aria-hidden="true" tabindex="-1"></a>        visibility[start <span class="op">+</span> k] <span class="op">=</span> <span class="va">True</span></span>
<span id="cb55-99"><a href="#cb55-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-100"><a href="#cb55-100" aria-hidden="true" tabindex="-1"></a>    buttons.append(<span class="bu">dict</span>(</span>
<span id="cb55-101"><a href="#cb55-101" aria-hidden="true" tabindex="-1"></a>        label<span class="op">=</span>label,</span>
<span id="cb55-102"><a href="#cb55-102" aria-hidden="true" tabindex="-1"></a>        method<span class="op">=</span><span class="st">"update"</span>,</span>
<span id="cb55-103"><a href="#cb55-103" aria-hidden="true" tabindex="-1"></a>        args<span class="op">=</span>[{<span class="st">"visible"</span>: visibility},</span>
<span id="cb55-104"><a href="#cb55-104" aria-hidden="true" tabindex="-1"></a>              {<span class="st">"title"</span>: <span class="ss">f"PCA Biplot â </span><span class="sc">{</span>label<span class="sc">}</span><span class="ss">&lt;br&gt;"</span></span>
<span id="cb55-105"><a href="#cb55-105" aria-hidden="true" tabindex="-1"></a>                        <span class="ss">f"PC1: </span><span class="sc">{</span>pca<span class="sc">.</span>explained_variance_ratio_[<span class="dv">0</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">% Â· "</span></span>
<span id="cb55-106"><a href="#cb55-106" aria-hidden="true" tabindex="-1"></a>                        <span class="ss">f"PC2: </span><span class="sc">{</span>pca<span class="sc">.</span>explained_variance_ratio_[<span class="dv">1</span>]<span class="op">*</span><span class="dv">100</span><span class="sc">:.1f}</span><span class="ss">%"</span>}]</span>
<span id="cb55-107"><a href="#cb55-107" aria-hidden="true" tabindex="-1"></a>    ))</span>
<span id="cb55-108"><a href="#cb55-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-109"><a href="#cb55-109" aria-hidden="true" tabindex="-1"></a>    first <span class="op">=</span> <span class="va">False</span></span>
<span id="cb55-110"><a href="#cb55-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-111"><a href="#cb55-111" aria-hidden="true" tabindex="-1"></a><span class="co"># === Layout ===</span></span>
<span id="cb55-112"><a href="#cb55-112" aria-hidden="true" tabindex="-1"></a>fig.update_layout(</span>
<span id="cb55-113"><a href="#cb55-113" aria-hidden="true" tabindex="-1"></a>    title<span class="op">=</span><span class="st">"PCA Biplot â Country Profiles"</span>,</span>
<span id="cb55-114"><a href="#cb55-114" aria-hidden="true" tabindex="-1"></a>    font<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>, family<span class="op">=</span><span class="st">'Georgia'</span>),</span>
<span id="cb55-115"><a href="#cb55-115" aria-hidden="true" tabindex="-1"></a>    paper_bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb55-116"><a href="#cb55-116" aria-hidden="true" tabindex="-1"></a>    plot_bgcolor<span class="op">=</span><span class="st">'black'</span>,</span>
<span id="cb55-117"><a href="#cb55-117" aria-hidden="true" tabindex="-1"></a>    xaxis<span class="op">=</span><span class="bu">dict</span>(title<span class="op">=</span><span class="st">'PC1'</span>, color<span class="op">=</span><span class="st">'white'</span>, showgrid<span class="op">=</span><span class="va">False</span>, zeroline<span class="op">=</span><span class="va">True</span>, zerolinecolor<span class="op">=</span><span class="st">'gray'</span>),</span>
<span id="cb55-118"><a href="#cb55-118" aria-hidden="true" tabindex="-1"></a>    yaxis<span class="op">=</span><span class="bu">dict</span>(title<span class="op">=</span><span class="st">'PC2'</span>, color<span class="op">=</span><span class="st">'white'</span>, showgrid<span class="op">=</span><span class="va">False</span>, zeroline<span class="op">=</span><span class="va">True</span>, zerolinecolor<span class="op">=</span><span class="st">'gray'</span>),</span>
<span id="cb55-119"><a href="#cb55-119" aria-hidden="true" tabindex="-1"></a>    updatemenus<span class="op">=</span>[<span class="bu">dict</span>(</span>
<span id="cb55-120"><a href="#cb55-120" aria-hidden="true" tabindex="-1"></a>        buttons<span class="op">=</span>buttons,</span>
<span id="cb55-121"><a href="#cb55-121" aria-hidden="true" tabindex="-1"></a>        direction<span class="op">=</span><span class="st">"down"</span>,</span>
<span id="cb55-122"><a href="#cb55-122" aria-hidden="true" tabindex="-1"></a>        showactive<span class="op">=</span><span class="va">True</span>,</span>
<span id="cb55-123"><a href="#cb55-123" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">0.95</span>,</span>
<span id="cb55-124"><a href="#cb55-124" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">"left"</span>,</span>
<span id="cb55-125"><a href="#cb55-125" aria-hidden="true" tabindex="-1"></a>        y<span class="op">=</span><span class="fl">0.95</span>,</span>
<span id="cb55-126"><a href="#cb55-126" aria-hidden="true" tabindex="-1"></a>        yanchor<span class="op">=</span><span class="st">"top"</span></span>
<span id="cb55-127"><a href="#cb55-127" aria-hidden="true" tabindex="-1"></a>    )],</span>
<span id="cb55-128"><a href="#cb55-128" aria-hidden="true" tabindex="-1"></a>    legend<span class="op">=</span><span class="bu">dict</span>(</span>
<span id="cb55-129"><a href="#cb55-129" aria-hidden="true" tabindex="-1"></a>        x<span class="op">=</span><span class="fl">0.6</span>, y<span class="op">=</span><span class="fl">0.99</span>,</span>
<span id="cb55-130"><a href="#cb55-130" aria-hidden="true" tabindex="-1"></a>        xanchor<span class="op">=</span><span class="st">'left'</span>, yanchor<span class="op">=</span><span class="st">'top'</span>,</span>
<span id="cb55-131"><a href="#cb55-131" aria-hidden="true" tabindex="-1"></a>        bgcolor<span class="op">=</span><span class="st">'rgba(0,0,0,0)'</span>,</span>
<span id="cb55-132"><a href="#cb55-132" aria-hidden="true" tabindex="-1"></a>        font<span class="op">=</span><span class="bu">dict</span>(color<span class="op">=</span><span class="st">'white'</span>)</span>
<span id="cb55-133"><a href="#cb55-133" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-134"><a href="#cb55-134" aria-hidden="true" tabindex="-1"></a>    margin<span class="op">=</span><span class="bu">dict</span>(t<span class="op">=</span><span class="dv">60</span>, l<span class="op">=</span><span class="dv">20</span>, r<span class="op">=</span><span class="dv">20</span>, b<span class="op">=</span><span class="dv">40</span>)</span>
<span id="cb55-135"><a href="#cb55-135" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-136"><a href="#cb55-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-137"><a href="#cb55-137" aria-hidden="true" tabindex="-1"></a><span class="co"># === Show ===</span></span>
<span id="cb55-138"><a href="#cb55-138" aria-hidden="true" tabindex="-1"></a>display(fig)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>                            <div id="b5fbb8d9-ad9b-4603-b072-561c3b6bc5e8" class="plotly-graph-div" style="height:525px; width:100%;"></div>            <script type="text/javascript">                require(["plotly"], function(Plotly) {                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("b5fbb8d9-ad9b-4603-b072-561c3b6bc5e8")) {                    Plotly.newPlot(                        "b5fbb8d9-ad9b-4603-b072-561c3b6bc5e8",                        [{"hoverinfo":"text","mode":"text","name":"Countries (Full range (0\u2013100%))","text":["FJI","TZA","CAN","USA","KAZ","UZB","PNG","IDN","ARG","CHL","COD","SOM","KEN","TCD","HTI","DOM","RUS","BHS","NOR","GRL","TLS","ZAF","LSO","MEX","URY","BRA","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","BLZ","VEN","GUY","SUR","FRA","ECU","PRI","JAM","CUB","ZWE","BWA","NAM","SEN","MLI","MRT","BEN","NER","NGA","CMR","TGO","GHA","GIN","GNB","LBR","SLE","BFA","CAF","COG","GAB","GNQ","ZMB","MWI","MOZ","SWZ","AGO","ISR","LBN","MDG","GMB","TUN","DZA","JOR","ARE","QAT","KWT","IRQ","OMN","VUT","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","IND","BGD","BTN","NPL","PAK","AFG","TJK","KGZ","TKM","IRN","SYR","ARM","SWE","BLR","UKR","POL","AUT","HUN","MDA","ROU","LTU","LVA","EST","DEU","BGR","GRC","ALB","HRV","CHE","NLD","PRT","ESP","IRL","NCL","SLB","NZL","AUS","LKA","CHN","ITA","DNK","GBR","ISL","AZE","GEO","PHL","MYS","BRN","SVN","FIN","SVK","CZE","JPN","PRY","YEM","SAU","CYP","MAR","EGY","LBY","ETH","DJI","UGA","BIH","MKD","TTO"],"textfont":{"color":"white"},"visible":true,"x":[0.4740772685429136,1.187105075106161,-0.7638694272346928,-2.237620824518164,-1.158695817674841,-0.5187387264099796,1.3391998742111852,0.4830656839061489,0.5199231450867158,0.898298288111542,1.1102304601361404,0.8211029799885173,1.1358869030228833,1.249653768594807,0.3261400066087026,0.6162372780096002,-2.8867201291594107,0.6291170848053398,-0.77542583155831,-0.7476266542714999,0.8916788573481746,0.5654241061060638,0.20089602702578432,0.24091975538667706,-0.07899432361642095,-0.11105035034502622,0.6067046866603417,0.4156929555777425,0.37367331954352223,0.764987304966207,0.8188207776139861,0.7529128472813194,1.050649024190027,0.3250591073005394,0.7807752490407713,0.7783652143487876,0.41217825810381326,-0.7524742598220316,-0.9043648118068557,-1.2434423705727884,0.5350792680826748,-0.2573873126407145,-0.32946356960040046,-0.3190126755755269,1.1527490390642072,0.9996580262885234,1.3559685767379257,0.6406427025477722,0.7126146575258983,0.6885422954476919,0.9497155869150088,1.2609696230851253,0.7311819551554529,1.019338365001752,0.9428217500005291,0.8514962153996511,0.6181418693588693,0.4434455961350003,0.7171427213130152,0.7432801185474321,0.8475464676984461,0.7051302708067756,1.048534184898896,0.9354064842918544,1.2846215497153168,1.158997821874839,0.8540253612684444,0.9967433967416379,0.7684207368957171,1.279662698094524,0.4108908406551002,-0.017311373456100485,1.28941990711739,0.9158446560484315,-0.4653885128152738,-0.008076800462546274,1.3383574143056522,3.079131445980756,2.5951419305908403,0.9916321343899772,0.2995955559246695,1.1202973744576243,1.262093081433878,0.5099202387839648,0.26419253833768824,0.59697247354429,0.05125275499137397,0.3033184353244579,-0.288861299103331,-0.30981309657184114,-0.09560839203423693,0.18196183735642776,0.367635957128482,0.36066110500506515,0.645635572931616,0.9791247148146983,0.49074245212377016,-0.11370558755793105,-0.5175850248830437,-0.6047380533909962,-0.11277824576634204,0.35374901935738967,-2.241341259262033,-1.0752736599642807,-2.5749189636170815,-3.5475610618152102,-1.4085149523873506,-1.3892963895681574,-1.5221327170684658,-3.0516378759045333,-1.3574808158647593,-2.30350485952504,-2.329530627605995,-2.023310291233207,-1.7215129734289585,-1.4148318640292015,-0.6882383315361541,-0.7212224707344179,-2.4675229029672097,-1.0866954627761203,-1.0996726163462178,-0.8273624848423128,-0.7658411550172013,-0.07739581513992723,0.6672906733304557,1.407904753216872,0.5620821484877221,0.3645397558495745,0.28479491741358576,-2.454816799723445,-1.30058601250387,-1.1252607356902926,-0.7637540841428105,0.11564120343842821,-1.9263813176630264,-2.7481533698569427,0.5943932488174937,0.7377875828008843,0.9112398437268892,-2.014711681874058,-1.355633312808339,-2.41162996188841,-2.4796225444209705,-0.813056954469085,0.6988877323690772,1.794767322117417,1.132795749390379,-0.2480338238647519,-0.2385140698337149,0.45530206593491607,0.6128036038546979,1.0508341752150208,1.56704688949839,1.1769837191301127,-2.557666082014568,-2.433615406626819,-0.3683302918496104],"y":[0.03581767871786046,0.01036339427241878,0.32077454057854365,7.643685809905158,-0.27294641866804764,-0.45020461202532297,0.1278976622683472,0.678128530062626,0.4532505895254682,0.31240804781964254,-0.05567527022031318,-0.15998839770646478,-0.021399089419404854,0.039610296617966084,-0.12601641288636062,-0.02236316916766362,1.6992613110166381,-0.04379865295071608,-0.3215543527443715,-0.4232205848460523,0.12701200682486868,0.4765356619891017,-0.20678454979344787,0.44657709603307066,0.02495649479986775,0.8105358788315022,0.0021395549583071716,-0.053719090160608274,0.04057413816161305,-0.024350283976743076,0.013975516944146782,-0.015107808405559225,0.010081001687879454,-0.01896341367653062,-0.04762165010735525,-0.07947474532279347,0.09926810058046795,-0.3532811852337733,-0.6072355628633721,0.15717038470481942,-0.0757219598112149,-0.07496975146744489,-0.21519317565302787,-0.11103278975706377,0.14332809061719745,0.007636701062024853,0.1515082733773418,-0.19362088385172394,-0.08024363404938467,-0.2243861519652839,-0.07604607872726823,-0.027085952712191164,0.290308520490523,-0.012614119916615651,-0.07904302579232445,-0.05119876715135063,-0.10132643427165727,-0.16382256638114018,-0.1322507003355935,-0.023991426854916703,-0.05457961671738937,0.034745166091451396,-0.036971702655186456,-0.012481558459547959,0.002179261524034526,-0.026712672554653594,-0.13257642693347158,-0.005679394166989538,0.005929376856391111,0.04518285997176488,-0.1775176720234432,-0.29315209138216586,0.07161734498274727,-0.16822790989703823,-0.4391611002836993,-0.18794832904025238,-0.19732853417482143,0.08592715208724894,-0.2097701797115875,-0.3129756993937347,-0.17662398473299126,-0.13261244219886015,0.1009268894223766,-0.043341918946780106,0.2600808488957558,-0.0641400822220653,-0.07376874324312511,0.11447920489799315,-0.15238560057556613,0.2973598110174154,-0.3481548513141894,2.3740245081549585,0.06553842391375063,-0.1742032899928047,0.06890146670870267,0.31188649138802366,-0.19863133664998367,-0.49772232211167033,-0.5252204005831682,-0.6220033720547885,0.22893153281621623,-0.2530156266995034,-1.0592507790369379,-0.394626694249678,-0.9492711662697059,-0.6658377939206391,0.04867693617914104,-0.5000635043823594,-0.44036569549702126,-1.293420915775895,-0.2640953155230049,-0.9012210974105447,-0.8690493655830654,-0.8083632778146796,0.7732817046553704,-0.34226567966162136,-0.14504954566185685,-0.3863413980019109,-0.9373268873487021,-0.49590870427537237,-0.26750116052240214,-0.24557063687189457,0.015023810696625145,-0.07214962712256642,-0.04667351939419154,0.11521661711771414,0.17505100794104617,0.5417231593933567,-0.013724306575267908,7.926420676588277,0.1261239143444065,-0.39439167335741027,0.6027757911999931,-0.1263039898837873,-1.041380022888487,-1.0992977017502459,0.056242811350532315,0.11953777595061896,-0.05938897308165275,-0.8778376461222042,-0.4950091833412925,-1.005673051455446,-0.8184487301920561,1.311416976332413,-0.003119291410899755,0.24274552800975344,0.184569676306711,-0.29013384730231817,-0.3432315269350644,0.053783582432283816,-0.06564893607019612,0.050552763904852194,-0.11691030419724602,0.001971409881708408,-0.997380378996725,-1.0508028324675227,-0.18943507491658448],"type":"scatter"},{"line":{"color":"orange","width":2},"mode":"lines","name":"Linear temperature trend (\u00b0C per decade)","showlegend":true,"visible":true,"x":[0,-4.998793640536654],"y":[0,-2.2709547852817447],"type":"scatter"},{"line":{"color":"lime","width":2},"mode":"lines","name":"Population growth rate (%)","showlegend":true,"visible":true,"x":[0,5.233681982369004],"y":[0,0.332022922299351],"type":"scatter"},{"line":{"color":"cyan","width":2},"mode":"lines","name":"Cumulative GHG (Mt CO$_2$e)","showlegend":true,"visible":true,"x":[0,-1.8418995519141022],"y":[0,7.106650691771669],"type":"scatter"},{"hoverinfo":"text","mode":"text","name":"Countries (10\u201390%)","text":["KAZ","UZB","SOM","TCD","HTI","DOM","NOR","ZAF","BOL","PER","COL","PAN","CRI","NIC","HND","SLV","GTM","VEN","GUY","ECU","PRI","JAM","CUB","BWA","SEN","MLI","MRT","BEN","NGA","CMR","TGO","GHA","GIN","SLE","BFA","COG","GAB","MWI","MOZ","ISR","LBN","MDG","TUN","DZA","IRQ","KHM","THA","LAO","MMR","VNM","PRK","KOR","MNG","BGD","PAK","AFG","TJK","KGZ","TKM","SYR","SWE","AUT","GRC","ALB","CHE","NLD","PRT","ESP","IRL","LKA","DNK","ISL","PHL","MYS","BRN","FIN","PRY","CYP","MAR","EGY","LBY","ETH","UGA","TTO"],"textfont":{"color":"white"},"visible":false,"x":[3.1033060540591584,1.6535331727345206,-0.9893737656720785,-1.7011368154843667,-0.44632970455005055,-0.8418734962036963,1.3927986274179731,0.8140624700300442,-0.8016436341319055,-0.38564838231884485,0.006460117972444156,-1.1073475443637444,-1.2102625603994397,-1.0895549180223942,-1.5046074576089683,-0.5376716810547888,-1.0580584548345404,0.08837825498456546,1.154912082142477,-0.5878742073992864,0.3577548497520863,0.49716161823637356,0.5859565666094027,-1.455161767717515,-0.7795769769297741,-0.9453598747755725,-0.8423373892709627,-1.3235653861284862,0.18497395616295753,-1.3789592180484604,-1.3247316104074458,-1.1617161911904095,-0.8393565505611202,-1.1094106160568489,-1.163976370064739,-1.453527345067852,-1.3011858220981747,-1.1452865304321669,-1.4114113973268794,-0.26627647911652397,0.18888140567234937,-1.8127655441349473,0.9602732969947025,0.759003837323527,0.4966432232364484,-0.6862077961328008,0.6175857849884554,-0.8384032049608743,0.2523495743061567,0.30166091342405477,0.9065983450365016,2.082827108909336,0.4118581887577769,0.07702106870043483,-0.40723526865669346,-0.5595619768605495,0.48862733833418615,1.0692154317258584,1.4759825223130003,-0.15654670346798683,1.9523256437961563,2.4862095387689265,1.327539724305459,1.161599063007187,1.9488600056819938,2.508209733322094,1.4225347538709192,2.3238884795475174,0.2745843885633774,-0.4055401824973844,1.997408890779742,-0.19268953281914297,-0.33655705750551324,-0.49127529805204906,-1.285567000590528,2.3702089774906447,-0.9669279747425019,0.44089438980515466,0.7220967584641403,0.12343407193092891,-0.4959203527402929,-1.1810925724216808,-1.6111220753113655,0.6030144589723155],"y":[1.3200058144345952,0.27826541523550813,-0.05300685186441969,0.2814787739241058,-0.5798385825067168,-0.22952014187192735,-0.9125904538502014,3.7397282294382608,-0.14141896900148232,-0.03816543663705604,0.761947838544688,-0.26456657722375476,-0.22863039334131022,-0.2547877129513016,-0.04342613878080189,-0.5967818126044512,-0.1487321331808594,1.1517234548736521,-1.36588206276213,-0.07702899961482369,-0.8524500763084648,-1.039456996802793,-0.6581904094069607,-0.12032670198902003,-0.29482401668085034,-0.20435544916129614,-0.3083864760612513,-0.15767894029733134,2.733512118023919,0.0678766010581228,-0.18819274102636593,-0.12405253906670417,-0.3442353334241192,-0.3417365769931325,-0.14740998574200678,-0.022681380982030395,-0.059357413741525665,-0.21241742885231948,-0.06315266367679724,-0.01133704646491778,-0.728549675821014,0.24203445388348457,-0.9231298396249288,0.6221977540803639,1.1533987978782079,-0.30909819516915704,1.9758567895515262,-0.35460846013440306,-0.01721806788392185,1.2377347924697648,0.025356892691187717,3.0485678785198465,-0.6316327011709657,0.9238812790969468,2.412593389782039,-0.3666592429521622,-0.7770972784758321,-1.0176674726950583,-0.6464460716800542,-0.10416024392328653,-0.9159354071324802,-1.0708548596341385,-0.4666278386277602,-1.2993088446587013,-1.1235869050184297,0.32710831940861257,-0.9070979796689999,1.5381798272361016,-0.40579323084315594,-0.45807242103249324,-0.9939581792481268,-0.781626337977659,0.8424960912663326,1.117321962381223,-0.18473260584705228,-1.1829082096850376,-0.17112265049964662,-0.9968868483494938,-0.4816896718984868,1.2959572026077424,0.38820873228775926,0.6751786491762019,0.15674386573384672,-0.9162672410624684],"type":"scatter"},{"line":{"color":"orange","width":2},"mode":"lines","name":"Linear temperature trend (\u00b0C per decade)","showlegend":false,"visible":false,"x":[0,2.2430401483233657],"y":[0,-0.8574664650495177],"type":"scatter"},{"line":{"color":"lime","width":2},"mode":"lines","name":"Population growth rate (%)","showlegend":false,"visible":false,"x":[0,-2.2013843826631545],"y":[0,1.1354034111672275],"type":"scatter"},{"line":{"color":"cyan","width":2},"mode":"lines","name":"Cumulative GHG (Mt CO$_2$e)","showlegend":false,"visible":false,"x":[0,1.4098837860841673],"y":[0,3.1369897916174474],"type":"scatter"}],                        {"template":{"data":{"histogram2dcontour":[{"type":"histogram2dcontour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"choropleth":[{"type":"choropleth","colorbar":{"outlinewidth":0,"ticks":""}}],"histogram2d":[{"type":"histogram2d","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmap":[{"type":"heatmap","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"heatmapgl":[{"type":"heatmapgl","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"contourcarpet":[{"type":"contourcarpet","colorbar":{"outlinewidth":0,"ticks":""}}],"contour":[{"type":"contour","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"surface":[{"type":"surface","colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]}],"mesh3d":[{"type":"mesh3d","colorbar":{"outlinewidth":0,"ticks":""}}],"scatter":[{"fillpattern":{"fillmode":"overlay","size":10,"solidity":0.2},"type":"scatter"}],"parcoords":[{"type":"parcoords","line":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolargl":[{"type":"scatterpolargl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"scattergeo":[{"type":"scattergeo","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterpolar":[{"type":"scatterpolar","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"scattergl":[{"type":"scattergl","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatter3d":[{"type":"scatter3d","line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattermapbox":[{"type":"scattermapbox","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scatterternary":[{"type":"scatterternary","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"scattercarpet":[{"type":"scattercarpet","marker":{"colorbar":{"outlinewidth":0,"ticks":""}}}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"pie":[{"automargin":true,"type":"pie"}]},"layout":{"autotypenumbers":"strict","colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"hovermode":"closest","hoverlabel":{"align":"left"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"bgcolor":"#E5ECF6","angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"ternary":{"bgcolor":"#E5ECF6","aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]]},"xaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"yaxis":{"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","automargin":true,"zerolinewidth":2},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white","gridwidth":2}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"geo":{"bgcolor":"white","landcolor":"#E5ECF6","subunitcolor":"white","showland":true,"showlakes":true,"lakecolor":"white"},"title":{"x":0.05},"mapbox":{"style":"light"},"margin":{"b":0,"l":0,"r":0,"t":30}}},"font":{"color":"white","family":"Georgia"},"xaxis":{"title":{"text":"PC1"},"color":"white","showgrid":false,"zeroline":true,"zerolinecolor":"gray"},"yaxis":{"title":{"text":"PC2"},"color":"white","showgrid":false,"zeroline":true,"zerolinecolor":"gray"},"legend":{"font":{"color":"white"},"x":0.6,"y":0.99,"xanchor":"left","yanchor":"top","bgcolor":"rgba(0,0,0,0)"},"margin":{"t":60,"l":20,"r":20,"b":40},"title":{"text":"PCA Biplot \u2014 Country Profiles"},"paper_bgcolor":"black","plot_bgcolor":"black","updatemenus":[{"buttons":[{"args":[{"visible":[true,true,true,true,false,false,false,false]},{"title":"PCA Biplot \u2014 Full range (0\u2013100%)\u003cbr\u003ePC1: 48.6% \u00b7 PC2: 32.9%"}],"label":"Full range (0\u2013100%)","method":"update"},{"args":[{"visible":[false,false,false,false,true,true,true,true]},{"title":"PCA Biplot \u2014 10\u201390%\u003cbr\u003ePC1: 46.4% \u00b7 PC2: 30.7%"}],"label":"10\u201390%","method":"update"}],"direction":"down","showactive":true,"x":0.95,"xanchor":"left","y":0.95,"yanchor":"top"}]},                        {"responsive": true}                    ).then(function(){
                            
var gd = document.getElementById('b5fbb8d9-ad9b-4603-b072-561c3b6bc5e8');
var x = new MutationObserver(function (mutations, observer) {{
        var display = window.getComputedStyle(gd).display;
        if (!display || display === 'none') {{
            console.log([gd, 'removed!']);
            Plotly.purge(gd);
            observer.disconnect();
        }}
}});

// Listen for the removal of the full notebook cells
var notebookContainer = gd.closest('#notebook-container');
if (notebookContainer) {{
    x.observe(notebookContainer, {childList: true});
}}

// Listen for the clearing of the current output cell
var outputEl = gd.closest('.output');
if (outputEl) {{
    x.observe(outputEl, {childList: true});
}}

                        })                };                });            </script>        </div>
</div>
</div>
</section>
</section>
<section id="principal-component-analysis-pca-exploring-global-climate-emissions-and-growth-patterns" class="level2">
<h2 class="anchored" data-anchor-id="principal-component-analysis-pca-exploring-global-climate-emissions-and-growth-patterns">Principal Component Analysis (PCA): Exploring Global Climate, Emissions, and Growth Patterns</h2>
<p>To synthesize complex relationships between <strong>climate indicators</strong>, <strong>GHG emissions</strong>, and <strong>population growth</strong> across countries, we conducted a <strong>Principal Component Analysis (PCA)</strong>. This method reduces dimensionality while retaining the most important patterns in the data.</p>
<section id="key-observations-from-pca" class="level3">
<h3 class="anchored" data-anchor-id="key-observations-from-pca">Key Observations from PCA</h3>
<ul>
<li><strong>Extreme GHG emitters</strong> like the <strong>United States (USA)</strong> and <strong>China (CHN)</strong> stand out as outliers due to their exceptionally high emissions, strongly influencing the first principal component.</li>
<li>When excluding these outliers, the overall structure of the PCA remains consistent, revealing <strong>underlying global trends</strong>.</li>
</ul>
<hr>
</section>
<section id="weak-correlation-between-ghg-emissions-and-other-variables" class="level3">
<h3 class="anchored" data-anchor-id="weak-correlation-between-ghg-emissions-and-other-variables">Weak Correlation Between GHG Emissions and Other Variables</h3>
<ul>
<li><strong>GHG emissions</strong> show <strong>low correlation</strong> with both:
<ul>
<li><strong>Population growth</strong></li>
<li><strong>Climate change indicators</strong> (e.g., temperature trend)</li>
</ul></li>
</ul>
<p>This suggests that <strong>emissions alone do not explain national-level differences</strong> in climate impact or demographic dynamics.</p>
<hr>
</section>
<section id="climate-change-vs.-growth-inverse-relationship" class="level3">
<h3 class="anchored" data-anchor-id="climate-change-vs.-growth-inverse-relationship">Climate Change vs.&nbsp;Growth: Inverse Relationship</h3>
<ul>
<li>The PCA reveals an <strong>inverse correlation</strong> between:
<ul>
<li><strong>Climate change impact (Â°C/decade trend)</strong></li>
<li><strong>Population growth</strong></li>
</ul></li>
</ul>
<blockquote class="blockquote">
<p>Countries with <strong>strong climate warming signals</strong> tend to show <strong>slower population growth</strong>, and vice versa.</p>
</blockquote>
<section id="examples" class="level4">
<h4 class="anchored" data-anchor-id="examples">Examples:</h4>
<ul>
<li><strong>Zimbabwe (ZWE)</strong> and <strong>Moldova (MDA)</strong> show <strong>high climate change trends</strong> but <strong>low or negative population growth</strong>.</li>
<li>In contrast, <strong>United Arab Emirates (ARE)</strong> and <strong>Qatar (QAT)</strong> show <strong>rapid population growth</strong> but <strong>relatively low temperature trend changes</strong>.</li>
</ul>
<hr>
</section>
</section>
<section id="a-global-process-with-unequal-local-impacts" class="level3">
<h3 class="anchored" data-anchor-id="a-global-process-with-unequal-local-impacts">A Global Process with Unequal Local Impacts</h3>
<p>These results highlight a critical insight:</p>
<blockquote class="blockquote">
<p>While <strong>climate change is a global phenomenon</strong>, the <strong>responsibility for emissions</strong> and the <strong>local impact of warming</strong> are <strong>unevenly distributed</strong> across countries.</p>
</blockquote>
<ul>
<li>Some <strong>highly impacted countries</strong> contribute little to global emissions.</li>
<li>Some <strong>major polluters</strong> appear <strong>less vulnerable</strong> to climate change in the short term.</li>
</ul>
<p>This disconnect may reflect: - <strong>Geographic realities</strong> â e.g., tropical regions tend to experience less absolute warming but may suffer from other climate stresses. - <strong>Economic and infrastructural disparities</strong>, where less-developed countries may lack the resilience to adapt to even small changes. - <strong>Historical responsibility</strong> and <strong>policy inertia</strong>, leaving some countries to face greater costs with fewer resources.</p>
<hr>
</section>
<section id="final-takeaway" class="level3">
<h3 class="anchored" data-anchor-id="final-takeaway">Final Takeaway</h3>
<p>PCA helped to uncover the <strong>asymmetry between climate impact and contribution</strong>, supporting the need for <strong>differentiated responsibilities</strong> and <strong>tailored adaptation strategies</strong> in international climate policy.</p>
</section>
</section>
<section id="conclusion-1" class="level2">
<h2 class="anchored" data-anchor-id="conclusion-1">Conclusion</h2>
<p>This project confirms that <strong>climate change is a global process</strong>, with every country showing some degree of warming over the last six decades. However, the <strong>impact</strong>, <strong>contribution</strong>, and <strong>capacity to respond</strong> vary widely across countries:</p>
<ul>
<li><strong>No country is cooling</strong>, but someâlike <strong>Zimbabwe (ZWE)</strong> and <strong>Moldova (MDA)</strong>âare warming faster despite low emissions and limited growth.</li>
<li>Major emittersâsuch as <strong>USA</strong> and <strong>China (CHN)</strong>âhave significantly higher GHG outputs but are not necessarily the most climatically impacted.</li>
<li>Countries with <strong>rapid population or economic growth</strong> (e.g., <strong>UAE, ARE</strong>; <strong>Qatar,QAT</strong>) often show <strong>lower climate trend intensities</strong>, possibly reflecting their geographic positioning or economic buffering.</li>
</ul>
<p>Through <strong>correlation analysis</strong>, <strong>regression models</strong>, and <strong>PCA</strong>, we revealed structural imbalances:<br>
&gt; Many countries facing the steepest climate consequences have <strong>contributed the least</strong> to global emissions, underlining a critical issue of <strong>climate justice</strong>.</p>
<hr>
<section id="skills-demonstrated" class="level3">
<h3 class="anchored" data-anchor-id="skills-demonstrated">Skills Demonstrated</h3>
<p>This notebook also serves as a <strong>portfolio project</strong> to showcase end-to-end data science capabilities:</p>
<ul>
<li><strong>Data ingestion</strong> from open-access sources (IMF, World Bank)</li>
<li><strong>Data cleaning &amp; integration</strong> across country-level datasets</li>
<li><strong>Exploratory data analysis (EDA)</strong> using statistical summaries and correlation metrics</li>
<li><strong>Geospatial visualization</strong> of global trends with Matplotlib, Seaborn, and GeoPandas</li>
<li><strong>Regression modeling</strong> (linear, log, exponential)</li>
<li><strong>Dimensionality reduction</strong> with PCA for pattern recognition</li>
<li><strong>Narrative storytelling</strong> with Markdown to communicate insights clearly</li>
</ul>
<blockquote class="blockquote">
<p>Thank you for exploring this analysis â feedback and discussion are welcome!</p>
<blockquote class="blockquote">
<p><strong>Note</strong>: This project was developed with the support of OpenAIâs ChatGPT for guidance on code structure, reasoning, and Markdown formatting.<br>
All code, interpretations, and visualizations were thoroughly reviewed, validated, and adapted by myself to ensure correctness and understanding.</p>
</blockquote>
</blockquote>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "î§";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>